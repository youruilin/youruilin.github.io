<!DOCTYPE html><html lang="[&quot;ja&quot;,&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]" data-theme="light"><head><style>:root {
  --article-theme-color: #e5a80d;
}</style><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç° | iooio_blog</title><meta name="author" content="æ¸¸ç‘æ—"><meta name="copyright" content="æ¸¸ç‘æ—"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content=".ai-summary-active .ai-summary-icon-title text:first-of-type {         display: none !important;       }        .ai-summary-active .ai-summary-icon-title text:last-child {         disp">
<meta property="og:type" content="article">
<meta property="og:title" content="åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°">
<meta property="og:url" content="https://youruilin.github.io/posts/629f32c0/index.html">
<meta property="og:site_name" content="iooio_blog">
<meta property="og:description" content=".ai-summary-active .ai-summary-icon-title text:first-of-type {         display: none !important;       }        .ai-summary-active .ai-summary-icon-title text:last-child {         disp">
<meta property="og:locale" content="ja_JP">
<meta property="og:image" content="http://lychee.iooio.cn:9527/uploads/medium/38/53/e2ec8d2bd090dd1321fa01254923.png">
<meta property="article:published_time" content="2024-12-29T10:15:00.000Z">
<meta property="article:modified_time" content="2025-07-22T10:21:09.000Z">
<meta property="article:author" content="æ¸¸ç‘æ—">
<meta property="article:tag" content="åç«¯">
<meta property="article:tag" content="api">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lychee.iooio.cn:9527/uploads/medium/38/53/e2ec8d2bd090dd1321fa01254923.png"><link rel="shortcut icon" href="/img/favicon_io/android-chrome-192x192.png"><link rel="canonical" href="https://youruilin.github.io/posts/629f32c0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = true
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"${query} ã®æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚","hits_stats":"${hits} ä»¶ã®è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'ã‚³ãƒ”ãƒ¼æˆåŠŸ',
    error: 'ã‚³ãƒ”ãƒ¼å¤±æ•—',
    noSupport: 'ãƒ–ãƒ©ã‚¦ã‚¶ãŒå¯¾å¿œã—ã¦ã„ã¾ã›ã‚“'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'æ—¥',
  dateSuffix: {
    just: 'ãŸã£ãŸä»Š',
    min: 'åˆ†å‰',
    hour: 'æ™‚é–“å‰',
    day: 'æ—¥å‰',
    month: 'ãƒ¶æœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"ç¹ä½“å­—ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ","cht_to_chs":"ç°¡ä½“å­—ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ","day_to_night":"ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ","night_to_day":"ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'ã‚‚ã£ã¨è¦‹ã‚‹'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-22 10:21:09'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4684778_zddxn068xgp.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-ui@2.15.6/lib/theme-chalk/index.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><span id="fps"></span><link rel="stylesheet" href="/css/tooltip.css" media="defer" onload="this.media='all'"><div id="myscoll"></div><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="an_music_bg">    </div><div id="web_bg" style="background-image: url(https://raw.githubusercontent.com/youruilin/pic_bed/main/bcg_img/index_test.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><a href="/archives/"><div class="headline">è¨˜äº‹</div><div class="length-num">39</div></a><a href="/tags/"><div class="headline">ã‚¿ã‚°</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">ã‚«ãƒ†ã‚´ãƒª</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page group faa-parent animated-hover" href="javascript:void(0);"><i class="fa-fw fas fa-home faa-tada"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i><span> é¦–é¡µ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fa-fw fas fa-tags faa-tada"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fa-fw fas fa-folder-open faa-tada"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw fas fa-link faa-tada"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat faa-tada"></i><span> æˆ‘çš„</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="fa-fw fas fa-music faa-tada"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Gallery/"><i class="fa-fw fas fa-images faa-tada"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fa-fw fas fa-video faa-tada"></i><span> ç”µå½±</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="fa-fw fas fa-laptop faa-tada"></i><span> æˆ‘çš„è£…å¤‡</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw fas fa-heart faa-tada"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover" href="javascript:void(0);"><i class="fa-fw fas fa-language faa-tada"></i><span> è¯­è¨€</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/"><i class="fa-fw fas fa-c faa-tada"></i><span> ä¸­æ–‡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/jp/"><i class="fa-fw fas fa-j faa-tada"></i><span> æ—¥æœ¬èª</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://butterfly.js.org/en/"><i class="fa-fw fas fa-e faa-tada"></i><span> English</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(http://lychee.iooio.cn:9527/uploads/medium/38/53/e2ec8d2bd090dd1321fa01254923.png);"><nav id="nav"><span id="blog-info"><a href="/" title="iooio_blog"><span id="site-name">iooio_blog</span></a><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" href="https://youruilin.github.io/Hexo_nav/" title="å‰å¾€ä¸ªäººå¯¼èˆª" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://lychee.iooio.cn:9527/uploads/original/03/a7/945ec4715b14d857227aa23429f7.webp"/><span class="back-menu-item-text">ä¸ªäººå¯¼èˆª</span></a><a class="back-menu-item" href="/" rel="external nofollow" title="åšå®¢ä¸»é¡µ" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://lychee.iooio.cn:9527/uploads/original/27/37/cba78cfecaff456df3d2f40a4ded.webp" style="width: 30px; height: 30px;"/><span class="back-menu-item-text">åšå®¢ä¸»é¡µ</span></a><a class="back-menu-item" href="https://youruilin.github.io/index_blog/" rel="external nofollow" title="å‰å¾€ä¸ªäººä¸»é¡µ" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img02.anheyu.com/adminuploads/1/2022/04/27/6268e7d9de532.png"/><span class="back-menu-item-text">ä¸ªäººä¸»é¡µ</span></a><a class="back-menu-item" href="http://lychee.iooio.cn:9527/" rel="external nofollow" title="lychee" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://lychee.iooio.cn:9527/uploads/original/3d/44/667fa779ad75e6062e263075a028.webp"/><span class="back-menu-item-text">lycheeå›¾åºŠ</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" href="/" title="å‰å¾€åšå®¢ä¸»é¡µ" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://lychee.iooio.cn:9527/uploads/original/3e/33/45b5e9c7796e9940d0351db5aeb5.webp"/><span class="back-menu-item-text">åšå®¢</span></a></div></div></div></div></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page group faa-parent animated-hover" href="javascript:void(0);"><i class="fa-fw fas fa-home faa-tada"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i><span> é¦–é¡µ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fa-fw fas fa-tags faa-tada"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fa-fw fas fa-folder-open faa-tada"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw fas fa-link faa-tada"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat faa-tada"></i><span> æˆ‘çš„</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="fa-fw fas fa-music faa-tada"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Gallery/"><i class="fa-fw fas fa-images faa-tada"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fa-fw fas fa-video faa-tada"></i><span> ç”µå½±</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="fa-fw fas fa-laptop faa-tada"></i><span> æˆ‘çš„è£…å¤‡</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw fas fa-heart faa-tada"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover" href="javascript:void(0);"><i class="fa-fw fas fa-language faa-tada"></i><span> è¯­è¨€</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/"><i class="fa-fw fas fa-c faa-tada"></i><span> ä¸­æ–‡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/jp/"><i class="fa-fw fas fa-j faa-tada"></i><span> æ—¥æœ¬èª</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://butterfly.js.org/en/"><i class="fa-fw fas fa-e faa-tada"></i><span> English</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:23px;width:23px;fill:currentColor;position:relative;top:4px" aria-hidden="true"><use xlink:href="#icon-icon-sousuo"></use></svg></a></div><a class="meihua faa-parent animated-hover" onclick="toRandomPost()" title="éšæœºè·³è½¬ä¸€ç¯‡æ–‡ç« " id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-feijix"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰/ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ" id="nightmode-button"><svg class="faa-tada" style="height:24px;width:24px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">ä½œæˆæ—¥</span><time class="post-meta-date-created" datetime="2024-12-29T10:15:00.000Z" title="ä½œæˆæ—¥ 2024-12-29 10:15:00">2024-12-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°æ—¥</span><time class="post-meta-date-updated" datetime="2025-07-22T10:21:09.000Z" title="æ›´æ–°æ—¥ 2025-07-22 10:21:09">2025-07-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">åç«¯</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">ç·æ–‡å­—æ•°:</span><span class="word-count">1.8w</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">èª­ã‚€æ™‚é–“:</span><span>65åˆ†</span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><link rel="stylesheet" href="/hexo-ai-summaries/gemini.css">
<div class="post-gemini-ai">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="126" height="20" role="img" class="ai-summary-trigger">
    <style>
      .ai-summary-active .ai-summary-icon-title text:first-of-type {
        display: none !important;
      }

      .ai-summary-active .ai-summary-icon-title text:last-child {
        display: initial !important;
      }

      .ai-summary-active #r rect {
        width: 105px !important;
      }

      .ai-summary-active .ai-summary-rect {
        width: 80px !important;
      }

      .ai-summary-pen {
        opacity: 1;
        animation: ai-wink 2s infinite;
      }

      @keyframes ai-wink {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
    <linearGradient id="s" x2="0" y2="100%">
      <stop offset="0" stop-color="#bbb" stop-opacity=".1" />
      <stop offset="1" stop-opacity=".1" />
    </linearGradient>
    <clipPath id="r">
      <rect width="125" height="20" rx="3" fill="#fff" />
    </clipPath>
    <g clip-path="url(#r)">
      <rect width="25" height="20" fill="#555" />
      <rect class="ai-summary-rect" x="25" width="100" height="20" fill="#007ec6" />
      <rect width="25" height="20" fill="url(#s)" />
    </g>
    <g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="110" class="ai-summary-icon-title">
      <image class="ai-summary-pen" x="5" y="3" width="14" height="14" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im0yMS42NCAzLjY0bC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzJNMTQgN2wzIDNNNSA2djRtMTQgNHY0TTEwIDJ2Mk03IDhIM20xOCA4aC00TTExIDNIOSIvPjwvc3ZnPg==" />
      <text x="750" y="140" transform="scale(.1)" fill="#fff" textLength="900">ai-è¦ç´„ã‚’å–å¾—</text>
      <text style="display: none" x="650" y="140" transform="scale(.1)" fill="#fff" textLength="600">æ–‡ç« æ‘˜è¦</text>
    </g>
  </svg>
</div>
<script src="/hexo-ai-summaries/gemini.js"></script>
<div class="note blue no-icon flat"><p>åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°ç³»åˆ—</p>
<ol>
<li>åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°ï¼ˆä¸€ï¼‰- ç™»å½•&amp;ä»»åŠ¡æ¨¡å—  â‡¦å½“å‰ä½ç½®ğŸª‚</li>
<li><a href="/posts/1432cf2a">åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°ï¼ˆäºŒï¼‰- åˆçº¦æ¨¡å—</a> </li>
<li>åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°ï¼ˆä¸‰ï¼‰- æ¶ˆæ¯æ¨¡å—</li>
<li>åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°ï¼ˆå››ï¼‰- æˆ‘çš„ä¸ªäººä¸­å¿ƒæ¨¡å—</li>
</ol>
</div>
<h2 id="1-åˆå§‹åŒ–"><a href="#1-åˆå§‹åŒ–" class="headerlink" title="1.åˆå§‹åŒ–"></a>1.åˆå§‹åŒ–</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <p><strong>1.1åˆ›å»ºé¡¹ç›®ï¼š</strong></p><ol><li><p>æ–°å»º <code>api_server</code> æ–‡ä»¶å¤¹ä½œä¸ºé¡¹ç›®æ ¹ç›®å½•ï¼Œå¹¶åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œåˆå§‹åŒ–åŒ…ç®¡ç†é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ <code>express</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pnpm i express@4.17.1</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º <code>app.js</code> ä½œä¸ºæ•´ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ express æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»º express çš„æœåŠ¡å™¨å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// write your code here...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨ app.listen æ–¹æ³•ï¼ŒæŒ‡å®šç«¯å£å·å¹¶å¯åŠ¨webæœåŠ¡å™¨</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3007</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;api server running at http://127.0.0.1:3007&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p><strong>1.2é…ç½® cors è·¨åŸŸ&amp;è§£æè¡¨å•æ•°æ®çš„ä¸­é—´ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"># <span class="number">1.2</span><span class="number">.1</span>.é¦–å…ˆå®‰è£…</span><br><span class="line">pnpm i cors@<span class="number">2.8</span><span class="number">.5</span></span><br><span class="line"></span><br><span class="line">ç„¶ååœ¨ app.<span class="property">js</span> ä¸­é…ç½®</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»º express å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"># <span class="number">1.2</span><span class="number">.2</span>.é…ç½® cors è·¨åŸŸä¸­é—´ä»¶</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br><span class="line"></span><br><span class="line"># <span class="number">1.2</span><span class="number">.3</span>.é…ç½®è§£æè¡¨å•æ•°æ®çš„ä¸­é—´ä»¶ï¼Œä»…èƒ½è§£æ application/x-www-form-urlencoded ç±»å‹çš„è¡¨å•æ•°æ®</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å¹¶ä½¿ç”¨ç”¨æˆ·è·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/user&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, userRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æœåŠ¡å™¨</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3007</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ: http://127.0.0.1:3007&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>1.3 åˆå§‹åŒ–è·¯ç”±æ–‡ä»¶&amp;æ–‡ä»¶å¤¹ï¼š</strong></p><ol><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œæ–°å»º <code>router</code> æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„<code>è·¯ç”±</code>æ¨¡å—</p><blockquote><p>è·¯ç”±æ¨¡å—ä¸­ï¼Œåªå­˜æ”¾å®¢æˆ·ç«¯çš„è¯·æ±‚ä¸å¤„ç†å‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»</p></blockquote></li><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œæ–°å»º <code>router_handler</code> æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ <code>è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</code></p><blockquote><p>è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—ä¸­ï¼Œä¸“é—¨è´Ÿè´£å­˜æ”¾æ¯ä¸ªè·¯ç”±å¯¹åº”çš„å¤„ç†å‡½æ•°</p></blockquote></li></ol><p><strong>1.4åˆå§‹åŒ–è·¯ç”±æ¨¡å—ï¼š</strong></p><ol><li><p>åœ¨ <code>router</code> æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»º <code>user.js</code> æ–‡ä»¶ï¼Œä½œä¸ºç”¨æˆ·çš„è·¯ç”±æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> userHandler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œç”¨æˆ·</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login/code&#x27;</span>, userHandler.<span class="property">regUser</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•æ¥å£</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,userHandler.<span class="property">login</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°ï¼š<code>/api_server/router_handler/user.js</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œç”¨æˆ·çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">regUser</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;reguser OK&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">login</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;login OK&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>åœ¨ <code>app.js</code> ä¸­ï¼Œå¯¼å…¥å¹¶ä½¿ç”¨ <code>ç”¨æˆ·è·¯ç”±æ¨¡å—</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¹¶æ³¨å†Œç”¨æˆ·è·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/user&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, userRouter)</span><br></pre></td></tr></table></figure></li></ol>
              </div>
            </details>
<h2 id="2-åˆ›å»º-mysql-æ•°æ®åº“"><a href="#2-åˆ›å»º-mysql-æ•°æ®åº“" class="headerlink" title="2.åˆ›å»º mysql æ•°æ®åº“"></a>2.åˆ›å»º mysql æ•°æ®åº“</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <p>2.1 æ–°å»ºæ•°æ®åº“&amp;è¡¨</p><p>åœ¨ MySQL Shell ä¸­ï¼Œä½ å·²ç»å¯åŠ¨äº†äº¤äº’å¼ Shellï¼Œæ‰€ä»¥ä¸éœ€è¦å†æ¬¡è¾“å…¥ <code>mysqlsh</code>è¿›è¡Œå¯åŠ¨ã€‚</p><p>ä¸‹é¢æ˜¯æ­£ç¡®çš„æ­¥éª¤æ¥è¿æ¥åˆ°æ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">\sql</span><br><span class="line"></span><br><span class="line">// ç«¯å£å·é»˜è®¤å³ä¸ºï¼š3006</span><br><span class="line">\connect root@localhost</span><br><span class="line"></span><br><span class="line">// è¾“å…¥å¯†ç åï¼Œå³å¯ä»¥è¿æ¥åˆ°æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">// ç„¶åæ‰§è¡Œä¸‹é¢ä¸€è¡Œä»£ç ï¼Œåˆ›å»ºæ•°æ®åº“è¡¨</span><br><span class="line">CREATE DATABASE shuangzhao_iooio CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci</span><br><span class="line"></span><br><span class="line">å…¶ä¸­ï¼šCHARACTER SET utf8mb4ï¼šæŒ‡å®šæ•°æ®åº“çš„å­—ç¬¦é›†ä¸º utf8mb4ï¼Œæ”¯æŒå®Œæ•´çš„ Unicodeï¼ŒåŒ…æ‹¬è¡¨æƒ…ç¬¦å·ã€‚</span><br><span class="line">COLLATE utf8mb4_general_ciï¼šè®¾ç½®æ’åºè§„åˆ™ä¸ºä¸åŒºåˆ†å¤§å°å†™çš„é€šç”¨è§„åˆ™ã€‚</span><br><span class="line"></span><br><span class="line">// ç„¶åè®¾ç½®é»˜è®¤æ•°æ®åº“</span><br><span class="line">USE shuangzhao_iooio</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ ¹æ®é¡¹ç›®è¦æ±‚åˆ›å»ºæ•°æ®åº“è¡¨ï¼›</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºç”¨æˆ·ä¿¡æ¯è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY COMMENT <span class="string">&#x27;ç”¨æˆ·ID&#x27;</span>,</span><br><span class="line">    accounts <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·è´¦å·ï¼ˆæ‰‹æœºå·ï¼‰&#x27;</span>,</span><br><span class="line">    user_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">    sex TINYINT <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ€§åˆ«ï¼ˆ1: ç”·, 2: å¥³, 0: æœªçŸ¥ï¼‰&#x27;</span>,</span><br><span class="line">    birthday <span class="type">DATE</span> COMMENT <span class="string">&#x27;å‡ºç”Ÿæ—¥æœŸ&#x27;</span>,</span><br><span class="line">    pay_password <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ”¯ä»˜å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰&#x27;</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">    work_time <span class="type">DATE</span> COMMENT <span class="string">&#x27;å‚åŠ å·¥ä½œæ—¶é—´&#x27;</span>,</span><br><span class="line">    head_img <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤´åƒURL&#x27;</span>,</span><br><span class="line">    idcard <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;èº«ä»½è¯å·ç &#x27;</span>,</span><br><span class="line">    account_price <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;è´¦æˆ·ä½™é¢&#x27;</span>,</span><br><span class="line">    is_check TINYINT <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;å®¡æ ¸çŠ¶æ€ï¼ˆ0: æœªå®¡æ ¸, 1: å·²å®¡æ ¸ï¼‰&#x27;</span>,</span><br><span class="line">    it_enterprise TINYINT <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;æ˜¯å¦ä¸ºITä¼ä¸šï¼ˆ1: æ˜¯, 0: å¦ï¼‰&#x27;</span>,</span><br><span class="line">    enterprise TINYINT <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;æ˜¯å¦ä¸ºä¼ä¸šç”¨æˆ·ï¼ˆ1: æ˜¯, 0: å¦ï¼‰&#x27;</span>,</span><br><span class="line">    manage TINYINT <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;æ˜¯å¦ä¸ºç®¡ç†å‘˜ï¼ˆ1: æ˜¯, 0: å¦ï¼‰&#x27;</span>,</span><br><span class="line">    token <span class="type">VARCHAR</span>(<span class="number">512</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç™»å½•Token&#x27;</span>,</span><br><span class="line">    expire_time <span class="type">BIGINT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;Tokenè¿‡æœŸæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰&#x27;</span>,</span><br><span class="line">    created_at <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updated_at <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·ä¿¡æ¯è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>ä»¥ä¸Šä»£ç æ ¹æ®åŸå§‹é¡¹ç›®æ•°æ®æ ¼å¼ï¼Œç”± chatgpt å¿«é€Ÿç”Ÿæˆï¼Œå®é™…å¼€å‘ä¸­éœ€è¦åšå°‘è®¸è°ƒæ•´ï¼Œä¾‹å¦‚å¢åŠ  code éªŒè¯ç ï¼Œä»¥åŠè¿‡æœŸæ—¶é—´</li></ul><p>å®é™…å¼€å‘ä¸­ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œéœ€è¦å¯¹è¡¨ç»“æ„è¿›è¡Œä¿®æ”¹ï¼Œä»¥ä¸‹æ˜¯å¢åŠ  column çš„æ–¹æ³•ç¤ºä¾‹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tasklist </span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">COLUMN</span> head_img <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å¤´åƒé“¾æ¥åœ°å€&#x27;</span>;</span><br></pre></td></tr></table></figure>
              </div>
            </details>
<h2 id="3-ä¸ºé¡¹ç›®åç«¯é¡¹ç›®å®‰è£…-mysql2-æ¨¡å—"><a href="#3-ä¸ºé¡¹ç›®åç«¯é¡¹ç›®å®‰è£…-mysql2-æ¨¡å—" class="headerlink" title="3.ä¸ºé¡¹ç›®åç«¯é¡¹ç›®å®‰è£… mysql2 æ¨¡å—"></a>3.ä¸ºé¡¹ç›®åç«¯é¡¹ç›®å®‰è£… mysql2 æ¨¡å—</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£… mysql</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pnpm i mysql2</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º <code>/db/index.js</code> æ–‡ä»¶ï¼Œåœ¨æ­¤è‡ªå®šä¹‰æ¨¡å—ä¸­åˆ›å»ºæ•°æ®åº“çš„è¿æ¥å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ mysql æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2/promise&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;admin123&#x27;</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;shuangzhao_iooio&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–å…±äº« db æ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = db</span><br></pre></td></tr></table></figure></li><li><p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå°†æ¥åœ¨æŸ¥è¯¢æ•°æ®åº“æ—¶ï¼Œè¿”å›çš„ç»“æœè¾ƒä¹‹å‰ mysql æœ‰é‡å¤§æ”¹å˜ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// mysql å“åº”ç»“æœ</span></span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">accounts</span>: <span class="string">&#x27;abc123&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="attr">accounts</span>: <span class="string">&#x27;xyz456&#x27;</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// mysql2 å“åº”ç»“æœ</span></span><br><span class="line">[</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç»“æœï¼š</span></span><br><span class="line">  [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">accounts</span>: <span class="string">&#x27;abc123&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="attr">accounts</span>: <span class="string">&#x27;xyz456&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŸ¥è¯¢å­—æ®µå…ƒæ•°æ®ï¼š</span></span><br><span class="line">  [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;id&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;int&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;name&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;varchar&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;accounts&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;varchar&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œæƒ³åƒ mysql é‚£æ—¶ç›´æ¥ä½¿ç”¨æŸ¥è¯¢æ•°æ®åº“è¿”å›çš„æ•°æ®ï¼Œé‚£æ˜¯ä¸å¯èƒ½æ»´</span></span><br><span class="line"><span class="comment">// åœ¨ mysql2 ä¸­ï¼Œéœ€è¦ä½¿ç”¨ const [results] = await db.query(sql, [id])  è¿›è¡Œè§£æ„</span></span><br><span class="line"><span class="comment">//è¿›è€Œï¼Œæ‹¿åˆ°è¿”å›æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå“åº”ç»“æœï¼Œå³æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol>
              </div>
            </details>
<h2 id="4-ç™»å½•æ¨¡å—"><a href="#4-ç™»å½•æ¨¡å—" class="headerlink" title="4.ç™»å½•æ¨¡å—"></a>4.ç™»å½•æ¨¡å—</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <p>1.å‘é€éªŒè¯ç &amp;ç™»å½•é€»è¾‘</p><p>è·¯ç”±å¤„ç†å‡½æ•°ï¼š<code>/api_server/router_handler/user.js</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨è¿™é‡Œå®šä¹‰å’Œç”¨æˆ·ç›¸å…³çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼Œä¾› /router/user.js æ¨¡å—è¿›è¡Œè°ƒç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">&#x27;../db/index&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ bcryptjs åŠ å¯†æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcryptjs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ç”Ÿæˆ Token çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;../config&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”ŸæˆéšæœºéªŒè¯ç </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generateCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">100000</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">900000</span>).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">regUser</span> = <span class="keyword">async</span> (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–å®¢æˆ·ç«¯æäº¤çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> userInfo = req.<span class="property">body</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// if (!userInfo.accounts) &#123;</span></span><br><span class="line">  <span class="comment">//   // return res.send(&#123; status: 1, message: &#x27;æ‰‹æœºå·ç ä¸èƒ½ä¸ºç©ºï¼&#x27; &#125;);</span></span><br><span class="line">  <span class="comment">//   return res.cc(&#x27;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&#x27;,1)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> code = <span class="title function_">generateCode</span>() <span class="comment">// ç”Ÿæˆ 6 ä½éšæœºéªŒè¯ç </span></span><br><span class="line">  <span class="keyword">const</span> codeExpiresAt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() + <span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>) <span class="comment">// éªŒè¯ç æœ‰æ•ˆæœŸ 5 åˆ†é’Ÿ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> codeBcrypt = bcrypt.<span class="title function_">hashSync</span>(code, <span class="number">10</span>) <span class="comment">// å¯¹éªŒè¯ç è¿›è¡ŒåŠ å¯†å¤„ç†</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç›¸åŒæ‰‹æœºå·ç çš„ç”¨æˆ·</span></span><br><span class="line">  <span class="keyword">const</span> sqlStr = <span class="string">&#x27;SELECT * FROM users WHERE accounts = ?&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> rows = <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlStr, userInfo.<span class="property">accounts</span>) <span class="comment">// å‚æ•°æ•°ç»„å¿…é¡»ä½¿ç”¨ [], åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å¯ä»¥çœç•¥</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŸ¥è¯¢è¯­å¥å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæ•°ç»„é•¿åº¦å¤§äº 0ï¼Œè¯´æ˜ç”¨æˆ·å·²å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">if</span> (rows.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœç”¨æˆ·å·²å­˜åœ¨ï¼Œæ›´æ–°éªŒè¯ç å’Œè¿‡æœŸæ—¶é—´</span></span><br><span class="line">    <span class="keyword">const</span> updateSql = <span class="string">&#x27;UPDATE users SET code = ?, code_expires_at = ? WHERE accounts = ?&#x27;</span></span><br><span class="line">    <span class="keyword">await</span> db.<span class="title function_">query</span>(updateSql, [codeBcrypt, codeExpiresAt, userInfo.<span class="property">accounts</span>])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œæ’å…¥æ–°ç”¨æˆ·è®°å½•</span></span><br><span class="line">    <span class="keyword">const</span> insertSql = <span class="string">&#x27;INSERT INTO users (accounts, code, code_expires_at) VALUES (?, ?, ?)&#x27;</span></span><br><span class="line">    <span class="keyword">await</span> db.<span class="title function_">query</span>(insertSql, [userInfo.<span class="property">accounts</span>, codeBcrypt, codeExpiresAt])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›éªŒè¯ç ï¼ˆå¼€å‘é˜¶æ®µç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸­ä¸è¦è¿”å›éªŒè¯ç ï¼‰</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="string">&#x27;éªŒè¯ç å·²ç”Ÿæˆ&#x27;</span>,</span><br><span class="line">    <span class="attr">result</span>: &#123;</span><br><span class="line">      <span class="attr">code</span>: code</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="comment">// res.status(500).send(&#123; status: 1, message: &#x27;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&#x27; &#125;);</span></span><br><span class="line">  res.<span class="title function_">cc</span>(error,<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">login</span> = <span class="keyword">async</span> (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> userInfo = req.<span class="property">body</span> <span class="comment">// è·å–ç”¨æˆ·æäº¤çš„æ•°æ®</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userInfo:&#x27;</span>, userInfo)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. éªŒè¯è¾“å…¥</span></span><br><span class="line">    <span class="keyword">if</span> (!userInfo.<span class="property">code</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&quot;éªŒè¯ç ä¸èƒ½ä¸ºç©ºï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> sqlStr = <span class="string">&quot;SELECT * FROM users WHERE accounts = ?&quot;</span></span><br><span class="line">    <span class="keyword">const</span> [results] = <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlStr, [userInfo.<span class="property">accounts</span>]) <span class="comment">// ç¡®ä¿ `db.query` è¿”å›ä¸€ä¸ª Promise</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">length</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&quot;æ²¡æœ‰æŸ¥åˆ°ç”¨æˆ·ä¿¡æ¯ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> user = results[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æ£€æŸ¥éªŒè¯ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    <span class="keyword">const</span> compareResult = bcrypt.<span class="title function_">compareSync</span>(userInfo.<span class="property">code</span>, user.<span class="property">code</span>)</span><br><span class="line">    <span class="keyword">if</span> (!compareResult) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&quot;éªŒè¯ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. æ£€æŸ¥éªŒè¯ç æ˜¯å¦è¿‡æœŸ</span></span><br><span class="line">    <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">if</span> (now &gt; user.<span class="property">code_expires_at</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&quot;éªŒè¯ç å·²è¿‡æœŸï¼Œè¯·é‡æ–°è·å–ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆ Token å­—ç¬¦ä¸²</span></span><br><span class="line">    user = &#123;...results[<span class="number">0</span>], <span class="attr">code</span>: <span class="string">&#x27;ä½ çŒœ&#x27;</span>, <span class="attr">code_expires_at</span>: <span class="string">&#x27;ä½ çŒœ&#x27;</span>, <span class="attr">head_img</span>: <span class="string">&#x27;ä½ çŒœ&#x27;</span>&#125;</span><br><span class="line">    <span class="comment">// å¯¹ä¿¡æ¯åŠ å¯†</span></span><br><span class="line">    <span class="keyword">const</span> tokenStr = jwt.<span class="title function_">sign</span>(user, config.<span class="property">jwtSecretKey</span>, &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;30d&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. ç™»å½•æˆåŠŸ</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="string">&quot;ok&quot;</span>,</span><br><span class="line">      <span class="attr">result</span>: &#123;</span><br><span class="line">        <span class="attr">errCode</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">user_info</span>: &#123;</span><br><span class="line">            <span class="attr">accounts</span>: user.<span class="property">accounts</span>,</span><br><span class="line">            <span class="attr">id</span>: user.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">user_name</span>: user.<span class="property">user_name</span>,</span><br><span class="line">            <span class="attr">sex</span>: user.<span class="property">sex</span>,</span><br><span class="line">            <span class="attr">birthday</span>: user.<span class="property">birthday</span>,</span><br><span class="line">            <span class="attr">pay_password</span>: user.<span class="property">pay_password</span>,</span><br><span class="line">            <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">            <span class="attr">work_time</span>: user.<span class="property">work_time</span>,</span><br><span class="line">            <span class="attr">head_img</span>: user.<span class="property">head_img</span>,</span><br><span class="line">            <span class="attr">idcard</span>: user.<span class="property">idcard</span>,</span><br><span class="line">            <span class="attr">account_price</span>: user.<span class="property">account_price</span>,</span><br><span class="line">            <span class="attr">is_check</span>: user.<span class="property">is_check</span>,</span><br><span class="line">            <span class="attr">it_enterprise</span>: user.<span class="property">it_enterprise</span>,</span><br><span class="line">            <span class="attr">enterprise</span>: user.<span class="property">enterprise</span>,</span><br><span class="line">            <span class="attr">manage</span>: user.<span class="property">manage</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">token</span>: <span class="string">&quot;Bearer &quot;</span> + tokenStr,</span><br><span class="line">          <span class="attr">expireTime</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>() + <span class="number">7</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> <span class="comment">// 7 å¤©åçš„æ—¶é—´æˆ³</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// æ•è·å¼‚å¸¸</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error)</span><br><span class="line">    res.<span class="title function_">cc</span>(<span class="string">&quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; regUser, login &#125;</span><br></pre></td></tr></table></figure><p>2.ç™»å½•éªŒè¯</p><p>3.é˜…è¯»åè®®</p><ol><li>é¦–å…ˆï¼Œåˆ›å»ºæ•°æ®åº“è¡¨</li></ol><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> protocols (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    title <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    content TEXT,</span><br><span class="line">    isdelete TINYINT <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    create_time DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    update_time DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    sort <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    type <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> protocols (title, content, isdelete, sort, type)</span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">(<span class="string">&#x27;ã€Šç”¨æˆ·åè®®ã€‹&#x27;</span>, <span class="string">&#x27;å°Šæ•¬çš„ç”¨æˆ·ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åœ¨æ‚¨æˆä¸ºITä¼ä¸šæœåŠ¡æ³¨å†Œç”¨æˆ·ï¼Œä½¿ç”¨ITä¼ä¸šæœåŠ¡æä¾›çš„æœåŠ¡ä¹‹å‰ï¼Œè¯·æ‚¨è®¤çœŸé˜…è¯»ITä¼ä¸šæœåŠ¡ã€Šç”¨æˆ·åè®®ã€‹ï¼ˆä»¥ä¸‹ç®€ç§°â€œåè®®â€ï¼‰ï¼Œæ›´å¥½åœ°äº†è§£æˆ‘ä»¬æ‰€æä¾›çš„æœåŠ¡ä»¥åŠæ‚¨äº«æœ‰çš„æƒåˆ©å’Œæ‰¿æ‹…çš„ä¹‰åŠ¡ã€‚æ‚¨ä¸€æ—¦å¼€å§‹ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡ï¼Œå³è¡¨ç¤ºæ‚¨å·²ç»ç¡®è®¤å¹¶æ¥å—äº†æœ¬æ–‡ä»¶ä¸­çš„å…¨éƒ¨æ¡æ¬¾ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æœ¬åè®®ç³»ç”±æ‚¨ï¼ˆä»¥ä¸‹ç®€ç§°â€œç”¨æˆ·â€æˆ–â€œæ‚¨â€ï¼‰ä¸åŒ—äº¬åŒ—äº¬é©»åœºæ— å¿§ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆä»¥ä¸‹ç®€ç§°â€œITä¼ä¸šæœåŠ¡â€æˆ–â€œæˆ‘ä»¬â€ï¼‰å°±ITä¼ä¸šæœåŠ¡å…¬å¸æä¾›çš„ITä¼ä¸šæœåŠ¡è½¯ä»¶ï¼ˆä»¥ä¸‹ç®€ç§°â€œæœ¬å¹³å°â€æˆ–â€œITä¼ä¸šæœåŠ¡â€ï¼‰æ‰€è®¢ç«‹çš„ç›¸å…³æƒåˆ©ä¹‰åŠ¡è§„èŒƒã€‚è¯·æ‚¨åœ¨æ³¨å†Œã€ä½¿ç”¨ITä¼ä¸šæœåŠ¡ä¹‹å‰ï¼Œè®¤çœŸé˜…è¯»ä»¥ä¸‹æ¡æ¬¾ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ï¼ˆæ¸©é¦¨æç¤ºï¼šä¸ºäº†æ‚¨çš„åˆæ³•æƒç›Šä¸å—æŸå®³ï¼Œå¹³å°å»ºè®®æ‚¨åœ¨ä½¿ç”¨ITä¼ä¸šæœåŠ¡æ‰¾å·¥ä½œå‰ï¼Œä»”ç»†é˜…è¯»ã€Šå®‰å…¨æ±‚èŒæŒ‡å—ã€‹ï¼Œè°¨é˜²å„ç±»æ±‚èŒé™·é˜±ã€‚ï¼‰</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¸€ã€æ³¨å†Œæ¡æ¬¾çš„æ¥å—</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¸€æ—¦æ‚¨åœ¨æ³¨å†Œé¡µé¢ç‚¹å‡»æˆ–å‹¾é€‰â€œé˜…è¯»å¹¶åŒæ„æ¥å—ç”¨æˆ·åè®®åŠéšç§æ”¿ç­–â€ç›¸å…³å†…å®¹åï¼Œå³è¡¨ç¤ºæ‚¨å·²ç»é˜…è¯»å¹¶ä¸”åŒæ„ä¸ITä¼ä¸šæœåŠ¡å…¬å¸è¾¾æˆåè®®ï¼Œæˆä¸ºITä¼ä¸šæœåŠ¡çš„ç”¨æˆ·ï¼Œå¹¶æ¥å—æœ¬åè®®ä¸­çš„å…¨éƒ¨æ³¨å†Œæ¡æ¬¾ä»¥åŠITä¼ä¸šæœåŠ¡ã€Šéšç§æ”¿ç­–ã€‹å’Œæœ¬å¹³å°å†…å…¬å¸ƒçš„å…¶ä»–ä¸“é¡¹åè®®æˆ–è§„åˆ™ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºITä¼ä¸šæœåŠ¡ã€ŠèŒä½ä¿¡æ¯å‘å¸ƒè§„åˆ™ã€‹ã€ŠITä¼ä¸šæœåŠ¡å¢å€¼æœåŠ¡åè®®ã€‹ï¼ˆä»¥ä¸‹ç®€ç§°â€œæœ¬å¹³å°è§„åˆ™â€ï¼‰çš„æ‰€æœ‰æ¡æ¬¾çš„çº¦æŸã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">äºŒã€ç”¨æˆ·æ³¨å†Œæ¡ä»¶</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”³è¯·æ³¨å†Œæˆä¸ºITä¼ä¸šæœåŠ¡çš„ç”¨æˆ·åº”åŒæ—¶æ»¡è¶³ä¸‹åˆ—å…¨éƒ¨æ¡ä»¶ï¼šåœ¨æ³¨å†Œä¹‹æ—¥ä»¥åŠæ­¤åä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡æœŸé—´å¿…é¡»ä»¥æ‹›è˜å’Œ/æˆ–æ±‚èŒä¸ºç›®çš„ï¼›åœ¨æ³¨å†Œä¹‹æ—¥å¿…é¡»å¹´æ»¡16å‘¨å²ä»¥ä¸Šã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ä¸ºäº†æ›´å¥½åœ°äº«æœ‰ITä¼ä¸šæœåŠ¡ç½‘ç»œä¿¡æ¯å‘å¸ƒå¹³å°æœåŠ¡ï¼Œç”¨æˆ·åº”éµå®ˆITä¼ä¸šæœåŠ¡æ³¨å†Œæœºåˆ¶çš„è¦æ±‚ï¼Œå‘ITä¼ä¸šæœåŠ¡æä¾›æœ¬äººçœŸå®ã€å‡†ç¡®ã€æœ€æ–°åŠå®Œæ•´çš„èµ„æ–™ï¼›å¦‚æ³¨å†Œå¹¶è®¤è¯æˆä¸ºæ‹›è˜ç”¨æˆ·ï¼Œåº”ä¿è¯åŠæ—¶æ›´æ–°æœ¬äººæä¾›çš„â€œå•ä½åç§°ã€èŒåŠ¡æˆ–å²—ä½ä¿¡æ¯ã€ä¼ä¸šé‚®ç®±â€ç­‰ç›¸å…³æˆæƒä¿¡æ¯åŠææ–™ï¼Œå¹¶ç¡®ä¿å‰è¿°æˆæƒçš„çœŸå®æ€§ï¼›ç”¨æˆ·åº”ä¿è¯å…¶èŒåŠ¡è¡Œä¸ºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå‘å¸ƒæ‹›è˜ä¿¡æ¯ã€ä¸æ±‚èŒè€…æ²Ÿé€šç­‰å‡åœ¨ä½¿ç”¨æœ¬å¹³å°æœŸé—´æŒç»­æœ‰æ•ˆï¼›é€šè¿‡è®¤è¯çš„ç”¨æˆ·åº”ä¿æŒå…¶æ‹›è˜è´¦å·ä¸å¯¹åº”çš„æˆæƒå•ä½å…·æœ‰å”¯ä¸€æ€§ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. è‹¥ç”¨æˆ·æä¾›ä»»ä½•é”™è¯¯ã€ä¸å®æˆ–ä¸å®Œæ•´çš„èµ„æ–™ï¼Œæˆ–ITä¼ä¸šæœåŠ¡æœ‰ç†ç”±æ€€ç–‘èµ„æ–™ä¸ºé”™è¯¯ã€ä¸å®æˆ–ä¸å®Œæ•´åŠè¿åç”¨æˆ·æ³¨å†Œæ¡æ¬¾çš„ï¼Œæˆ–ITä¼ä¸šæœåŠ¡æœ‰ç†ç”±æ€€ç–‘å…¶ç”¨æˆ·èµ„æ–™ã€è¨€è¡Œç­‰æœ‰æ‚–äºâ€œä¸¥è‚ƒçº¯å‡€çš„æ‹›è˜APPâ€ä¸»é¢˜æˆ–è¿åã€ŠITä¼ä¸šæœåŠ¡èŒä½ä¿¡æ¯å‘å¸ƒè§„åˆ™ã€‹çš„ï¼ŒITä¼ä¸šæœåŠ¡æœ‰æƒä¿®æ”¹ç”¨æˆ·çš„æ³¨å†Œæ˜µç§°ã€ä¸ªäººè¯´æ˜ã€å‘å¸ƒçš„ä¿¡æ¯ç­‰ï¼Œæˆ–æš‚åœæˆ–ç»ˆæ­¢è¯¥ç”¨æˆ·ä½¿ç”¨å…¶è´¦å·ï¼Œæˆ–æš‚åœæˆ–ç»ˆæ­¢æä¾›ITä¼ä¸šæœåŠ¡æä¾›çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æœåŠ¡ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. è‹¥ç”¨æˆ·æ•…æ„æä¾›è™šå‡çš„èº«ä»½ä¿¡æ¯ã€å…¬å¸ä¿¡æ¯è¿›è¡Œæ³¨å†Œï¼Œå‘å¸ƒè™šå‡æ‹›è˜ä¿¡æ¯æˆ–è€…æ±‚èŒä¿¡æ¯çš„ï¼Œè§†ä¸ºä¸¥é‡è¿åæœ¬åè®®ï¼ŒITä¼ä¸šæœåŠ¡æœ‰æƒæš‚åœæˆ–ç»ˆæ­¢è¯¥ç”¨æˆ·è´¦å·å¹¶åœæ­¢æä¾›æœåŠ¡ã€‚è™šå‡æ³¨å†Œã€å‘å¸ƒè™šå‡ä¿¡æ¯ç»™ITä¼ä¸šæœåŠ¡é€ æˆç»æµã€åèª‰ç­‰ä»»ä½•æŸå¤±çš„ï¼ŒITä¼ä¸šæœåŠ¡å°†è¿½ç©¶è¯¥ç”¨æˆ·çš„æ³•å¾‹è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¸‰ã€ç”¨æˆ·è´¦å·å®‰å…¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”¨æˆ·çš„è´¦å·é­åˆ°æœªè·æˆæƒçš„ä½¿ç”¨ï¼Œæˆ–è€…å‘ç”Ÿå…¶ä»–ä»»ä½•å®‰å…¨é—®é¢˜æ—¶ï¼Œç”¨æˆ·åº”ç«‹å³é€šçŸ¥ITä¼ä¸šæœåŠ¡ã€‚ç”±äºç”¨æˆ·ä½¿ç”¨ä¸å½“æˆ–è€…å…¶ä»–éå› ITä¼ä¸šæœåŠ¡å¯¼è‡´çš„è´¦å·ã€å¯†ç æ³„æ¼ï¼Œè¿›è€Œå¯¼è‡´å…¶èµ„æ–™ã€ä¿¡æ¯æ³„æ¼çš„ï¼Œç”±ç”¨æˆ·æ‰¿æ‹…å…¶ä¸åˆ©åæœã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ITä¼ä¸šæœåŠ¡è´¦å·çš„æ‰€æœ‰æƒå½’ITä¼ä¸šæœåŠ¡å…¬å¸æ‰€æœ‰ï¼Œç”¨æˆ·å®Œæˆè´¦å·æ³¨å†Œç¨‹åºåï¼Œè·å¾—ITä¼ä¸šæœåŠ¡è´¦å·çš„ä½¿ç”¨æƒï¼Œä¸”è¯¥ä½¿ç”¨æƒä»…å±äºè´¦å·åˆå§‹æ³¨å†Œäººã€‚åŒæ—¶ï¼Œç”¨æˆ·ä¸å¾—èµ ä¸ã€å€Ÿç”¨ã€ç§Ÿç”¨ã€è½¬è®©æˆ–å”®å–ITä¼ä¸šæœåŠ¡è´¦å·æˆ–è€…ä»¥å…¶ä»–æ–¹å¼è®¸å¯ä»–äººä½¿ç”¨ITä¼ä¸šæœåŠ¡è´¦å·ã€‚å…¶ä»–äººä¸å¾—é€šè¿‡å—èµ ã€ç»§æ‰¿ã€æ‰¿ç§Ÿã€å—è®©æˆ–è€…å…¶ä»–ä»»ä½•æ–¹å¼ä½¿ç”¨ITä¼ä¸šæœåŠ¡è´¦å·ã€‚å¦‚æœæˆ‘ä»¬å‘ç°æˆ–è€…æœ‰åˆç†ç†ç”±è®¤ä¸ºè´¦å·ä½¿ç”¨è€…å¹¶éè´¦å·åˆå§‹æ³¨å†Œäººï¼Œä¸ºä¿éšœè´¦å·å®‰å…¨ï¼Œæˆ‘ä»¬æœ‰æƒç«‹å³æš‚åœæˆ–ç»ˆæ­¢å‘è¯¥æ³¨å†Œè´¦å·æä¾›æœåŠ¡ï¼Œå¹¶æœ‰æƒæ°¸ä¹…ç¦ç”¨è¯¥è´¦å·ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. ç”¨æˆ·ä¸å¾—å°†è´¦å·ä¸»åŠ¨å‘ŠçŸ¥ç¬¬ä¸‰æ–¹æˆ–æä¾›ç»™ç¬¬ä¸‰æ–¹è¿›è¡Œä½¿ç”¨ï¼Œä¾‹å¦‚æä¾›ç»™ç¬¬ä¸‰æ–¹è¿›è¡Œä»£ä¸ºè´­ä¹°ITä¼ä¸šæœåŠ¡æœåŠ¡ç­‰ã€‚å¦‚å› æ­¤é€ æˆå…¶ä»–ç”¨æˆ·éšç§æ³„éœ²æˆ–ç»æµæŸå¤±ä»¥åŠæœ¬å¹³å°æŸå¤±çš„ï¼Œç”¨æˆ·åº”å½“æ‰¿æ‹…å…¨éƒ¨è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å››ã€æœåŠ¡è¯´æ˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. åŸºäºé£æ§ç­–ç•¥/å®‰å…¨é£é™©/äº§å“æ”¿ç­–ç­‰çš„éœ€è¦ï¼ŒITä¼ä¸šæœåŠ¡å¯èƒ½è¦æ±‚éƒ¨åˆ†ç”¨æˆ·è¡¥å……æä¾›ææ–™ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºä¼ä¸šèµ„è´¨è¯æ˜ã€æ‰¿è¯ºä¹¦ã€ä¸šåŠ¡åè®®ç­‰ï¼‰ï¼Œå…·ä½“è¦æ±‚ä¼šåœ¨ç›¸å…³é¡µé¢ä¸Šåšæ˜ç¡®å±•ç¤ºã€‚å¦‚ç”¨æˆ·æ‹’ç»æä¾›å‰è¿°ææ–™ï¼ŒITä¼ä¸šæœåŠ¡æœ‰æƒè§†æƒ…å†µæš‚åœæˆ–ç»ˆæ­¢å‘è¯¥ç”¨æˆ·æä¾›éƒ¨åˆ†æˆ–å…¨éƒ¨æœåŠ¡ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ä¸ºè½å®ã€Šç½‘ç»œæ‹›è˜æœåŠ¡ç®¡ç†è§„å®šã€‹çš„æ ¸éªŒæ›´æ–°ä¹‰åŠ¡ï¼ŒITä¼ä¸šæœåŠ¡å¯èƒ½ä¼šä¸å®šæœŸå¯¹éƒ¨åˆ†ç”¨æˆ·çš„ä¼ä¸šåœ°å€ã€æ‹›è˜æˆæƒç­‰ç›¸å…³ä¿¡æ¯è¿›è¡ŒçœŸå®æ€§å®¡æŸ¥ä»¥åŠæ›´æ–°æ ¸éªŒ(ç›®å‰ï¼Œè¯¥å®¡æ ¸æœºåˆ¶åŒ…æ‹¬â€œç¯å¢ƒè®¤è¯â€å’Œâ€œçº¿ä¸‹å®¡æ ¸â€)ã€‚å®¡æŸ¥è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·åº”é…åˆ ITä¼ä¸šæœåŠ¡å·¥ä½œäººå‘˜è¡¥å……ç›¸å…³èµ„æ–™(åŒ…æ‹¬ä½†ä¸é™äºè¥ä¸šæ‰§ç…§ã€èµ„è´¨è¯ä¹¦/ç›¸å…³ä¸šåŠ¡åè®®ã€æˆæƒä¹¦ã€è¢«æˆæƒäººèº«ä»½è¯ä¿¡æ¯ã€ç§Ÿèµåè®®/æ°´ç”µè´¹è®°å½•ç­‰)ï¼Œå¹¶å…è®¸ ITä¼ä¸šæœåŠ¡å·¥ä½œäººå‘˜å¯¹å…¶ä¼ä¸š LOGOã€åŠå…¬ç¯å¢ƒè¿›è¡Œå®¡æŸ¥åŠæ‹ç…§å¤‡æ¡ˆ(å…·ä½“è¦æ±‚è§ç½‘é¡µè¯´æ˜æˆ–â€œå°ç§˜ä¹¦â€é€šçŸ¥)ã€‚è‹¥ç”¨æˆ·æ‹’ç»ï¼ŒITä¼ä¸šæœåŠ¡å°†è§†æƒ…å†µå†³å®šæ˜¯å¦æ¢å¤è¯¥ç”¨æˆ·ä½¿ç”¨è´¦å·ï¼Œæˆ–è€…æš‚åœæˆ–ç»ˆæ­¢ä¸ºè¯¥ç”¨æˆ·æä¾›éƒ¨åˆ†æˆ–å…¨éƒ¨çš„æ‹›è˜ã€æ±‚èŒæœåŠ¡ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. å¯¹äºåˆ©ç”¨ITä¼ä¸šæœåŠ¡è¿›è¡Œéæ³•æ´»åŠ¨ï¼Œæˆ–å…¶è¨€è¡Œï¼ˆæ— è®ºçº¿ä¸Šæˆ–è€…çº¿ä¸‹çš„ï¼‰èƒŒç¦»ITä¼ä¸šæœåŠ¡ä¸¥è‚ƒæ‹›è˜ç›®çš„çš„ï¼ŒITä¼ä¸šæœåŠ¡å°†ä¸¥è‚ƒå¤„ç†ï¼ŒåŒ…æ‹¬å°†å…¶åˆ—å…¥é»‘åå•ã€å°†å…¶è¢«æŠ•è¯‰çš„æƒ…å½¢å…¬ä¹‹äºä¼—ã€åˆ é™¤ç”¨æˆ·è´¦å·ç­‰å¤„ç½šæªæ–½ï¼Œç»™ITä¼ä¸šæœåŠ¡é€ æˆç»æµæˆ–è€…åèª‰ç­‰ä»»ä½•æŸå¤±çš„ï¼ŒITä¼ä¸šæœåŠ¡å°†è¿½ç©¶å…¶æ³•å¾‹è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. ITä¼ä¸šæœåŠ¡æœ‰æƒé€šè¿‡æ‹¨æ‰“ç”µè¯ã€å‘é€çŸ­ä¿¡æˆ–ç”µå­é‚®ä»¶ç­‰æ–¹å¼ï¼Œå‘ŠçŸ¥ç”¨æˆ·ITä¼ä¸šæœåŠ¡æœåŠ¡ç›¸å…³çš„å¹¿å‘Šä¿¡æ¯ã€ä¿ƒé”€ç­‰è¥é”€ä¿¡æ¯ï¼Œä»¥åŠé‚€è¯·ç”¨æˆ·å‚ä¸ç‰ˆæœ¬æµ‹è¯•ã€ç”¨æˆ·ä½“éªŒåé¦ˆã€å›è®¿ç­‰æ´»åŠ¨ã€‚é™¤ç³»ç»Ÿé€šçŸ¥æˆ–é‡è¦ä¿¡æ¯å¤–ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ITä¼ä¸šæœåŠ¡æä¾›çš„æ–¹å¼é€‰æ‹©ä¸æ¥æ”¶ä¸Šè¿°ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5. ä¸ºæé«˜ITä¼ä¸šæœåŠ¡ç”¨æˆ·æ±‚èŒæ‹›è˜çš„æˆåŠŸç‡å’Œæ•ˆç‡ï¼ŒITä¼ä¸šæœåŠ¡å…¬å¸å¯èƒ½ä¼šå°†ITä¼ä¸šæœåŠ¡ç”¨æˆ·çš„ä¿¡æ¯å…¬å¼€å±•ç¤ºèŒƒå›´æ‰©å¤§è‡³æˆ‘ä»¬çš„ç¬¬ä¸‰æ–¹åˆä½œå¹³å°ï¼Œå› æ­¤ï¼Œæ‚¨åœ¨ä½¿ç”¨ITä¼ä¸šæœåŠ¡æ—¶ï¼Œå¯èƒ½è¿˜ä¼šæ”¶åˆ°æ¥è‡ªITä¼ä¸šæœåŠ¡åˆä½œçš„å…¶ä»–å¹³å°ä¸Šçš„æ³¨å†Œç”¨æˆ·å‘æ‚¨å¼€èŠã€è”ç³»ç”µè¯ã€è§†é¢‘é¢è¯•é‚€è¯·ç­‰ç›¸å…³ä¿¡æ¯ã€‚åœ¨æ­¤æœŸé—´ï¼Œæ‚¨å¯é€šè¿‡ITä¼ä¸šæœåŠ¡ã€Šéšç§æ”¿ç­–ã€‹äº†è§£æˆ‘ä»¬å¦‚ä½•ä¿éšœæ‚¨çš„ä¸ªäººä¿¡æ¯çš„å®‰å…¨ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">6. ç”¨æˆ·åº”é€šè¿‡æœ¬å¹³å°ä½¿ç”¨ç›¸å…³æœåŠ¡ï¼Œæœªç»è®¸å¯ï¼Œä¸å¾—é€šè¿‡å…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·æˆ–è¿è¥å¹³å°è·å–ITä¼ä¸šæœåŠ¡æœåŠ¡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºé€šè¿‡ç¬¬ä¸‰æ–¹è½¯ä»¶ç™»å½•ITä¼ä¸šæœåŠ¡è´¦å·ã€å‘å¸ƒèŒä½ã€æµè§ˆèŒä½ã€æ”¶å‘ç®€å†ç­‰ã€‚å¦‚å› ç”¨æˆ·ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶å¯¼è‡´ç›¸å…³ä¿¡æ¯æ³„æ¼çš„ï¼ŒITä¼ä¸šæœåŠ¡ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ï¼Œä¸”ç”¨æˆ·è¿˜åº”æ‰¿æ‹…ç”±æ­¤ç»™ITä¼ä¸šæœåŠ¡é€ æˆçš„æŸå¤±ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">äº”ã€æœ‰é™è´£ä»»æ¡æ¬¾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ITä¼ä¸šæœåŠ¡å…¬å¸å°†å°½åŠ›ä¸ºç”¨æˆ·æä¾›æä¾›å®‰å…¨ã€åŠæ—¶ã€å‡†ç¡®ã€é«˜è´¨é‡çš„æœåŠ¡ï¼Œä½†ä¸ä¿è¯ä¸€å®šèƒ½æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚å’ŒæœŸæœ›ï¼Œä¹Ÿä¸ä¿è¯æœåŠ¡ä¸ä¼šä¸­æ–­ï¼Œå¯¹æœåŠ¡çš„åŠæ—¶æ€§ã€å®‰å…¨æ€§ã€å‡†ç¡®æ€§éƒ½ä¸ä½œä¿è¯ã€‚é™¤éå¦æœ‰çº¦å®šï¼Œå¦åˆ™ç”¨æˆ·å› æ— æ³•ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡ï¼Œæˆ–ä½¿ç”¨æœåŠ¡æœªè¾¾åˆ°å¿ƒç†é¢„æœŸçš„ï¼ŒITä¼ä¸šæœåŠ¡ä¸æ‰¿æ‹…è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. å¯¹äºç”¨æˆ·é€šè¿‡ITä¼ä¸šæœåŠ¡å…¬å¸æä¾›çš„æœåŠ¡ä¼ é€çš„å†…å®¹ï¼ŒITä¼ä¸šæœåŠ¡ä¼šå°½åˆç†åŠªåŠ›æŒ‰ç…§å›½å®¶æœ‰å…³è§„å®šä¸¥æ ¼å®¡æŸ¥ï¼Œä½†æ— æ³•å®Œå…¨æ§åˆ¶ç»ç”±è½¯ä»¶/ç½‘ç«™æœåŠ¡ä¼ é€çš„å†…å®¹ï¼Œä¸ä¿è¯å†…å®¹çš„æ­£ç¡®æ€§ã€å®Œæ•´æ€§æˆ–å“è´¨ã€‚å› æ­¤ç”¨æˆ·åœ¨ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡æ—¶ï¼Œå¯èƒ½ä¼šæ¥è§¦åˆ°ä»¤äººä¸å¿«ã€ä¸é€‚å½“æˆ–ä»¤äººåŒæ¶çš„å†…å®¹ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒITä¼ä¸šæœåŠ¡å‡ä¸ä¸ºç”¨æˆ·ç»ç”±è½¯ä»¶/ç½‘ç«™æœåŠ¡ä»¥å¼ è´´ã€å‘é€ç”µå­é‚®ä»¶æˆ–å…¶å®ƒæ–¹å¼ä¼ é€çš„ä»»ä½•å†…å®¹è´Ÿè´£ã€‚ä½†ITä¼ä¸šæœåŠ¡æœ‰æƒä¾æ³•åœæ­¢ä¼ è¾“ä»»ä½•å‰è¿°å†…å®¹å¹¶é‡‡å–ç›¸åº”è¡ŒåŠ¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæš‚åœç”¨æˆ·ä½¿ç”¨è½¯ä»¶/ç½‘ç«™æœåŠ¡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†ï¼Œä¿å­˜æœ‰å…³è®°å½•ï¼Œå¹¶æ ¹æ®å›½å®¶æ³•å¾‹æ³•è§„ã€ç›¸å…³æ”¿ç­–åœ¨å¿…è¦æ—¶å‘æœ‰å…³æœºå…³æŠ¥å‘Šå¹¶é…åˆæœ‰å…³æœºå…³çš„è¡ŒåŠ¨ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. å¯¹äºITä¼ä¸šæœåŠ¡æä¾›çš„å„ç§ç¬¬ä¸‰æ–¹å¹¿å‘Šä¿¡æ¯ã€é“¾æ¥ã€èµ„è®¯ç­‰ï¼ˆå¦‚æœ‰ï¼‰ï¼ŒITä¼ä¸šæœåŠ¡ä¸ä¿è¯å…¶å†…å®¹çš„æ­£ç¡®æ€§ã€åˆæ³•æ€§æˆ–å¯é æ€§ï¼Œç›¸å…³è´£ä»»ç”±å¹¿å‘Šä¸»æ‰¿æ‹…ï¼›å¹¶ä¸”ï¼Œå¯¹äºç”¨æˆ·ç»ç”±ITä¼ä¸šæœåŠ¡æœåŠ¡ä¸å¹¿å‘Šä¸»è¿›è¡Œè”ç³»æˆ–å•†ä¸šå¾€æ¥ï¼Œå®Œå…¨å±äºç”¨æˆ·å’Œå¹¿å‘Šä¸»ä¹‹é—´çš„è¡Œä¸ºï¼Œä¸ITä¼ä¸šæœåŠ¡æ— å…³ã€‚å¯¹äºå‰è¿°å•†ä¸šå¾€æ¥æ‰€äº§ç”Ÿçš„ä»»ä½•æŸå®³æˆ–æŸå¤±ï¼ŒITä¼ä¸šæœåŠ¡ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. å¯¹äºç”¨æˆ·ä¸Šä¼ çš„ç…§ç‰‡ã€èµ„æ–™ã€è¯ä»¶ã€è§†é¢‘ã€å†…å®¹åŠå›¾ç‰‡ç­‰ï¼ŒITä¼ä¸šæœåŠ¡å·²é‡‡ç”¨ç›¸å…³æªæ–½å¹¶å·²å°½åˆç†åŠªåŠ›è¿›è¡Œå®¡æ ¸ï¼Œä½†ä¸ä¿è¯å…¶å†…å®¹çš„æ­£ç¡®æ€§ã€åˆæ³•æ€§æˆ–å¯é æ€§ï¼Œç›¸å…³è´£ä»»ç”±ä¸Šä¼ ä¸Šè¿°å†…å®¹çš„ç”¨æˆ·æ‰¿æ‹…ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5. ç”¨æˆ·åº”å¯¹ITä¼ä¸šæœåŠ¡ä¸Šçš„å…¶ä»–ç”¨æˆ·å‘å¸ƒçš„å†…å®¹è‡ªè¡ŒåŠ ä»¥åˆ¤æ–­ï¼Œå¹¶æ‰¿æ‹…å› ä½¿ç”¨å†…å®¹è€Œå¼•èµ·çš„æ‰€æœ‰é£é™©ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå› å¯¹å†…å®¹çš„æ­£ç¡®æ€§ã€å®Œæ•´æ€§æˆ–å®ç”¨æ€§çš„ä¾èµ–è€Œäº§ç”Ÿçš„é£é™©ã€‚ITä¼ä¸šæœåŠ¡å…¬å¸æ— æ³•ä¸”ä¸ä¼šå¯¹å› å‰è¿°é£é™©è€Œå¯¼è‡´çš„ä»»ä½•æŸå¤±æˆ–æŸå®³æ‰¿æ‹…è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">6. æ˜¯å¦ä½¿ç”¨è½¯ä»¶/ç½‘ç«™æœåŠ¡ä¸‹è½½æˆ–å–å¾—ä»»ä½•èµ„æ–™åº”ç”±ç”¨æˆ·è‡ªè¡Œè€ƒè™‘å¹¶è‡ªè´Ÿé£é™©ï¼Œå› ä»»ä½•èµ„æ–™çš„ä¸‹è½½è€Œå¯¼è‡´çš„ç”¨æˆ·ç”µè„‘ç³»ç»Ÿçš„ä»»ä½•æŸåæˆ–æ•°æ®ä¸¢å¤±ç­‰åæœï¼ŒITä¼ä¸šæœåŠ¡ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">7. å¯¹äºITä¼ä¸šæœåŠ¡å…¬å¸åœ¨çº¿ä¸Šæˆ–çº¿ä¸‹ç­–åˆ’ã€å‘èµ·ã€ç»„ç»‡æˆ–æ˜¯æ‰¿åŠçš„ä»»ä½•æ‹›è˜ç›¸å…³çš„æ´»åŠ¨ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºæ”¶å–è´¹ç”¨ä»¥åŠå®Œå…¨å…¬ç›Šçš„æ´»åŠ¨ï¼‰ï¼ŒITä¼ä¸šæœåŠ¡ä¸å¯¹ä¸Šè¿°æ‹›è˜æ•ˆæœå‘ç”¨æˆ·ä½œå‡ºä»»ä½•ä¿è¯æˆ–æ‰¿è¯ºï¼Œä¹Ÿä¸æ‹…ä¿æ´»åŠ¨æœŸé—´ç”¨æˆ·è‡ªèº«è¡Œä¸ºçš„åˆæ³•æ€§ã€åˆç†æ€§ã€‚ç”±æ­¤äº§ç”Ÿçš„ä»»ä½•å¯¹äºç”¨æˆ·ä¸ªäººæˆ–è€…ä»–äººçš„äººèº«æˆ–è€…æ˜¯åèª‰ä»¥åŠå…¶ä»–æŸå®³ï¼Œåº”ç”±è¡Œä¸ºå®æ–½ä¸»ä½“æ‰¿æ‹…è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">8. å¯¹äºç”¨æˆ·çš„æŠ•è¯‰ï¼ŒITä¼ä¸šæœåŠ¡å°†å°½åˆç†åŠªåŠ›è¿›è¡Œæ ¸å®å’Œå¤„ç†ï¼Œä½†ä¸ä¿è¯ä¸€å®šèƒ½æ»¡è¶³æŠ•è¯‰è€…çš„è¦æ±‚ã€‚ITä¼ä¸šæœåŠ¡æœ‰æƒå†³å®šæ˜¯å¦å‘å…¬ä¼—æˆ–å‘è¢«æŠ•è¯‰è€…å…¬å¼€æŠ•è¯‰å†…å®¹ã€‚å¯¹äºæŠ•è¯‰å†…å®¹ä¾µçŠ¯ç”¨æˆ·éšç§æƒã€åèª‰æƒç­‰åˆæ³•æƒç›Šçš„ï¼Œæ‰€æœ‰æ³•å¾‹è´£ä»»ç”±æŠ•è¯‰è€…æ‰¿æ‹…ï¼Œä¸ITä¼ä¸šæœåŠ¡æ— å…³ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å…­ã€ç”¨æˆ·æƒåˆ©</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     ç”¨æˆ·å¯¹äºè‡ªå·±çš„ä¸ªäººä¿¡æ¯äº«æœ‰ä»¥ä¸‹æƒåˆ©ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. éšæ—¶æŸ¥è¯¢åŠè¯·æ±‚é˜…è§ˆï¼Œä½†å› æå°‘æ•°ç‰¹æ®Šæƒ…å†µï¼ˆå¦‚è¢«ç½‘ç«™åŠ å…¥é»‘åå•ç­‰ï¼‰æ— æ³•æŸ¥è¯¢åŠæä¾›é˜…è§ˆçš„é™¤å¤–ï¼›</span></span><br><span class="line"><span class="string">1. éšæ—¶æŸ¥è¯¢åŠè¯·æ±‚é˜…è§ˆï¼Œä½†å› æå°‘æ•°ç‰¹æ®Šæƒ…å†µï¼ˆå¦‚è¢«ç½‘ç«™åŠ å…¥é»‘åå•ç­‰ï¼‰æ— æ³•æŸ¥è¯¢åŠæä¾›é˜…è§ˆçš„é™¤å¤–ï¼›</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. éšæ—¶è¯·æ±‚è¡¥å……æˆ–æ›´æ­£ï¼Œä½†å› æå°‘æ•°ç‰¹æ®Šæƒ…å†µï¼ˆå¦‚ç½‘ç«™æˆ–æœ‰å…³æœºå…³ä¸ºå¸æ³•ç¨‹åºä¿å…¨è¯æ®ç­‰ï¼‰æ— æ³•è¡¥å……æˆ–æ›´æ­£çš„é™¤å¤–ï¼›</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¸ƒã€ç”¨æˆ·åº”æ‰¿è¯ºå…¶å¹³å°ä½¿ç”¨è¡Œä¸ºéµå®ˆä»¥ä¸‹è§„å®š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. æœ¬åè®®æ‰€ç§°â€œå¹³å°ä½¿ç”¨â€æ˜¯æŒ‡ç”¨æˆ·ä½¿ç”¨æœ¬å¹³å°æœåŠ¡æ‰€è¿›è¡Œçš„ä»»ä½•è¡Œä¸ºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ³¨å†Œã€ç™»å½•ã€è®¤è¯ã€æŸ¥çœ‹å¼€èŠã€è´¦å·ç®¡ç†ã€å‘å¸ƒæ‹›è˜ä¿¡æ¯ã€é‚€çº¦é¢è¯•ä»¥åŠå…¶ä»–é€šè¿‡ITä¼ä¸šæœåŠ¡è´¦å·åœ¨æœ¬å¹³å°æ‰€è¿›è¡Œçš„ä¸€åˆ‡è¡Œä¸ºã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ITä¼ä¸šæœåŠ¡å…¬å¸æé†’ç”¨æˆ·åœ¨ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡æ—¶ï¼Œåº”éµå®ˆã€Šä¸­åäººæ°‘å…±å’Œå›½æ°‘æ³•å…¸ã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½è‘—ä½œæƒæ³•ã€‹ã€Šå…¨å›½äººæ°‘ä»£è¡¨å¤§ä¼šå¸¸åŠ¡å§”å‘˜ä¼šå…³äºç»´æŠ¤äº’è”ç½‘å®‰å…¨çš„å†³å®šã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½ä¿å®ˆå›½å®¶ç§˜å¯†æ³•ã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½ç”µä¿¡æ¡ä¾‹ã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½è®¡ç®—æœºä¿¡æ¯ç³»ç»Ÿå®‰å…¨ä¿æŠ¤æ¡ä¾‹ã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½è®¡ç®—æœºä¿¡æ¯ç½‘ç»œå›½é™…è”ç½‘ç®¡ç†æš‚è¡Œè§„å®šã€‹ã€Šè®¡ç®—æœºä¿¡æ¯ç³»ç»Ÿå›½é™…è”ç½‘ä¿å¯†ç®¡ç†è§„å®šã€‹ã€Šäº’è”ç½‘ä¿¡æ¯æœåŠ¡ç®¡ç†åŠæ³•ã€‹ã€Šè®¡ç®—æœºä¿¡æ¯ç½‘ç»œå›½é™…è”ç½‘å®‰å…¨ä¿æŠ¤ç®¡ç†åŠæ³•ã€‹ã€Šäº’è”ç½‘ç”µå­å…¬å‘ŠæœåŠ¡ç®¡ç†è§„å®šã€‹ã€Šç½‘ç»œå®‰å…¨æ³•ã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½åŠ³åŠ¨æ³•ã€‹ã€Šä¸­åäººæ°‘å…±å’Œå›½åŠ³åŠ¨åˆåŒæ³•ã€‹ã€Šç½‘ç»œä¿¡æ¯å†…å®¹ç”Ÿæ€æ²»ç†è§„å®šã€‹ç­‰ç›¸å…³ä¸­å›½æ³•å¾‹æ³•è§„çš„è§„å®šã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå¦‚æœITä¼ä¸šæœåŠ¡å…¬å¸æœ‰ç†ç”±è®¤ä¸ºç”¨æˆ·ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡è¿‡ç¨‹ä¸­çš„ä»»ä½•è¡Œä¸ºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç”¨æˆ·çš„ä»»ä½•è¨€è®ºå’Œå…¶å®ƒè¡Œä¸ºè¿åæˆ–å¯èƒ½è¿åä¸Šè¿°æ³•å¾‹å’Œæ³•è§„çš„ä»»ä½•è§„å®šï¼ŒITä¼ä¸šæœåŠ¡å…¬å¸å¯åœ¨ä»»ä½•æ—¶å€™ä¸ç»ä»»ä½•äº‹å…ˆé€šçŸ¥ç»ˆæ­¢å‘è¯¥ç”¨æˆ·æä¾›æœåŠ¡ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. ç”¨æˆ·æ‰¿è¯ºåœ¨ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœŸé—´ï¼Œéµå®ˆæ³•å¾‹æ³•è§„ã€ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ã€å›½å®¶åˆ©ç›Šã€å…¬æ°‘åˆæ³•æƒç›Šã€å…¬å…±ç§©åºã€ç¤¾ä¼šé“å¾·é£å°šå’Œä¿¡æ¯çœŸå®æ€§ç­‰ä¸ƒæ¡åº•çº¿ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5. æ‚¨ç†è§£å¹¶åŒæ„ï¼Œæœ¬å¹³å°ä»…ä¸ºç”¨æˆ·æä¾›æ‹›è˜ä¿¡æ¯åˆ†äº«ã€ä¼ æ’­åŠè·å–æ‹›è˜ã€æ±‚èŒæœºä¼šçš„å¹³å°ï¼Œæ‚¨å¿…é¡»ä¸ºè‡ªå·±çš„æ³¨å†Œã€è®¤è¯è´¦å·ä¸‹çš„ä¸€åˆ‡è¡Œä¸ºè´Ÿè´£ï¼ŒåŒ…æ‹¬æ‚¨æ‰€å‘è¡¨çš„ä»»ä½•å†…å®¹ä»¥åŠç”±æ­¤äº§ç”Ÿçš„ä»»ä½•åæœã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">6. ç”¨æˆ·ä½¿ç”¨æœ¬å¹³å°æœåŠ¡è¿›è¡Œæ‹›è˜æˆ–æ±‚èŒçš„ï¼Œè¿˜åº”éµå®ˆITä¼ä¸šæœåŠ¡ã€ŠèŒä½ä¿¡æ¯å‘å¸ƒè§„åˆ™ã€‹ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å…«ã€ç¦æ­¢ç”¨æˆ·åˆ©ç”¨ITä¼ä¸šæœåŠ¡ä»äº‹ä¸‹åˆ—è¡Œä¸º</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç¦æ­¢ç”¨æˆ·åœ¨ITä¼ä¸šæœåŠ¡å¹³å°æˆ–åˆ©ç”¨ITä¼ä¸šæœåŠ¡æä¾›çš„æœåŠ¡ï¼Œåˆ¶ä½œã€å‘é€ã€å¤åˆ¶ã€å‘å¸ƒã€ä¼ æ’­è¿åå›½å®¶ç›¸å…³æ³•å¾‹æ³•è§„ã€ä¸ƒæ¡åº•çº¿ã€ä¹ä¸å‡†ç®¡ç†è§„å®šã€æœ¬å¹³å°è§„åˆ™çš„ä¿¡æ¯ã€ä»äº‹è¿åå‰è¿°è§„å®š/è§„åˆ™çš„æ´»åŠ¨ï¼Œä¸»è¦è¡¨ç°ä¸ºï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. åå¯¹å®ªæ³•æ‰€ç¡®å®šçš„åŸºæœ¬åŸåˆ™çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. å±å®³å›½å®¶å®‰å…¨ï¼Œæ³„éœ²å›½å®¶ç§˜å¯†ï¼Œé¢ è¦†å›½å®¶æ”¿æƒï¼Œç ´åå›½å®¶ç»Ÿä¸€çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. æŸå®³å›½å®¶è£èª‰å’Œåˆ©ç›Šçš„ï¼›ç…½åŠ¨æ°‘æ—ä»‡æ¨ã€æ°‘æ—æ­§è§†ã€ç ´åæ°‘æ—å›¢ç»“çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. ç ´åå›½å®¶å®—æ•™æ”¿ç­–ï¼Œå®£æ‰¬é‚ªæ•™å’Œå°å»ºè¿·ä¿¡çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5. æ•£å¸ƒè°£è¨€ï¼Œæ‰°ä¹±ç¤¾ä¼šç§©åºï¼Œç ´åç¤¾ä¼šç¨³å®šçš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">6. æ•£å¸ƒæ·«ç§½ã€è‰²æƒ…ã€èµŒåšã€æš´åŠ›ã€å‡¶æ€ã€ææ€–æˆ–è€…æ•™å”†çŠ¯ç½ªçš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">7. ä¾®è¾±æˆ–è€…è¯½è°¤ä»–äººï¼Œä¾µå®³ä»–äººåˆæ³•æƒç›Šçš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">8. å«æœ‰è™šå‡ã€æœ‰å®³ã€èƒè¿«ã€ä¾µå®³ä»–äººéšç§ã€éªšæ‰°ã€ä¾µå®³ã€ä¸­ä¼¤ã€ç²—ä¿—ã€çŒ¥äºµã€æˆ–æœ‰æ‚–é“å¾·ã€ä»¤äººåæ„Ÿçš„å†…å®¹çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">9. å«æœ‰ä¸­å›½æ³•å¾‹ã€æ³•è§„ã€è§„ç« ã€æ¡ä¾‹ä»¥åŠä»»ä½•å…·æœ‰æ³•å¾‹æ•ˆåŠ›çš„è§„èŒƒæ‰€é™åˆ¶æˆ–ç¦æ­¢çš„å…¶ä»–å†…å®¹çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">10. ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œä»¥ä»»ä½•æ–¹å¼å±å®³æ±‚èŒè€…åˆæ³•æƒç›Šçš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">11. å†’å……ä»»ä½•äººæˆ–æœºæ„ï¼ŒåŒ…å«ä½†ä¸é™äºå†’å……ITä¼ä¸šæœåŠ¡å·¥ä½œäººå‘˜æˆ–ä»¥è™šä¼ªä¸å®çš„æ–¹å¼é™ˆè¿°æˆ–è°ç§°ä¸ä»»ä½•äººæˆ–æœºæ„æœ‰å…³çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">12. å‘å¸ƒã€ä¼ æ’­ä¾µçŠ¯ä»»ä½•äººçš„è‚–åƒæƒã€åèª‰æƒã€éšç§æƒã€ä¸“åˆ©æƒã€å•†æ ‡æƒã€è‘—ä½œæƒã€å•†ä¸šç§˜å¯†çš„ä¿¡æ¯æˆ–è¨€è®ºçš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">13. å°†ç—…æ¯’æˆ–å…¶å®ƒè®¡ç®—æœºä»£ç ã€æ¡£æ¡ˆå’Œç¨‹åºï¼ŒåŠ ä»¥ä¸Šè½½ã€å¼ è´´ã€å‘é€ç”µå­é‚®ä»¶æˆ–ä»¥å…¶å®ƒæ–¹å¼ä¼ é€çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">14. è·Ÿè¸ªæˆ–ä»¥å…¶å®ƒæ–¹å¼éªšæ‰°å…¶ä»–ç”¨æˆ·çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">15. æœªç»åˆæ³•æˆæƒè€Œæˆªè·ã€ç¯¡æ”¹ã€æ”¶é›†ã€å‚¨å­˜æˆ–åˆ é™¤ä»–äººä¸ªäººä¿¡æ¯ã€ç”µå­é‚®ä»¶æˆ–å…¶å®ƒæ•°æ®èµ„æ–™ï¼Œæˆ–å°†è·çŸ¥çš„æ­¤ç±»èµ„æ–™ç”¨äºä»»ä½•éæ³•æˆ–ä¸æ­£å½“ç›®çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">16. ä»¥ä»»ä½•æ–¹å¼å¹²æ‰°æˆ–ä¼å›¾å¹²æ‰°ITä¼ä¸šæœåŠ¡çš„ä»»ä½•äº§å“ã€ä»»ä½•éƒ¨åˆ†æˆ–åŠŸèƒ½çš„æ­£å¸¸è¿è¡Œï¼Œæˆ–è€…åˆ¶ä½œã€å‘å¸ƒã€ä¼ æ’­ä¸Šè¿°å·¥å…·ã€æ–¹æ³•ç­‰ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">17. æœªèƒ½æŒ‰ç…§æœ¬å¹³å°çš„æµç¨‹ã€è§„åˆ™è¿›è¡Œæ³¨å†Œã€è®¤è¯æˆ–ä½¿ç”¨æœ¬æœåŠ¡çš„ï¼Œè¿åæœ¬æœåŠ¡åŠŸèƒ½é™åˆ¶æˆ–è¿è¥ç­–ç•¥ï¼Œæˆ–é‡‡å–ä»»ä½•æªæ–½è§„é¿å‰è¿°æµç¨‹ã€è§„åˆ™ã€é™åˆ¶æˆ–ç­–ç•¥çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">18. æœªç»ITä¼ä¸šæœåŠ¡å…¬å¸çš„è®¸å¯ä½¿ç”¨æ’ä»¶ã€å¤–æŒ‚æˆ–é€šè¿‡å…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·ã€è¿è¥å¹³å°æˆ–ä»»ä½•æœåŠ¡æ¥å…¥æœ¬æœåŠ¡å’Œç›¸å…³ç³»ç»Ÿçš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">19. åˆ©ç”¨ITä¼ä¸šæœåŠ¡è´¦å·æˆ–æœ¬å¹³å°æœåŠ¡ä»äº‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ¬ºè¯ˆã€ä¼ é”€ã€åˆ·æµé‡ã€å¥½è¯„ã€è¿æ³•ç‰©å“è¥é”€ç­‰ä»»ä½•è¿æ³•å…¼èŒæˆ–çŠ¯ç½ªæ´»åŠ¨çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">20. ä»¿å†’ã€æ··æ·†ä»–äººè´¦å·æ˜µç§°ã€å¤´åƒã€åŠŸèƒ½ä»‹ç»æˆ–å‘å¸ƒæ‹›è˜å†…å®¹ç­‰ï¼Œæˆ–å†’å……ã€åˆ©ç”¨ä»–äººåä¹‰å¯¹å¤–æ‹›è˜çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">21. æœªç»ITä¼ä¸šæœåŠ¡å…¬å¸çš„è®¸å¯ï¼Œä»¥ä»»ä½•ç›®çš„è‡ªè¡Œæˆ–æˆæƒã€å…è®¸ã€ååŠ©ä»»ä½•ç¬¬ä¸‰äººå¯¹å¹³å°å†…çš„ä»»ä½•ä¿¡æ¯å†…å®¹è¿›è¡Œéæ³•è·å–ï¼Œç”¨äºå•†ä¸šç”¨é€”æˆ–å…¶ä»–ä»»ä½•ç›®çš„ã€‚â€œéæ³•è·å–â€æ˜¯æŒ‡é‡‡ç”¨åŒ…æ‹¬ä½†ä¸é™äºâ€œâ€(spider)ç¨‹åºã€çˆ¬è™«ç¨‹åºã€æ‹Ÿäººç¨‹åºç­‰éçœŸå®ç”¨æˆ·æˆ–é¿å¼€ã€ç ´åæŠ€æœ¯æªæ–½ç­‰éæ­£å¸¸æµè§ˆçš„æ‰‹æ®µã€æ–¹å¼ï¼Œè¯»å–ã€å¤åˆ¶ã€è½¬å­˜ã€è·å¾—æ•°æ®å’Œä¿¡æ¯å†…å®¹çš„è¡Œä¸ºã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">22. ä¸ºä»»ä½•æ³¨å†Œç”¨æˆ·æˆ–éæ³¨å†Œç”¨æˆ·æä¾›è‡ªåŠ¨ç™»å½•åˆ°æœ¬å¹³å°ã€ä»£åŠæˆ–ååŠ©ä»–äººä»£åŠèº«ä»½è®¤è¯æœåŠ¡çš„æˆ–ä»£å”®èº«ä»½è®¤è¯æ‰€éœ€çš„ç›¸å…³ææ–™æˆ–å‡­æ®ç­‰ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">23. ä»»ä½•å¯¼è‡´æˆ–å¯èƒ½å¯¼è‡´ITä¼ä¸šæœåŠ¡å…¬å¸ä¸ç¬¬ä¸‰æ–¹äº§ç”Ÿçº çº·ã€äº‰è®®æˆ–è¯‰è®¼çš„è¡Œä¸ºã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¹ã€ç‰¹åˆ«è§„å®š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”¨æˆ·å¦‚è¿åæœ¬åè®®ç¬¬å…«æ¡ï¼ŒITä¼ä¸šæœåŠ¡æœ‰æƒåœ¨ä»»ä½•æ—¶å€™ä¸ç»ä»»ä½•äº‹å…ˆé€šçŸ¥æš‚åœæˆ–ç»ˆæ­¢å‘è¯¥ç”¨æˆ·æä¾›æœåŠ¡ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ç”¨æˆ·æœ‰ä¸‹åˆ—è¡Œä¸ºæˆ–å‘å¸ƒ/æ•£å¸ƒ/ä¼ æ’­å¦‚ä¸‹ç›¸å…³ä¿¡æ¯çš„ï¼ŒITä¼ä¸šæœåŠ¡åœ¨å‘ç°æˆ–æ¥åˆ°æŠ•è¯‰åï¼Œæœ‰æƒé‡‡å–å†»ç»“è´¦å·ã€å‡çº§è®¤è¯æˆ–ä»¥å…¶ä»–æ–¹å¼æš‚åœå‘è¯¥ç”¨æˆ·æä¾›æœåŠ¡ï¼Œå¹¶è¦æ±‚ç”¨æˆ·æ‰¿æ‹…ç›¸åº”çš„æŸå®³èµ”å¿è´£ä»»ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ï¼ˆ1ï¼‰æ¶‰åŠå¹¿å‘Šï¼ˆå¯»æ±‚åˆä½œï¼‰ã€ä¼ é”€æˆ–ç›´é”€ç­‰å†…å®¹</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ2ï¼‰æ¶‰åŠè‰²æƒ…ã€æ·«ç§½å†…å®¹</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ3ï¼‰æ¶‰åŠè¿æ³•/æ”¿æ²»æ•æ„Ÿå†…å®¹</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ4ï¼‰è™šå‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä¸çœŸå®çš„å…¬å¸ä¿¡æ¯ã€è–ªèµ„ã€èº«ä»½ã€ä¸ªäººç®€å†ã€èŒä½ä¿¡æ¯ç­‰</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ5ï¼‰åˆ©ç”¨ITä¼ä¸šæœåŠ¡æä¾›çš„æœåŠ¡ç´¢å–ä»–äººéšç§</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ6ï¼‰æ¶‰åŠäººèº«æ”»å‡»æˆ–å…¶ä»–ä¾µå®³ä»–äººæƒç›Šçš„å†…å®¹</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ7ï¼‰æœªæˆå¹´äººå·¥ä½œä¿¡æ¯</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ8ï¼‰æ‹›è˜ä»–äººä»äº‹è¿æ³•æ´»åŠ¨</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ9ï¼‰ä»¥åŸ¹è®­è´¹ã€æœè£…è´¹ç­‰åä¹‰éª—å–æ±‚èŒè€…è´¢ç‰©</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ10ï¼‰éªšæ‰°å…¶ä»–ç”¨æˆ·</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ11ï¼‰ä¸ç¬¦åˆITä¼ä¸šæœåŠ¡ç›¸å…³æœåŠ¡æ€§è´¨çš„ä¿¡æ¯ï¼Œå¦‚é¸¡æ±¤ã€æ®µå­ã€æ°´è´´ç­‰</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ12ï¼‰åˆ©ç”¨æœ¬å¹³å°å¯èƒ½å­˜åœ¨çš„æ¼æ´æ¶æ„å……å€¼ç›´è±†ã€è·å–é“å…·ç­‰è™šæ‹Ÿäº§å“æˆ–æœåŠ¡</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ13ï¼‰åœ¨æœ¬å¹³å°ä»¥å¤–çš„ä»»ä½•ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºæ·˜å®ã€é—²é±¼ç­‰ï¼‰å”®å–é“å…·ç­‰è™šæ‹Ÿäº§å“æˆ–æœåŠ¡çš„è¡Œä¸º</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ14ï¼‰é€šè¿‡ç¬¬ä¸‰æ–¹å¹³å°æˆ–æ¸ é“ï¼ˆå¦‚æ·˜å®åº—é“ºç­‰ï¼‰è´­ä¹°é“å…·ç­‰è™šæ‹Ÿäº§å“æˆ–æœåŠ¡</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ15ï¼‰æ¶‰å«Œæ‹–æ¬ /æœªæŒ‰æ³•å¾‹è§„å®šæ”¯ä»˜è–ªèµ„/åŠ³åŠ¡æŠ¥é…¬çš„ï¼Œæˆ–æ¶‰å«Œå…·æœ‰å…¶ä»–å¯èƒ½æŸå®³åŠ³åŠ¨è€…æˆ–åŠ³åŠ¡äººå‘˜åˆæ³•æƒç›Šçš„ã€‚ï¼ˆæ¶‰åŠå†œæ°‘å·¥æˆ–æ¶‰ä¼—çš„å‡å±äºâ€œæƒ…èŠ‚ä¸¥é‡â€ï¼‰æœ¬å¹³å°æœ‰æƒå¯¹å‰è¿°æƒ…å½¢è¿›è¡Œå¤„ç½®ï¼Œç›¸å…³åˆ¤æ–­æ–¹å¼åŒ…æ‹¬ä½†ä¸é™äºå› ä¸Šè¿°è¡Œä¸ºè¢«åˆ—å…¥ç›¸å…³æ”¿åºœéƒ¨é—¨â€œé»‘åå•â€ã€è¢«å¤šåç”¨æˆ·ä¸¾æŠ¥æŠ•è¯‰æˆ–è¢«æ–°é—»åª’ä½“æ›å…‰ç­‰æƒ…å½¢</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ16ï¼‰ä¸¤ä½ç”¨æˆ·åä¸‹è®¤è¯çš„è´¦å·ï¼Œç»ç³»ç»Ÿåˆ¤å®šä¸ºå…³è”è´¦å·çš„ï¼Œå¦‚å…¶ä¸­ä¸€ä¸ªè´¦å·å› è¿æ³•è¿è§„è¢«å†»ç»“çš„ï¼Œå…¶ä»–å…³è”è´¦å·å‡å°†è¢«åŒæ—¶å†»ç»“ã€‚</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    ï¼ˆ17ï¼‰å…¶ä»–è¿åæ³•å¾‹æ³•è§„æˆ–å›½å®¶æ”¿ç­–ä»¥åŠæŸå®³ITä¼ä¸šæœåŠ¡åŠå…¶åˆæ³•ç”¨æˆ·ä¹‹åˆæ³•æƒç›Šçš„è¡Œä¸º</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3.       æ ¹æ®æˆ‘å›½ç°è¡Œçš„æ³•å¾‹æ³•è§„ç­‰ç›¸å…³è§„å®šï¼Œå¦‚ç”¨æˆ·å®æ–½å‰è¿°ç¬¬ï¼ˆ4ï¼‰é¡¹â€œå‘å¸ƒè™šå‡ä¿¡æ¯â€çš„ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç”¨æˆ·å‘å¸ƒçš„èŒä½ä¿¡æ¯ä¸å…¶å®é™…æ‹›è˜çš„èŒä½ä¸ç¬¦çš„ï¼Œå¦‚ç”¨æˆ·å®é™…æ‹›è˜çš„èŒä½ä¸ºâ€œä¿é™©é”€å”®ã€ä¿¡ç”¨å¡é”€å”®ã€ç†è´¢äº§å“é”€å”®ã€åœ°äº§ä¸­ä»‹æˆ–é”€å”®æˆ–åŠ³åŠ¡æ´¾é£â€ï¼Œä¸å…¶å‘å¸ƒçš„èŒä½ä¿¡æ¯åœ¨å†…å®¹ã€ç±»å‹æˆ–å…¶ä»–æ–¹é¢å¹¶éä¸€è‡´æˆ–å¯¹åº”çš„ç”šè‡³ä¸å­˜åœ¨ï¼ŒITä¼ä¸šæœåŠ¡å…¬å¸éšæ—¶æœ‰æƒæ‹’ç»å‘è¯¥ç”¨æˆ·æä¾›æœåŠ¡ï¼Œå¹¶å¯é‡‡å–å…¶ä»–å¤„ç†æªæ–½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºâ€œæ°¸ä¹…æ€§å°ç¦è´¦å·â€ã€â€œæ°¸ä¹…æ€§å°†å…¶è®¾å¤‡å·ã€æ‰‹æœºå·ç­‰ç›¸å…³ä¿¡æ¯å†»ç»“â€æˆ–â€œæ°¸ä¹…æ€§åŠ å…¥åå•â€™â€ç­‰ã€‚</span></span><br><span class="line"><span class="string">3.       æ ¹æ®æˆ‘å›½ç°è¡Œçš„æ³•å¾‹æ³•è§„ç­‰ç›¸å…³è§„å®šï¼Œå¦‚ç”¨æˆ·å®æ–½å‰è¿°ç¬¬ï¼ˆ4ï¼‰é¡¹â€œå‘å¸ƒè™šå‡ä¿¡æ¯â€çš„ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç”¨æˆ·å‘å¸ƒçš„èŒä½ä¿¡æ¯ä¸å…¶å®é™…æ‹›è˜çš„èŒä½ä¸ç¬¦çš„ï¼Œå¦‚ç”¨æˆ·å®é™…æ‹›è˜çš„èŒä½ä¸ºâ€œä¿é™©é”€å”®ã€ä¿¡ç”¨å¡é”€å”®ã€ç†è´¢äº§å“é”€å”®ã€åœ°äº§ä¸­ä»‹æˆ–é”€å”®æˆ–åŠ³åŠ¡æ´¾é£â€ï¼Œä¸å…¶å‘å¸ƒçš„èŒä½ä¿¡æ¯åœ¨å†…å®¹ã€ç±»å‹æˆ–å…¶ä»–æ–¹é¢å¹¶éä¸€è‡´æˆ–å¯¹åº”çš„ç”šè‡³ä¸å­˜åœ¨ï¼ŒITä¼ä¸šæœåŠ¡å…¬å¸éšæ—¶æœ‰æƒæ‹’ç»å‘è¯¥ç”¨æˆ·æä¾›æœåŠ¡ï¼Œå¹¶å¯é‡‡å–å…¶ä»–å¤„ç†æªæ–½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºâ€œæ°¸ä¹…æ€§å°ç¦è´¦å·â€ã€â€œæ°¸ä¹…æ€§å°†å…¶è®¾å¤‡å·ã€æ‰‹æœºå·ç­‰ç›¸å…³ä¿¡æ¯å†»ç»“â€æˆ–â€œæ°¸ä¹…æ€§åŠ å…¥åå•â€™â€ç­‰ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åã€éšç§æ”¿ç­–</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ITä¼ä¸šæœåŠ¡ä¾æ³•ä¿æŠ¤ç”¨æˆ·ä¸ªäººä¿¡æ¯å’Œéšç§ä¿¡æ¯ã€‚æœ‰å…³éšç§æ”¿ç­–çš„å†…å®¹ï¼Œè¯¦è§ITä¼ä¸šæœåŠ¡ã€Šéšç§æ”¿ç­–ã€‹ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åä¸€ã€å…³äºç”¨æˆ·åœ¨ITä¼ä¸šæœåŠ¡çš„ä¸Šä¼ æˆ–å¼ è´´çš„å†…å®¹</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”¨æˆ·åœ¨ITä¼ä¸šæœåŠ¡ä¸Šä¼ æˆ–å¼ è´´çš„å†…å®¹ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºç…§ç‰‡ã€æ–‡å­—ã€é¢è¯•ç»å†åŠå¿ƒå¾—è¯„ä»·ç­‰ï¼‰ï¼Œè§†ä¸ºç”¨æˆ·æˆäºˆITä¼ä¸šæœåŠ¡å…¬å¸åŠå…¶å…³è”å…¬å¸å…è´¹ã€éç‹¬å®¶çš„ä½¿ç”¨æƒï¼ŒITä¼ä¸šæœåŠ¡æœ‰æƒä¸ºå±•ç¤ºã€ä¼ æ’­åŠæ¨å¹¿å‰è¿°å¼ è´´å†…å®¹çš„ç›®çš„ï¼Œå¯¹ä¸Šè¿°å†…å®¹è¿›è¡Œå¤åˆ¶ã€ä¿®æ”¹ã€å‡ºç‰ˆç­‰ã€‚è¯¥ä½¿ç”¨æƒæŒç»­è‡³ç”¨æˆ·ä¹¦é¢é€šçŸ¥ITä¼ä¸šæœåŠ¡ä¸å¾—ç»§ç»­ä½¿ç”¨ï¼Œä¸”ITä¼ä¸šæœåŠ¡å®é™…æ”¶åˆ°è¯¥ç­‰ä¹¦é¢é€šçŸ¥æ—¶æ­¢ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. å› ç”¨æˆ·ä¸Šä¼ æˆ–å¼ è´´çš„å†…å®¹ä¾µçŠ¯ä»–äººæƒåˆ©ï¼Œè€Œå¯¼è‡´ä»»ä½•ç¬¬ä¸‰æ–¹å‘ITä¼ä¸šæœåŠ¡å…¬å¸æå‡ºä¾µæƒæˆ–ç´¢èµ”è¦æ±‚çš„ï¼Œç”¨æˆ·åº”æ‰¿æ‹…å…¨éƒ¨è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. ä»»ä½•ç¬¬ä¸‰æ–¹å¯¹äºç”¨æˆ·åœ¨ITä¼ä¸šæœåŠ¡çš„å…¬å¼€ä½¿ç”¨åŒºåŸŸå¼ è´´çš„å†…å®¹è¿›è¡Œå¤åˆ¶ã€ä¿®æ”¹ã€ç¼–è¾‘ã€ä¼ æ’­ç­‰è¡Œä¸ºçš„ï¼Œè¯¥è¡Œä¸ºäº§ç”Ÿçš„æ³•å¾‹åæœå’Œè´£ä»»å‡ç”±è¡Œä¸ºäººæ‰¿æ‹…ï¼Œä¸ITä¼ä¸šæœåŠ¡æ— å…³ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åäºŒã€å…³äºé¢è¯•èŠå¤©ç­‰å³æ—¶é€šè®¯æœåŠ¡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”¨æˆ·åœ¨æ¥å—ITä¼ä¸šæœåŠ¡æä¾›ä¸ITä¼ä¸šæœåŠ¡æ³¨å†Œç”¨æˆ·æˆ–ITä¼ä¸šæœåŠ¡å…³è”æ–¹ç”¨æˆ·è¿›è¡Œæåœ¨çº¿å¼€èŠã€é‚€çº¦é¢è¯•ç­‰å³æ—¶é€šè®¯æœåŠ¡æ—¶ï¼Œåº”å½“éµå®ˆæ³•å¾‹æ³•è§„ã€ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ã€å›½å®¶åˆ©ç›Šã€å…¬æ°‘åˆæ³•æƒç›Šã€å…¬å…±ç§©åºã€ç¤¾ä¼šé“å¾·é£å°šï¼Œå¹¶ä¿è¯æ‰€ä¼ è¾“çš„ä¿¡æ¯çœŸå®æ€§ç­‰ä¸ƒæ¡åº•çº¿ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ç”¨æˆ·é€šè¿‡æœ¬å¹³å°ä¸ä»–äººåœ¨çº¿å¼€èŠã€æ‹¨æ‰“ç”µè¯ä»¥åŠè§†é¢‘é¢è¯•ç­‰å•†åŠ¡åœºæ™¯ä¸‹äº§ç”Ÿçš„æ–‡å­—ã€è¯­éŸ³åŠè§†é¢‘ç­‰å½¢å¼çš„æ²Ÿé€šä¿¡æ¯ï¼ŒITä¼ä¸šæœåŠ¡å°†ä¼šæ ¹æ®æ³•å¾‹è§„å®šæš‚æ—¶å­˜å‚¨ï¼Œä¸”ä»…ç”¨äºæŠ•è¯‰ä¸¾æŠ¥çš„å¤„ç†ã€å®‰å…¨é£æ§åŠç¦»çº¿æš‚å­˜åŠŸèƒ½çš„å®ç°ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. ITä¼ä¸šæœåŠ¡å¯¹è¯¥ä¿¡æ¯çš„é‡‡é›†ã€ä¼ è¾“åŠå­˜å‚¨å‡ä¼šé‡‡å–åŠ å¯†ã€é˜²æ³„éœ²ç­‰ç›¸å…³æªæ–½ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. ä¸ºä¿æŠ¤å…¶ä»–ç”¨æˆ·éšç§ï¼Œæ‚¨ä¸å¾—ä¸‹è½½ã€ä¼ æ’­æˆ–å…¬å¼€å‘å¸ƒæœ¬æ¡è§„å®šçš„å…¶ä»–ç”¨æˆ·é€šè®¯ä¿¡æ¯ï¼Œå¦‚é¢è¯•èŠå¤©è®°å½•ç­‰ã€‚å¦‚å› æ­¤é€ æˆITä¼ä¸šæœåŠ¡æŸå¤±ï¼Œæˆ–è€…ä¾µå®³å…¶ä»–ç”¨æˆ·æƒç›Šçš„ï¼Œæ‚¨åº”å½“æ‰¿æ‹…è¿çº¦è´£ä»»æˆ–èµ”å¿è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åä¸‰ã€ä¿¡æ¯å‚¨å­˜å’Œé™åˆ¶</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ITä¼ä¸šæœåŠ¡æœ‰æƒåˆ¶å®šä¸€èˆ¬æªæ–½åŠé™åˆ¶ï¼ŒåŒ…å«ä½†ä¸é™äºè½¯ä»¶æœåŠ¡å°†ä¿ç•™çš„ç”µå­é‚®ä»¶ã€èŠå¤©ä¿¡æ¯ã€æ‰€å¼ è´´å†…å®¹æˆ–å…¶ä»–ä¸Šè½½å†…å®¹çš„æœ€é•¿æœŸé—´ã€æ¯ä¸ªè´¦å·å¯æ”¶å‘æ²Ÿé€šè®¯æ¯çš„æœ€å¤§æ•°é‡åŠå¯æ”¶å‘çš„å•ä¸ªæ¶ˆæ¯çš„å¤§å°ã€‚é€šè¿‡æœåŠ¡å­˜å‚¨æˆ–ä¼ é€ä¹‹ä»»ä½•ä¿¡æ¯ã€é€šè®¯èµ„æ–™å’Œå…¶ä»–å†…å®¹ï¼Œå¦‚è¢«åˆ é™¤æˆ–æœªäºˆå‚¨å­˜ï¼ŒITä¼ä¸šæœåŠ¡ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åå››ã€ç»“æŸæœåŠ¡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç”¨æˆ·è‹¥åå¯¹ä»»ä½•æ³¨å†Œæ¡æ¬¾çš„å†…å®¹æˆ–å¯¹ä¹‹åæ³¨å†Œæ¡æ¬¾ä¿®æ”¹æœ‰å¼‚è®®ï¼Œæˆ–å¯¹ITä¼ä¸šæœåŠ¡æœåŠ¡ä¸æ»¡ï¼Œç”¨æˆ·æœ‰ä»¥ä¸‹æƒåˆ©ï¼šä¸å†ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡ï¼›ç»“æŸç”¨æˆ·ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡çš„èµ„æ ¼ï¼›é€šçŸ¥ITä¼ä¸šæœåŠ¡åœæ­¢è¯¥ç”¨æˆ·çš„æœåŠ¡ã€‚ç»“æŸç”¨æˆ·æœåŠ¡çš„åŒæ—¶ï¼Œç”¨æˆ·ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡çš„æƒåˆ©ç«‹å³ç»ˆæ­¢ï¼ŒITä¼ä¸šæœåŠ¡ä¸å†å¯¹ç”¨æˆ·æ‰¿æ‹…ä»»ä½•ä¹‰åŠ¡ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åäº”ã€ç¦æ­¢å•†ä¸šè¡Œä¸º</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”¨æˆ·åŒæ„ä¸å¯¹ITä¼ä¸šæœåŠ¡æä¾›çš„æœåŠ¡æˆ–æœåŠ¡çš„ä»»ä½•éƒ¨åˆ†ï¼Œè¿›è¡Œå¤åˆ¶ã€æ‹·è´ã€å‡ºå”®ã€è½¬å”®æˆ–ç”¨äºä»»ä½•å…¶ä»–å•†ä¸šç›®çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ç¦æ­¢é€šè¿‡èŒä½å‘åº”è˜è€…æ”¶è´¹ï¼Œå¦‚æœ‰ä¸å®ï¼Œæˆ‘ä»¬å°†ç»“æŸç”¨æˆ·ä½¿ç”¨ITä¼ä¸šæœåŠ¡æœåŠ¡çš„èµ„æ ¼ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åå…­ã€è¿çº¦è´£ä»»</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. ç”¨æˆ·ä½¿ç”¨è™šå‡èº«ä»½ä¿¡æ¯ã€å…¬å¸ä¿¡æ¯è¿›è¡Œæ³¨å†Œï¼Œå‘å¸ƒè™šå‡æ‹›è˜ã€æ±‚èŒä¿¡æ¯ï¼Œå‘å¸ƒå«æœ‰ä¼ é”€ã€è‰²æƒ…ã€ååŠ¨ç­‰ä¸¥é‡è¿æ³•å†…å®¹ï¼Œå¯¹å¤–ä¼ æ’­é¢è¯•èŠå¤©ç­‰é€šè®¯è®°å½•ç­‰è¡Œä¸ºï¼Œè§†ä¸ºä¸¥é‡è¿åæœ¬åè®®ï¼Œåº”å½“æ‰¿æ‹…ç»™ITä¼ä¸šæœåŠ¡å…¬å¸é€ æˆçš„ç»æµæŸå¤±å’Œåèª‰æŸå¤±ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. å› ç”¨æˆ·é€šè¿‡ITä¼ä¸šæœåŠ¡æä¾›çš„æœåŠ¡æä¾›ã€å¼ è´´æˆ–ä¼ é€å†…å®¹ã€è¿åæœ¬æœåŠ¡æ¡æ¬¾ã€æˆ–ä¾µå®³ä»–äººä»»ä½•åˆæ³•æƒç›Šè€Œå¯¼è‡´ä»»ä½•ç¬¬ä¸‰äººå¯¹ITä¼ä¸šæœåŠ¡æå‡ºä»»ä½•ç´¢èµ”æˆ–è¯·æ±‚ï¼Œç”¨æˆ·åº”å½“èµ”å¿ITä¼ä¸šæœåŠ¡æˆ–å…¶ä»–åˆä½œä¼™ä¼´çš„æŸå¤±ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºèµ”å¿é‡‘é¢ã€å¾‹å¸ˆè´¹å’Œåˆç†çš„è°ƒæŸ¥è´¹ç”¨ç­‰ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. ç”¨æˆ·åœ¨æŠ•è¯‰å…¶ä»–ç”¨æˆ·æœ‰è¿æ³•è¡Œä¸ºæˆ–è¿åæœ¬æ³¨å†Œæ¡æ¬¾æƒ…å½¢æ—¶ï¼ŒæŠ•è¯‰è€…åº”æ‰¿æ‹…ä¸å®æŠ•è¯‰æ‰€äº§ç”Ÿçš„å…¨éƒ¨æ³•å¾‹è´£ä»»ã€‚å¦‚ä¾µçŠ¯ä»–äººçš„åˆæ³•æƒç›Šï¼ŒæŠ•è¯‰äººåº”ç‹¬ç«‹æ‰¿æ‹…å…¨éƒ¨æ³•å¾‹è´£ä»»ã€‚å¦‚ç»™ITä¼ä¸šæœåŠ¡é€ æˆæŸå¤±çš„ï¼ŒæŠ•è¯‰äººåº”å¯¹ITä¼ä¸šæœåŠ¡æ‰¿æ‹…ç›¸åº”çš„èµ”å¿è´£ä»»ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åä¸ƒã€æœ¬åè®®æ¡æ¬¾çš„å˜æ›´å’Œä¿®æ”¹</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ITä¼ä¸šæœåŠ¡æœ‰æƒä¾æ³•éšæ—¶å¯¹æœ¬åè®®çš„ä»»ä½•æ¡æ¬¾è¿›è¡Œå˜æ›´å’Œä¿®æ”¹ã€‚ä¸€æ—¦å‘ç”Ÿæ¡æ¬¾å˜åŠ¨ï¼Œæˆ‘ä»¬å°†åœ¨ITä¼ä¸šæœåŠ¡è½¯ä»¶å†…è¿›è¡Œæ›´æ–°åŠæç¤ºï¼Œæˆ–å°†æœ€æ–°ç‰ˆæœ¬çš„ã€Šç”¨æˆ·åè®®ã€‹ä»¥ç³»ç»Ÿæ¶ˆæ¯ã€å¼¹æ¡†æˆ–é‚®ä»¶çš„å½¢å¼å‘é€ç»™ç”¨æˆ·é˜…è¯»åŠç¡®è®¤æ¥æ”¶ã€‚ç”¨æˆ·å¦‚æœä¸åŒæ„æ¡æ¬¾çš„ä¿®æ”¹ï¼Œåº”ä¸»åŠ¨åœæ­¢ä½¿ç”¨ITä¼ä¸šæœåŠ¡æˆ–ç”³è¯·æ³¨é”€ITä¼ä¸šæœåŠ¡è´¦å·ï¼Œå¦‚æœªä½¿ç”¨çš„ä»˜è´¹æƒç›Šå°†åœ¨æ³¨é”€åæ¸…ç©ºã€‚å¦åˆ™ï¼Œå¦‚æœç”¨æˆ·ç»§ç»­ä½¿ç”¨ç”¨æˆ·è´¦å·ï¼Œåˆ™è§†ä¸ºç”¨æˆ·å·²ç»æ¥å—æœ¬åè®®å…¨éƒ¨æ¡æ¬¾çš„ä¿®æ”¹ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åå…«ã€ä¸å¯æŠ—åŠ›</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. â€œä¸å¯æŠ—åŠ›â€æ˜¯æŒ‡ITä¼ä¸šæœåŠ¡ä¸èƒ½åˆç†æ§åˆ¶ã€ä¸å¯é¢„è§æˆ–å³ä½¿é¢„è§äº¦æ— æ³•é¿å…çš„äº‹ä»¶ï¼Œè¯¥äº‹ä»¶å¦¨ç¢ã€å½±å“æˆ–å»¶è¯¯ITä¼ä¸šæœåŠ¡æ ¹æ®æœ¬æ³¨å†Œæ¡æ¬¾å±¥è¡Œå…¶å…¨éƒ¨æˆ–éƒ¨åˆ†ä¹‰åŠ¡ã€‚è¯¥äº‹ä»¶åŒ…æ‹¬ä½†ä¸é™äºæ”¿åºœè¡Œä¸ºã€è‡ªç„¶ç¾å®³ã€ã€é»‘å®¢è¢­å‡»ã€ç”µè„‘ç—…æ¯’ã€ç½‘ç»œæ•…éšœç­‰ã€‚ä¸å¯æŠ—åŠ›å¯èƒ½å¯¼è‡´ITä¼ä¸šæœåŠ¡æ— æ³•è®¿é—®ã€è®¿é—®é€Ÿåº¦ç¼“æ…¢ã€å­˜å‚¨æ•°æ®ä¸¢å¤±ã€ç”¨æˆ·ä¸ªäººä¿¡æ¯æ³„æ¼ç­‰ä¸åˆ©åæœã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. é­å—ä¸å¯æŠ—åŠ›äº‹ä»¶æ—¶ï¼ŒITä¼ä¸šæœåŠ¡å¯ä¸­æ­¢å±¥è¡Œæœ¬åè®®é¡¹ä¸‹çš„ä¹‰åŠ¡ç›´è‡³ä¸å¯æŠ—åŠ›çš„å½±å“æ¶ˆé™¤ä¸ºæ­¢ï¼Œå¹¶ä¸”ä¸å› æ­¤æ‰¿æ‹…è¿çº¦è´£ä»»ï¼›ä½†åº”å°½æœ€å¤§åŠªåŠ›å…‹æœè¯¥äº‹ä»¶ï¼Œå‡è½»å…¶è´Ÿé¢å½±å“ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åä¹ã€é€šçŸ¥</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ITä¼ä¸šæœåŠ¡å‘å…¶ç”¨æˆ·å‘å‡ºçš„é€šçŸ¥ï¼Œå°†é‡‡ç”¨ç³»ç»Ÿæ¶ˆæ¯ã€å¼¹çª—ã€ç”µå­é‚®ä»¶æˆ–é¡µé¢å…¬å‘Šç­‰å½¢å¼ã€‚æœ¬ã€Šç”¨æˆ·åè®®ã€‹çš„æ¡æ¬¾ä¿®æ”¹æˆ–å…¶ä»–äº‹é¡¹å˜æ›´æ—¶ï¼ŒITä¼ä¸šæœåŠ¡å¯ä»¥ä»¥ä¸Šè¿°å½¢å¼è¿›è¡Œé€šçŸ¥ã€‚</span></span><br><span class="line"><span class="string">&#x27;</span>, <span class="number">0</span>, <span class="number">50</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
              </div>
            </details>
<h2 id="5-å®šä¹‰ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶-res-cc"><a href="#5-å®šä¹‰ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶-res-cc" class="headerlink" title="5.å®šä¹‰ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶ res.cc"></a>5.å®šä¹‰ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶ res.cc</h2><details class="folding-tag" ><summary> å®šä¹‰ res.cc ç”¨äºç®€åŒ–é”™è¯¯çš„å“åº”é€»è¾‘ ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <p>é¦–å…ˆåœ¨ app.js ä¸­å®šä¹‰ res.cc è¿™ä¸ªä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">cc</span> = <span class="function">(<span class="params">err, status = <span class="number">1</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// status é»˜è®¤å€¼ä¸º 1ï¼Œè¡¨ç¤ºå¤±è´¥çš„æƒ…å†µ</span></span><br><span class="line">    <span class="comment">// err å¯èƒ½æ˜¯ä¸€ä¸ª Error å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ—¶ä¸€ä¸ªæè¿°é”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      status,</span><br><span class="line">      <span class="attr">message</span>: err <span class="keyword">instanceof</span> <span class="title class_">Error</span> ? err.<span class="property">message</span> : err</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨ å¤„ç†å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨</p>  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">regUser</span> = <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯æäº¤çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> userInfo = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!userInfo.<span class="property">accounts</span>) &#123;</span><br><span class="line">      <span class="comment">// return res.send(&#123; status: 1, message: &#x27;æ‰‹æœºå·ç ä¸èƒ½ä¸ºç©ºï¼&#x27; &#125;);</span></span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> code = <span class="title function_">generateCode</span>(); <span class="comment">// ç”Ÿæˆ 6 ä½éšæœºéªŒè¯ç </span></span><br><span class="line">    <span class="keyword">const</span> codeExpiresAt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() + <span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>); <span class="comment">// éªŒè¯ç æœ‰æ•ˆæœŸ 5 åˆ†é’Ÿ</span></span><br><span class="line"></span><br><span class="line">    codeBcrypt = bcrypt.<span class="title function_">hashSync</span>(code, <span class="number">10</span>); <span class="comment">// å¯¹éªŒè¯ç è¿›è¡ŒåŠ å¯†å¤„ç†</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç›¸åŒæ‰‹æœºå·ç çš„ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">const</span> sqlStr = <span class="string">&#x27;SELECT * FROM users WHERE accounts = ?&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> rows = <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlStr, userInfo.<span class="property">accounts</span>); <span class="comment">// å‚æ•°æ•°ç»„å¿…é¡»ä½¿ç”¨ [], åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å¯ä»¥çœç•¥</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢è¯­å¥å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæ•°ç»„é•¿åº¦å¤§äº 0ï¼Œè¯´æ˜ç”¨æˆ·å·²å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (rows.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœç”¨æˆ·å·²å­˜åœ¨ï¼Œæ›´æ–°éªŒè¯ç å’Œè¿‡æœŸæ—¶é—´</span></span><br><span class="line">      <span class="keyword">const</span> updateSql = <span class="string">&#x27;UPDATE users SET code = ?, code_expires_at = ? WHERE accounts = ?&#x27;</span>;</span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">query</span>(updateSql, [codeBcrypt, codeExpiresAt, userInfo.<span class="property">accounts</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œæ’å…¥æ–°ç”¨æˆ·è®°å½•</span></span><br><span class="line">      <span class="keyword">const</span> insertSql = <span class="string">&#x27;INSERT INTO users (accounts, code, code_expires_at) VALUES (?, ?, ?)&#x27;</span>;</span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">query</span>(insertSql, [userInfo.<span class="property">accounts</span>, codeBcrypt, codeExpiresAt]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›éªŒè¯ç ï¼ˆå¼€å‘é˜¶æ®µç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸­ä¸è¦è¿”å›éªŒè¯ç ï¼‰</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="string">&#x27;éªŒè¯ç å·²ç”Ÿæˆ&#x27;</span>,</span><br><span class="line">      <span class="attr">result</span>: &#123;</span><br><span class="line">        <span class="attr">code</span>: code,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    res.<span class="title function_">cc</span>(error,<span class="number">500</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</strong></p><p>ä»£ç å·²ç»ä½¿ç”¨äº†ç°ä»£çš„ <code>async/await</code> é£æ ¼ï¼Œé¿å…äº†ä¼ ç»Ÿçš„å›è°ƒå‡½æ•°ã€‚ä¼ ç»Ÿå›è°ƒå‡½æ•°çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, params, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¤„ç†æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è€Œåœ¨ä½¿ç”¨ <code>Promise</code> å’Œ <code>async/await</code> æ—¶ï¼Œå†™æ³•å˜æˆè¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [rows] = <span class="keyword">await</span> db.<span class="title function_">query</span>(sql, params); <span class="comment">// `rows` æ˜¯æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(rows);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  res.<span class="title function_">cc</span>(error,<span class="number">500</span>) <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›è°ƒå‡½æ•°çš„æœ¬è´¨å·²ç»ç”± <code>Promise</code> æ›¿ä»£</p><ul><li>åœ¨ä½ çš„ä»£ç ä¸­ï¼Œ<code>db.query()</code> æ˜¯ä¸€ä¸ª <code>Promise</code>ï¼Œé€šè¿‡ <code>await</code> è·å–å®ƒçš„ç»“æœã€‚</li><li>æ•°æ®åº“æ“ä½œå®Œæˆåï¼Œè¿”å›çš„ç»“æœï¼ˆæˆ–è€…é”™è¯¯ï¼‰ä¼šè‡ªåŠ¨ä¼ é€’ç»™ <code>await</code> æˆ– <code>catch</code>ï¼Œä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å›è°ƒå‡½æ•°ã€‚</li></ul><p>æ“ä½œæ•°æ®åº“åçš„å›è°ƒå‡½æ•°å·²ç»è¢«éšå¼åœ°æ›¿ä»£ä¸º <code>Promise</code> çš„ <code>resolve</code> å’Œ <code>reject</code> æ–¹æ³•ï¼š</p><ul><li>å¦‚æœæŸ¥è¯¢æˆåŠŸï¼Œ<code>Promise</code> çš„ç»“æœä¼šè¢«èµ‹å€¼ç»™ <code>rows</code>ã€‚</li><li>å¦‚æœæŸ¥è¯¢å¤±è´¥ï¼Œé”™è¯¯ä¼šè¢«æŠ›å‡ºï¼Œè¿›å…¥ <code>catch</code> å—ã€‚</li></ul><p>æ€»ç»“</p><p>åœ¨ç°ä»£ JavaScript ä¸­ï¼Œæ¨èä½¿ç”¨ <code>Promise</code> å’Œ <code>async/await</code> è¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œå› ä¸ºå®ƒæ¯”ä¼ ç»Ÿçš„å›è°ƒå‡½æ•°å†™æ³•æ›´ç®€æ´ã€æ›´æ˜“è¯»ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨çš„æ˜¯ <code>mysql2/promise</code> æ¨¡å—ï¼Œä½ çš„ä»£ç ä¸­ä¸éœ€è¦æ˜¾å¼å®šä¹‰å›è°ƒå‡½æ•°ã€‚</p><p>å…¶å®ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œ<strong>ä»¥ä¸Šä»£ç ä¸æ˜¯ä¸€ä¸ªé”™è¯¯å¤„ç†ä¸­é—´ä»¶</strong>ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>å“åº”è¾…åŠ©ä¸­é—´ä»¶</strong>ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸º <code>res</code> å¯¹è±¡æ·»åŠ ä¸€ä¸ª <code>res.cc</code> æ–¹æ³•ï¼Œç”¨äºç»Ÿä¸€å¤„ç†æˆåŠŸæˆ–å¤±è´¥çš„å“åº”æ¶ˆæ¯ã€‚</p><p><strong>ä¸ºä»€ä¹ˆä¸æ˜¯é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼Ÿ</strong></p><ol><li><p><strong>é”™è¯¯å¤„ç†ä¸­é—´ä»¶çš„å®šä¹‰</strong><br>é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ˜¯ä¸“é—¨ç”¨äºæ•è·å’Œå¤„ç†è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯çš„ï¼Œå®ƒçš„å‡½æ•°ç­¾åå’Œæ™®é€šä¸­é—´ä»¶ä¸åŒï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™æ‰æ˜¯é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>é”™è¯¯å¤„ç†ä¸­é—´ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ <code>err</code>ï¼Œè¿™ä¸ªå‚æ•°ç”± <code>next(error)</code> ä¼ é€’è¿‡æ¥ï¼ŒExpress ä¼šè‡ªåŠ¨å°†é”™è¯¯ä¼ é€’ç»™è¿™æ ·çš„ä¸­é—´ä»¶ã€‚</p><p><strong>åå­—ä¸å¼ºåˆ¶ä¸€è‡´</strong>ï¼š<br><code>err</code> æ˜¯é”™è¯¯å¤„ç†ä¸­é—´ä»¶ä¸­å¸¸è§çš„çº¦å®šï¼Œä½†ä½ å¯ä»¥è‡ªç”±å‘½åå®ƒã€‚</p></li><li><p><strong>è¯¥ä¸­é—´ä»¶ä¸æ¥æ”¶ err å‚æ•°</strong><br>ä¸Šé¢å®šä¹‰çš„ <code>res.cc</code> æ˜¯ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œç”¨äºæ ¼å¼åŒ–å“åº”å†…å®¹ï¼Œå®ƒå¹¶æ²¡æœ‰å¤„ç†é€šè¿‡ <code>next(error)</code> æŠ›å‡ºçš„é”™è¯¯ã€‚å› æ­¤ï¼Œ<strong>è¿™ä¸èƒ½ç®—ä½œä¸€ä¸ªé”™è¯¯å¤„ç†ä¸­é—´ä»¶</strong>ã€‚</p></li></ol><hr><p><strong>è¿™ä¸ªä¸­é—´ä»¶çš„ä½œç”¨</strong></p><ol><li><strong>ä¸º res å¯¹è±¡æ·»åŠ ä¸€ä¸ªç»Ÿä¸€çš„å“åº”æ–¹æ³• (res.cc)</strong><ul><li>æˆåŠŸçš„å“åº”ï¼š<code>res.cc(&#39;æ“ä½œæˆåŠŸ&#39;, 0)</code></li><li>å¤±è´¥çš„å“åº”ï¼š<code>res.cc(&#39;æ“ä½œå¤±è´¥&#39;)</code> æˆ– <code>res.cc(new Error(&#39;é”™è¯¯ä¿¡æ¯&#39;))</code></li></ul></li><li><strong>ç®€åŒ–äº†ä»£ç ä¹¦å†™</strong><br>ä½ å¯ä»¥é€šè¿‡ <code>res.cc</code> å¿«é€Ÿå‘é€ JSON æ ¼å¼çš„å“åº”ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡æ‰‹åŠ¨å†™ <code>res.send({ status, message })</code>ã€‚</li></ol>
              </div>
            </details>
<h2 id="6-å…¨å±€é”™è¯¯ä¸­é—´ä»¶"><a href="#6-å…¨å±€é”™è¯¯ä¸­é—´ä»¶" class="headerlink" title="6.å…¨å±€é”™è¯¯ä¸­é—´ä»¶"></a>6.å…¨å±€é”™è¯¯ä¸­é—´ä»¶</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <p>app.js ä¸­ï¼Œå®šä¹‰å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">cc</span> = <span class="function">(<span class="params">err, status = <span class="number">1</span></span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      status,</span><br><span class="line">      <span class="attr">message</span>: err <span class="keyword">instanceof</span> <span class="title class_">Error</span> ? err.<span class="property">message</span> : err,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ•è·åˆ°é”™è¯¯:&#x27;</span>, err); <span class="comment">// æ‰“å°é”™è¯¯æ—¥å¿—</span></span><br><span class="line">  res.<span class="title function_">cc</span>(err, <span class="number">500</span>); <span class="comment">// ä½¿ç”¨ res.cc ç»Ÿä¸€è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¤„ç†å‡½æ•°æœ«å°¾ï¼Œcatch(error)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">regUser</span> = <span class="title function_">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å®¢æˆ·ç«¯æäº¤çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> userInfo = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!userInfo.<span class="property">accounts</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&#x27;</span>, <span class="number">1</span>); <span class="comment">// ä½¿ç”¨ res.cc è¿”å›é”™è¯¯</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿç”ŸæˆéªŒè¯ç çš„é€»è¾‘</span></span><br><span class="line">    <span class="keyword">const</span> code = <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> codeExpiresAt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() + <span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>); <span class="comment">// éªŒè¯ç  5 åˆ†é’Ÿæœ‰æ•ˆæœŸ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œ</span></span><br><span class="line">    <span class="keyword">const</span> sqlStr = <span class="string">&#x27;SELECT * FROM users WHERE accounts = ?&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> rows = <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlStr, [userInfo.<span class="property">accounts</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rows.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> updateSql = <span class="string">&#x27;UPDATE users SET code = ?, code_expires_at = ? WHERE accounts = ?&#x27;</span>;</span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">query</span>(updateSql, [code, codeExpiresAt, userInfo.<span class="property">accounts</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> insertSql = <span class="string">&#x27;INSERT INTO users (accounts, code, code_expires_at) VALUES (?, ?, ?)&#x27;</span>;</span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">query</span>(insertSql, [userInfo.<span class="property">accounts</span>, code, codeExpiresAt]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆåŠŸè¿”å›å“åº”</span></span><br><span class="line">    res.<span class="title function_">cc</span>(<span class="string">&#x27;éªŒè¯ç å·²å‘é€&#x27;</span>, <span class="number">0</span>); <span class="comment">// 0 è¡¨ç¤ºæˆåŠŸçŠ¶æ€</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error); <span class="comment">// æŠŠé”™è¯¯äº¤ç»™å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶å¤„ç†</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä»€ä¹ˆæ—¶å€™ç”¨ res.ccï¼Ÿ</strong></p><ul><li><p><strong>ç”¨äºè½»é‡çº§çš„é”™è¯¯å“åº”ï¼š</strong><br>å¦‚æœæŸäº›é”™è¯¯é€»è¾‘ä¸éœ€è¦ä¼ é€’åˆ°å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼ˆä¾‹å¦‚ç®€å•çš„ä¸šåŠ¡æ ¡éªŒå¤±è´¥ï¼‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>res.cc</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (!userInfo.accounts) &#123;</span><br><span class="line">  return res.cc(&#x27;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&#x27;, 1); // ä¸ä¼ é€’åˆ°é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç”¨äºä¸å¯æ¢å¤çš„é”™è¯¯ï¼š</strong><br>å¦‚æœé”™è¯¯æ˜¯ä¸å¯æ¢å¤çš„ã€éœ€è¦å…¨å±€å¤„ç†çš„ï¼Œåº”è¯¥ä½¿ç”¨ <code>next(error)</code>ï¼Œè®©å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶å¤„ç†ã€‚</p></li><li><p>ä¸å¯æ¢å¤çš„é”™è¯¯ï¼ˆ<strong>irrecoverable errors</strong>ï¼‰æ˜¯æŒ‡é‚£äº›åœ¨å‘ç”Ÿæ—¶æ— æ³•é€šè¿‡å¸¸è§„çš„é”™è¯¯å¤„ç†æˆ–é‡è¯•æœºåˆ¶æ¥æ¢å¤çš„é”™è¯¯ã€‚è¿™äº›é”™è¯¯é€šå¸¸æ„å‘³ç€åº”ç”¨ç¨‹åºçš„æŸäº›å…³é”®éƒ¨åˆ†å·²ç»å´©æºƒæˆ–æ— æ³•ç»§ç»­è¿è¡Œï¼Œå› æ­¤ç¨‹åºéœ€è¦åœæ­¢æ‰§è¡Œå¹¶è¿”å›ç»™ç”¨æˆ·é€‚å½“çš„é”™è¯¯ä¿¡æ¯ã€‚å¸¸è§çš„ä¸å¯æ¢å¤é”™è¯¯å¯èƒ½æ¶‰åŠç³»ç»Ÿçº§åˆ«çš„é—®é¢˜ã€ç¨‹åºçš„é€»è¾‘é”™è¯¯æˆ–æ— æ³•å¤„ç†çš„å¤–éƒ¨èµ„æºæ•…éšœã€‚</p></li></ul><p><strong>æ€»ç»“</strong></p><ol><li><strong>res.cc æ˜¯å“åº”è¾…åŠ©ä¸­é—´ä»¶ï¼Œè€Œéé”™è¯¯å¤„ç†ä¸­é—´ä»¶</strong>ã€‚å®ƒç”¨äºç®€åŒ–æˆåŠŸæˆ–å¤±è´¥çš„å“åº”é€»è¾‘ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼ã€‚</li><li><strong>é”™è¯¯å¤„ç†ä¸­é—´ä»¶éœ€è¦æ˜¾å¼æ¥æ”¶ err å‚æ•°</strong>ã€‚å¦‚æœåœ¨ä¸šåŠ¡é€»è¾‘ä¸­è°ƒç”¨ <code>next(error)</code>ï¼ŒExpress ä¼šè‡ªåŠ¨å°†é”™è¯¯ä¼ é€’ç»™ç¬¬ä¸€ä¸ªé”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚</li><li><strong>ä¸¤è€…ç»“åˆ</strong>ï¼š<code>res.cc</code> å’Œå…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ­é…ä½¿ç”¨ï¼Œå¯ä»¥è®©ä»£ç æ—¢ç®€æ´åˆç»“æ„æ¸…æ™°ï¼Œæ¨èè¿™æ ·åšã€‚</li></ol>
              </div>
            </details>
<h2 id="7-ä¸ºé¡¹ç›®é…ç½®-eslint"><a href="#7-ä¸ºé¡¹ç›®é…ç½®-eslint" class="headerlink" title="7. ä¸ºé¡¹ç›®é…ç½® eslint"></a>7. ä¸ºé¡¹ç›®é…ç½® eslint</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>å®‰è£… &amp; åˆå§‹åŒ–</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pnpm npm install eslint</span><br><span class="line"></span><br><span class="line">npx eslint --init</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¾‘<code>eslint.config.js</code>è§„åˆ™</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> globals <span class="keyword">from</span> <span class="string">&quot;globals&quot;</span></span><br><span class="line"><span class="keyword">import</span> pluginJs <span class="keyword">from</span> <span class="string">&quot;@eslint/js&quot;</span></span><br><span class="line"></span><br><span class="line"># rules å¤–å±‚éœ€è¦åŒ…ä¸€å±‚å¯¹è±¡</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;eslint&#x27;).Linter.Config[]</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;<span class="attr">files</span>: [<span class="string">&quot;**/*.js&quot;</span>], <span class="attr">languageOptions</span>: &#123;<span class="attr">sourceType</span>: <span class="string">&quot;commonjs&quot;</span>&#125;&#125;,</span><br><span class="line">  &#123;<span class="attr">languageOptions</span>: &#123; <span class="attr">globals</span>: globals.<span class="property">browser</span> &#125;&#125;,</span><br><span class="line">  &#123;<span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;semi&quot;</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">  &#125;&#125;,</span><br><span class="line">  pluginJs.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  </span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>è¯¦ç»†è¯´æ˜ es6 å’Œ commonjs ä¸¤ä¸ªæ ‡å‡†</p><p><code>module.exports = router</code> å’Œ <code>export default router</code> çš„åŒºåˆ«ä¸»è¦åœ¨äºä¸¤è€…æ‰€å±çš„æ¨¡å—ç³»ç»Ÿå’Œä½¿ç”¨æ–¹å¼ã€‚å®ƒä»¬åˆ†åˆ«å±äº <strong>CommonJS</strong> å’Œ <strong>ES6 æ¨¡å—</strong> ä¸¤ç§æ¨¡å—è§„èŒƒã€‚</p><hr><p> <strong>1. CommonJS å’Œ ES6 æ¨¡å—ç®€ä»‹</strong></p><ul><li><strong>CommonJS</strong> æ˜¯ Node.js é»˜è®¤çš„æ¨¡å—è§„èŒƒï¼Œä½¿ç”¨ <code>require</code> å’Œ <code>module.exports</code>ã€‚</li><li><strong>ES6 æ¨¡å—</strong> æ˜¯ JavaScript çš„ç°ä»£æ¨¡å—ç³»ç»Ÿï¼Œä½¿ç”¨ <code>import</code> å’Œ <code>export</code>ã€‚</li></ul><hr><p> <strong>2. åŒºåˆ«åˆ†æ</strong></p><p><strong>è¯­æ³•å±‚é¢çš„åŒºåˆ«</strong></p><ol><li><p><strong>CommonJS (module.exports)</strong></p><ul><li>ä½¿ç”¨ <code>module.exports</code> å¯¼å‡ºã€‚</li><li>ä½¿ç”¨ <code>require</code> å¯¼å…¥ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºæ–‡ä»¶ï¼ˆCommonJSï¼‰</span></span><br><span class="line"><span class="keyword">const</span> router = &#123;&#125;; <span class="comment">// å‡è®¾ router æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./path/to/router&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ol></li></ol><ol><li><p><strong>ES6 æ¨¡å— (export default)</strong></p><ul><li>ä½¿ç”¨ <code>export default</code> å¯¼å‡ºã€‚</li><li>ä½¿ç”¨ <code>import</code> å¯¼å…¥ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºæ–‡ä»¶ï¼ˆES6 æ¨¡å—ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> router = &#123;&#125;; <span class="comment">// å‡è®¾ router æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./path/to/router&#x27;</span>;</span><br></pre></td></tr></table></figure></li></ol><hr><p><strong>è¿è¡Œæ—¶çš„åŒºåˆ«</strong></p><ol><li><strong>CommonJS</strong><ul><li>æ¨¡å—åœ¨è¿è¡Œæ—¶åŠ è½½ï¼Œæ˜¯åŒæ­¥çš„ã€‚</li><li><code>module.exports</code> å¯ä»¥å¯¼å‡ºä»»ä½•ç±»å‹çš„å€¼ï¼ˆå¯¹è±¡ã€å‡½æ•°ã€æ•°ç»„ã€åŸºæœ¬ç±»å‹ç­‰ï¼‰ã€‚</li><li>å¯¼å…¥æ—¶ï¼Œå¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„å¼•ç”¨ã€‚</li></ul></li><li><strong>ES6 æ¨¡å—</strong><ul><li>æ¨¡å—åœ¨ç¼–è¯‘æ—¶è§£æï¼Œæ˜¯é™æ€çš„ã€‚</li><li><code>export default</code> æ˜¯ ES6 ä¸­é»˜è®¤å¯¼å‡ºæ–¹å¼ï¼Œé€‚ç”¨äºä¸€ä¸ªæ¨¡å—å¯¼å‡ºä¸€ä¸ªä¸»è¦åŠŸèƒ½ã€‚</li><li>å¯¼å…¥æ—¶ï¼Œæ”¯æŒ <code>import</code> è§£æ„è¯­æ³•ã€‚</li><li>ES6 æ¨¡å—æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè¯­æ³•æ›´ç°ä»£ã€‚</li></ul></li></ol><hr><p><strong>é¡¹ç›®ä¸­çš„åŒºåˆ«</strong></p><ol><li><p><strong>å…¼å®¹æ€§</strong></p><ul><li><strong>Node.js ç¯å¢ƒ</strong>ï¼šNode.js é»˜è®¤æ”¯æŒ CommonJS æ¨¡å—ã€‚å¦‚æœè¦ä½¿ç”¨ ES6 æ¨¡å—ï¼Œéœ€è¦å°† <code>package.json</code> çš„ <code>type</code> è®¾ç½®ä¸º <code>&quot;module&quot;</code>ï¼Œæˆ–è€…ä½¿ç”¨ <code>.mjs</code> æ–‡ä»¶æ‰©å±•åã€‚</li><li><strong>å‰ç«¯ç¯å¢ƒ</strong>ï¼šç°ä»£å‰ç«¯å·¥å…·ï¼ˆå¦‚ Webpackã€Viteï¼‰å¯¹ ES6 æ¨¡å—æœ‰æ›´å¥½çš„æ”¯æŒã€‚</li></ul></li><li><p><strong>å¯¼å‡ºå¤šé¡¹åŠŸèƒ½</strong></p><ul><li><p>CommonJS ä½¿ç”¨exportsï¼Œå¯ä»¥å¯¼å‡ºå¤šä¸ªæˆå‘˜ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">func1</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">func2</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure></li><li><p>ES6 æ¨¡å—æ”¯æŒå‘½åå¯¼å‡ºå’Œé»˜è®¤å¯¼å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">func1</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">func2</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure></li></ul></li></ol><ol><li><p><strong>ä½¿ç”¨ä¹ æƒ¯</strong></p><ul><li>CommonJS æ›´å¸¸ç”¨äºåç«¯ï¼ˆNode.js é¡¹ç›®ï¼‰ã€‚</li><li>ES6 æ¨¡å—æ˜¯ç°ä»£ JavaScript æ ‡å‡†ï¼Œå‰ç«¯é¡¹ç›®å’Œæ”¯æŒç°ä»£è¯­æ³•çš„åç«¯é¡¹ç›®æ›´å€¾å‘äºä½¿ç”¨ã€‚</li></ul></li></ol><hr><p>   <strong>æ··ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹</strong></p><ol><li><p>å¦‚æœä¸€ä¸ªæ¨¡å—ä½¿ç”¨ <code>module.exports</code> å¯¼å‡ºï¼Œå¯¼å…¥æ—¶ä¸èƒ½ç›´æ¥ç”¨ <code>import</code>ï¼Œéœ€è¦å€ŸåŠ© <code>createRequire</code> æˆ–å…¶ä»–å·¥å…·ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRequire &#125; <span class="keyword">from</span> <span class="string">&#x27;module&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">require</span> = <span class="title function_">createRequire</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>);</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./path/to/router&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>å¦‚æœä¸€ä¸ªæ¨¡å—ä½¿ç”¨ <code>export default</code> å¯¼å‡ºï¼Œ<code>require</code> å¯¼å…¥æ—¶ä¼šè¢«åŒ…è£…åœ¨ <code>default</code> å±æ€§ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºæ–‡ä»¶ï¼ˆES6 æ¨¡å—ï¼‰</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CommonJS å¯¼å…¥</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./path/to/router&#x27;</span>).<span class="property">default</span>;</span><br></pre></td></tr></table></figure></li></ol><hr><p>   <strong>æ€»ç»“</strong></p><div class="table-container"><table><thead><tr><th>ç‰¹æ€§</th><th><code>module.exports</code> (CommonJS)</th><th><code>export default</code> (ES6 æ¨¡å—)</th></tr></thead><tbody><tr><td>æ¨¡å—è§„èŒƒ</td><td>CommonJS</td><td>ES6 æ¨¡å—</td></tr><tr><td>ä½¿ç”¨çš„å¯¼å…¥æ–¹å¼</td><td><code>require()</code></td><td><code>import</code></td></tr><tr><td>æ”¯æŒç¯å¢ƒ</td><td>Node.js é»˜è®¤æ”¯æŒ</td><td>éœ€è®¾ç½® <code>&quot;type&quot;: &quot;module&quot;</code> æˆ– <code>.mjs</code> æ–‡ä»¶</td></tr><tr><td>å¯¼å…¥æ–¹å¼</td><td>ç›´æ¥å¯¼å…¥å€¼</td><td>é»˜è®¤å¯¼å‡ºç›´æ¥å¯¼å…¥ï¼Œæ”¯æŒè§£æ„</td></tr><tr><td>è¿è¡Œæ—¶æˆ–ç¼–è¯‘æ—¶</td><td>è¿è¡Œæ—¶åŠ è½½ï¼ˆåŒæ­¥ï¼‰</td><td>ç¼–è¯‘æ—¶è§£æï¼ˆé™æ€ï¼‰</td></tr><tr><td>çµæ´»æ€§</td><td>å¯å¯¼å‡ºå•ä¸ªæˆ–å¤šä¸ªå¯¹è±¡</td><td>é»˜è®¤å¯¼å‡ºä¸€ä¸ªä¸»è¦å†…å®¹ï¼Œå¯åŒæ—¶å‘½åå¯¼å‡ºå¤šä¸ª</td></tr></tbody></table></div><p>å¦‚æœä½ åœ¨ä½¿ç”¨ç°ä»£å·¥å…·é“¾æˆ–æ„å»ºå‰ç«¯åº”ç”¨ï¼Œ<strong>ä¼˜å…ˆä½¿ç”¨ ES6 æ¨¡å—</strong>ï¼›è€Œåœ¨ä¼ ç»Ÿ Node.js é¡¹ç›®ä¸­ï¼Œ<strong>CommonJS æ›´åŠ ç›´æ¥å’Œå…¼å®¹æ€§å¥½</strong>ã€‚</p>
              </div>
            </details>
<h2 id="8-è¡¨å•éªŒè¯-escook-express-joi"><a href="#8-è¡¨å•éªŒè¯-escook-express-joi" class="headerlink" title="8.  è¡¨å•éªŒè¯ @escook/express-joi"></a>8.  è¡¨å•éªŒè¯ @escook/express-joi</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pnpm i @escook/express-joi</span><br><span class="line"></span><br><span class="line">// ä¾èµ–</span><br><span class="line">pnpm i joi</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>å¯¼å…¥ï¼Œ<code>app.js</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ express</span></span><br><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»º express å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ Joi æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Joi</span> = <span class="built_in">require</span>(<span class="string">&#x27;joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½® cors è·¨åŸŸä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>æ–°å»º /schema/user.js ç”¨æˆ·ä¿¡æ¯éªŒè¯è§„åˆ™æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–ä»¥ä¸‹ä»£ç </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Joi</span> = <span class="built_in">require</span>(<span class="string">&#x27;joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ‰‹æœºå·éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> accounts = <span class="title class_">Joi</span>.<span class="title function_">string</span>().<span class="title function_">required</span>()</span><br><span class="line"><span class="keyword">const</span> code = <span class="title class_">Joi</span>.<span class="title function_">string</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ‰‹æœºå·ç çš„éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> reg_login_schema = &#123;</span><br><span class="line"><span class="attr">body</span>: &#123;</span><br><span class="line">accounts,</span><br><span class="line">code</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡º reg_login_schema</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; reg_login_schema &#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>ç„¶å ï¼Œåœ¨è·¯ç”±æ¨¡å—ä¸­ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Router</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥éªŒè¯æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> expressJoi = <span class="built_in">require</span>(<span class="string">&#x27;@escook/express-joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; reg_login_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> &#123; regUser, login &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œç”¨æˆ·</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login/code&#x27;</span>, <span class="title function_">expressJoi</span>(reg_login_schema), regUser)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•æ¥å£</span></span><br><span class="line"><span class="comment">// éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤šä¸ªè·¯ç”±å…±ç”¨éªŒè¯è§„åˆ™æ—¶ï¼Œè¦ç•™æ„éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ºå¿…å¡«</span></span><br><span class="line"><span class="comment">// å¦‚æœéªŒè¯è§„åˆ™ä¸­æ²¡æœ‰æŸä¸ªæ•°æ®çš„éªŒè¯è§„åˆ™ï¼Œä½†å‘èµ·çš„è¯·æ±‚ä¸­æºå¸¦äº†è¯¥å‚æ•°ï¼Œåˆ™ä¼šå¯¼è‡´ [Object: null prototype] æŠ¥é”™</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="title function_">expressJoi</span>(reg_login_schema), login)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºè·¯ç”±</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure></li></ol>
              </div>
            </details>
<h2 id="9-ä½¿ç”¨-fetch-åŠ è½½æœ¬åœ°jsonæ•°æ®"><a href="#9-ä½¿ç”¨-fetch-åŠ è½½æœ¬åœ°jsonæ•°æ®" class="headerlink" title="9. ä½¿ç”¨ fetch åŠ è½½æœ¬åœ°jsonæ•°æ®"></a>9. ä½¿ç”¨ fetch åŠ è½½æœ¬åœ°jsonæ•°æ®</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>publicæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºdata/*.jsonæ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span> </span><br><span class="line">  </span><br><span class="line">      <span class="attr">&quot;picture&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/data/img/banner-1.png&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;itæ±‚èŒç«¯2&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;isdelete&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mobile.zcwytd.com/#/pages/login/choice/index&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;create_time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-06-28T13:03:53.000Z&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;update_time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-07-05T08:48:55.000Z&quot;</span> </span><br><span class="line">     </span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;picture&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/data/img/banner-2.png&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;itæ±‚èŒç«¯1&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;isdelete&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;sort&quot;</span><span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://mobile.zcwytd.com/#/pages/login/choice/index&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;create_time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-06-28T13:05:33.000Z&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;update_time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-07-01T06:34:11.000Z&quot;</span> </span><br><span class="line">     </span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>ä¿®æ”¹åŸvueæ–‡ä»¶ä¸­çš„apiè¯·æ±‚é€»è¾‘</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯æ¥å£è¯·æ±‚å‡½æ•°ï¼š</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getBannerList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œï¼ŒåŸæœ¬æ˜¯å‘èµ· api è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">bannerList</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="number">2</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// è¿™é‡Œä¹Ÿå¾ˆæœ‰æ„æ€, if (res) &#123;&#125; else&#123;å½“ä¸­, æ¨æ–­äº† res ä¸º false, å› æ­¤ä¸å†å…è®¸ä½¿ç”¨å·²åœ¨ api æ¥å£ä¸­å®šä¹‰çš„è¿”å›æ•°æ®ç±»å‹&#125;</span></span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">list</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    store.<span class="title function_">setBannerList</span>(res.<span class="property">list</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">showToast</span>(res.<span class="property">msg</span> || <span class="string">&#x27;åˆ°è¿™é‡Œå‡ºé”™å•¦&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åœ¨å‰ç«¯é¡¹ç›®ä¸­å‡†å¤‡å¥½äº†jsonæ•°æ®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ fetch ä»æœ¬åœ°è·å–</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBannerList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ fetch ä»æœ¬åœ° JSON æ–‡ä»¶åŠ è½½æ•°æ®</span></span><br><span class="line">    <span class="comment">// å‡è®¾æ–‡ä»¶åœ¨ public/data/banner.json</span></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/data/banner.json&#x27;</span>) </span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æ— æ³•åŠ è½½æœ¬åœ°æ•°æ®&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† JSON æ–‡ä»¶è§£æä¸ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­å¹¶å¤„ç†è¿”å›çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">list</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">      store.<span class="title function_">setBannerList</span>(res.<span class="property">list</span>) <span class="comment">// å‡è®¾ store æ˜¯ä¸€ä¸ªå…¨å±€çŠ¶æ€ç®¡ç†å¯¹è±¡</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">showToast</span>(res.<span class="property">msg</span> || <span class="string">&#x27;æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œç¼ºå°‘ list å­—æ®µ&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;åŠ è½½æœ¬åœ° bannerList æ•°æ®å¤±è´¥:&#x27;</span>, error)</span><br><span class="line">    <span class="title function_">showToast</span>(<span class="string">&#x27;åŠ è½½æœ¬åœ°æ•°æ®å‡ºé”™&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>
              </div>
            </details>
<h2 id="10-å¼€å‘é˜¶æ®µï¼Œå‘-mysql-æ•°æ®åº“æ‰¹é‡æ·»åŠ æ•°æ®"><a href="#10-å¼€å‘é˜¶æ®µï¼Œå‘-mysql-æ•°æ®åº“æ‰¹é‡æ·»åŠ æ•°æ®" class="headerlink" title="10. å¼€å‘é˜¶æ®µï¼Œå‘ mysql æ•°æ®åº“æ‰¹é‡æ·»åŠ æ•°æ®"></a>10. å¼€å‘é˜¶æ®µï¼Œå‘ mysql æ•°æ®åº“æ‰¹é‡æ·»åŠ æ•°æ®</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <p>éœ€æ±‚æ¥äº†ï¼Œå‰ç«¯é¡¹ç›®demoéœ€è¦çš„åŸºç¡€æ•°æ®ï¼Œéœ€è¦æ‰¹é‡æ·»åŠ åˆ°æŒ‡å®šçš„æ•°æ®åº“è¡¨å½“ä¸­</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// é¦–å…ˆï¼Œå‡†å¤‡æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> taskList = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;task_id&quot;</span>: <span class="number">33</span>, </span><br><span class="line">      <span class="string">&quot;task_name&quot;</span>: <span class="string">&quot;æ‹¯æ•‘å–µæ˜Ÿäºº&quot;</span>, </span><br><span class="line">      <span class="string">&quot;position_name&quot;</span>: <span class="string">&quot;å‰ç«¯å¼€å‘&quot;</span>, </span><br><span class="line">      <span class="string">&quot;task_budget&quot;</span>: <span class="number">1</span>, </span><br><span class="line">      <span class="string">&quot;task_cycle&quot;</span>: <span class="number">60</span>, </span><br><span class="line">      <span class="string">&quot;service_mode&quot;</span>: <span class="string">&quot;é©»åœº&quot;</span>, </span><br><span class="line">      <span class="string">&quot;task_ask&quot;</span>: <span class="string">&quot;æ•‘æ•‘å­©å­å§&quot;</span>, </span><br><span class="line">      <span class="string">&quot;task_grade&quot;</span>: <span class="string">&quot;åˆçº§&quot;</span>, </span><br><span class="line">      <span class="string">&quot;isdelete&quot;</span>: <span class="number">0</span>, </span><br><span class="line">      <span class="string">&quot;is_check&quot;</span>: <span class="number">1</span>, </span><br><span class="line">      <span class="string">&quot;company_name&quot;</span>: <span class="string">&quot;åŒ—äº¬é©»åœºæ— å¿§ç§‘æŠ€æœ‰é™å…¬å¸&quot;</span>, </span><br><span class="line">      <span class="string">&quot;city&quot;</span>: <span class="string">&quot;åŒ—äº¬&quot;</span>, </span><br><span class="line">      <span class="string">&quot;area&quot;</span>: <span class="string">&quot;æœé˜³åŒº&quot;</span>, </span><br><span class="line">      <span class="string">&quot;user_name&quot;</span>: <span class="literal">null</span>, </span><br><span class="line">      <span class="string">&quot;it_head&quot;</span>: <span class="literal">null</span>, </span><br><span class="line">      <span class="string">&quot;is_emergency&quot;</span>: <span class="number">1</span> </span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;task_id&quot;</span>: <span class="number">38</span>, </span><br><span class="line">        <span class="string">&quot;task_name&quot;</span>: <span class="string">&quot;é‡‘èè¡Œä¸šappçš„ä¸€ä¸ªå°ç¨‹åºè®¾è®¡&quot;</span>, </span><br><span class="line">        <span class="string">&quot;position_name&quot;</span>: <span class="string">&quot;UIè®¾è®¡å¸ˆ&quot;</span>, </span><br><span class="line">        <span class="string">&quot;task_budget&quot;</span>: <span class="number">15000</span>, </span><br><span class="line">        <span class="string">&quot;task_cycle&quot;</span>: <span class="number">30</span>, </span><br><span class="line">        <span class="string">&quot;service_mode&quot;</span>: <span class="string">&quot;å…¨èŒ&quot;</span>, </span><br><span class="line">        <span class="string">&quot;task_ask&quot;</span>: <span class="string">&quot;é‡‘èè¡Œä¸šçš„å°ç¨‹åºè®¾è®¡ï¼Œå¯¹uiç•Œé¢è¦æ±‚å¾ˆé«˜ï¼Œæœ‰å®Œæ•´çš„å°ç¨‹åºå¼€å‘è€…ä¼˜å…ˆï¼Œèƒ½ç‹¬ç«‹å®Œæˆä¸€æ•´å¥—å°ç¨‹åºè®¾è®¡çš„æµç¨‹ï¼Œè·Ÿè¸ªå¼€å‘è½åœ°ã€‚&quot;</span>, </span><br><span class="line">        <span class="string">&quot;task_grade&quot;</span>: <span class="literal">null</span>, </span><br><span class="line">        <span class="string">&quot;isdelete&quot;</span>: <span class="number">0</span>, </span><br><span class="line">        <span class="string">&quot;is_check&quot;</span>: <span class="number">1</span>, </span><br><span class="line">        <span class="string">&quot;company_name&quot;</span>: <span class="string">&quot;åŒ—äº¬é©»åœºæ— å¿§ç§‘æŠ€æœ‰é™å…¬å¸&quot;</span>, </span><br><span class="line">        <span class="string">&quot;city&quot;</span>: <span class="string">&quot;åŒ—äº¬&quot;</span>, </span><br><span class="line">        <span class="string">&quot;area&quot;</span>: <span class="string">&quot;æœé˜³åŒº&quot;</span>, </span><br><span class="line">        <span class="string">&quot;user_name&quot;</span>: <span class="literal">null</span>, </span><br><span class="line">        <span class="string">&quot;it_head&quot;</span>: <span class="literal">null</span>, </span><br><span class="line">        <span class="string">&quot;is_emergency&quot;</span>: <span class="number">0</span> </span><br><span class="line">    	&#125;,</span><br><span class="line">  ]</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å®šä¹‰æŸ¥è¯¢å­—ç¬¦ä¸²å’Œæ•°æ®æ•°ç»„</span></span><br><span class="line">  <span class="keyword">const</span> sql = <span class="string">`</span></span><br><span class="line"><span class="string">  INSERT INTO taskList (</span></span><br><span class="line"><span class="string">    task_name,</span></span><br><span class="line"><span class="string">    position_name,</span></span><br><span class="line"><span class="string">    task_budget,</span></span><br><span class="line"><span class="string">    task_cycle,</span></span><br><span class="line"><span class="string">    service_mode,</span></span><br><span class="line"><span class="string">    task_ask,</span></span><br><span class="line"><span class="string">    task_grade,</span></span><br><span class="line"><span class="string">    isdelete,</span></span><br><span class="line"><span class="string">    is_check,</span></span><br><span class="line"><span class="string">    company_name,</span></span><br><span class="line"><span class="string">    city,</span></span><br><span class="line"><span class="string">    area,</span></span><br><span class="line"><span class="string">    user_name,</span></span><br><span class="line"><span class="string">    it_head,</span></span><br><span class="line"><span class="string">    is_emergency,</span></span><br><span class="line"><span class="string">    created_at,</span></span><br><span class="line"><span class="string">    updated_at</span></span><br><span class="line"><span class="string">  ) VALUES ?</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">  <span class="comment">// è½¬æ¢æ•°æ®ä¸ºæ‰¹é‡æ’å…¥æ ¼å¼</span></span><br><span class="line"><span class="keyword">const</span> values = taskList.<span class="title function_">map</span>(<span class="function"><span class="params">task</span> =&gt;</span> [</span><br><span class="line">  task.<span class="property">task_name</span>,</span><br><span class="line">  task.<span class="property">position_name</span>,</span><br><span class="line">  task.<span class="property">task_budget</span>,</span><br><span class="line">  task.<span class="property">task_cycle</span>,</span><br><span class="line">  task.<span class="property">service_mode</span>,</span><br><span class="line">  task.<span class="property">task_ask</span>,</span><br><span class="line">  task.<span class="property">task_grade</span>,</span><br><span class="line">  task.<span class="property">isdelete</span>,</span><br><span class="line">  task.<span class="property">is_check</span>,</span><br><span class="line">  task.<span class="property">company_name</span>,</span><br><span class="line">  task.<span class="property">city</span>,</span><br><span class="line">  task.<span class="property">area</span>,</span><br><span class="line">  task.<span class="property">user_name</span>,</span><br><span class="line">  task.<span class="property">it_head</span>,</span><br><span class="line">  task.<span class="property">is_emergency</span>,</span><br><span class="line">  task.<span class="property">created_at</span>,</span><br><span class="line">  task.<span class="property">updated_at</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œæ’å…¥</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, [values], <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ‰¹é‡æ’å…¥æ•°æ®å¤±è´¥:&#x27;</span>, err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæ’å…¥æˆåŠŸçš„æç¤ºè²Œä¼¼æ²¡æœ‰æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯å·²ç»éªŒè¯ï¼Œæ•°æ®æ˜¯æ‰¹é‡æ³¨å…¥äº†</span></span><br><span class="line">  <span class="comment">// åé¢ç±»ä¼¼çš„æ“ä½œä¼šç‰¹åˆ«ç•™æ„åŸå› </span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰¹é‡æ’å…¥æ•°æ®æˆåŠŸ:&#x27;</span>, result)</span><br><span class="line">  db.<span class="title function_">end</span>() <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">  res.<span class="title function_">cc</span>(error,<span class="number">500</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details>
<h2 id="11-jwt-token-éªŒè¯"><a href="#11-jwt-token-éªŒè¯" class="headerlink" title="11. jwt-token éªŒè¯"></a>11. jwt-token éªŒè¯</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>æ ¹æ®åç«¯çš„ token éªŒè¯é€»è¾‘</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸€å®šè¦åœ¨è·¯ç”±ä¹‹å‰ï¼Œåº”ç”¨æ­¤ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> &#123; expressjwt &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./config&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">  <span class="title function_">expressjwt</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: config.<span class="property">jwtSecretKey</span>, <span class="comment">// ä¸ç”Ÿæˆ Token æ—¶çš„å¯†é’¥ä¿æŒä¸€è‡´</span></span><br><span class="line">    <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>], <span class="comment">// ç¡®ä¿ç®—æ³•ä¸ Token çš„ç­¾åæ–¹å¼åŒ¹é…</span></span><br><span class="line">    <span class="attr">getToken</span>: <span class="function">(<span class="params">req</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ä» x-access-token æå– Token</span></span><br><span class="line">      <span class="keyword">const</span> token = req.<span class="property">headers</span>[<span class="string">&#x27;x-access-token&#x27;</span>]</span><br><span class="line">      <span class="keyword">if</span> (token &amp;&amp; token.<span class="title function_">startsWith</span>(<span class="string">&#x27;Bearer &#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> token.<span class="title function_">slice</span>(<span class="number">7</span>) <span class="comment">// å»æ‰ &quot;Bearer &quot; å‰ç¼€</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">unless</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: [<span class="regexp">/^\/api\/login(\/.*)?$/</span>] <span class="comment">// è±å…ç™»å½•ç›¸å…³æ¥å£</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å‰ç«¯å¿…é¡»æŒ‰ç…§åç«¯æ˜¾ç¤ºæŒ‡å®šçš„ getToken æ–¹æ³•æ¥æºå¸¦token</p></li><li><p>ä¸æ˜¾ç¤ºçš„æŒ‡å®šè¡Œä¸è¡Œï¼Ÿè¡Œï¼</p><p>åœ¨ä½¿ç”¨ <code>express-jwt</code> æ—¶ï¼Œ<code>getToken</code> æ–¹æ³• <strong>ä¸æ˜¯å¿…é¡»æ˜¾å¼æŒ‡å®š</strong> çš„ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé»˜è®¤çš„è¡Œä¸ºã€‚å¦‚æœä¸æ˜¾å¼æä¾› <code>getToken</code>ï¼Œ<code>express-jwt</code> ä¼šæŒ‰ç…§ä»¥ä¸‹é»˜è®¤é€»è¾‘æ¥æå– Tokenï¼š</p><hr><p><strong>é»˜è®¤è¡Œä¸º</strong></p><p><code>express-jwt</code> é»˜è®¤ä»ä»¥ä¸‹ä½ç½®æå– Tokenï¼š</p><ol><li><p>Authorization Header</p><ul><li>é»˜è®¤ä»è¯·æ±‚å¤´ <code>Authorization</code> æå–ã€‚</li><li>è¦æ±‚æ ¼å¼ä¸ºï¼š<code>Bearer &lt;token&gt;</code>ã€‚</li><li>ä¾‹å¦‚ï¼š<code>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR...</code></li></ul></li></ol><hr><p><strong>ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ getTokenï¼Ÿ</strong></p><ol><li><strong>Token æ¥æºä¸åŒ</strong>:<ul><li>å¦‚æœä½ çš„ Token <strong>ä¸åœ¨ Authorization å¤´</strong>ï¼Œè€Œæ˜¯æ”¾åœ¨å…¶ä»–åœ°æ–¹ï¼ˆæ¯”å¦‚ <code>x-access-token</code> æˆ–è€… <code>cookie</code>ï¼‰ï¼Œå°±éœ€è¦é€šè¿‡ <code>getToken</code> æ–¹æ³•æ˜¾å¼æŒ‡å®šå¦‚ä½•æå–ã€‚</li></ul></li><li><strong>å‰ç¼€ä¸ç¬¦åˆ Bearer æ ¼å¼</strong>:<ul><li>å¦‚æœä½ çš„ Token æ²¡æœ‰ <code>Bearer</code>å‰ç¼€ï¼Œé»˜è®¤é€»è¾‘æ— æ³•æ­£ç¡®è§£æ Tokenï¼Œä¹Ÿéœ€è¦è‡ªå®šä¹‰ <code>getToken</code>ã€‚</li></ul></li><li><strong>æ”¯æŒæ›´å¤šåœºæ™¯</strong>:<ul><li>æ¯”å¦‚åŒæ—¶æ”¯æŒ <code>Authorization</code> å’Œ <code>x-access-token</code> ä¸¤ç§æå–æ–¹å¼ï¼Œæˆ–è€…å…è®¸ä»è¯·æ±‚ä½“ä¸­æå– Tokenã€‚</li></ul></li></ol><hr><p><strong>ä¸æ˜¾å¼æŒ‡å®šçš„ä»£ç ç¤ºä¾‹</strong></p><p>ä»¥ä¸‹æ˜¯åªä½¿ç”¨é»˜è®¤è¡Œä¸ºçš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">  <span class="title function_">expressjwt</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: config.<span class="property">jwtSecretKey</span>,</span><br><span class="line">    <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>]</span><br><span class="line">  &#125;).<span class="title function_">unless</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: [<span class="regexp">/^\/api\/login(\/.*)?$/</span>] <span class="comment">// è±å…ç™»å½•ç›¸å…³æ¥å£</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><p>Token æå–æ–¹å¼</p><p>é»˜è®¤åªä» <code>Authorization: Bearer &lt;token&gt;</code> ä¸­æå–ã€‚</p></li></ul><hr><p><strong>æ˜¾å¼æŒ‡å®šçš„å¿…è¦æ€§</strong></p><p>åœ¨å¦‚ä¸‹çš„ä»£ç ä¸­ï¼Œæ˜¾å¼å®šä¹‰äº† <code>getToken</code>ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">getToken</span>: <span class="function">(<span class="params">req</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = req.<span class="property">headers</span>[<span class="string">&#x27;x-access-token&#x27;</span>]; <span class="comment">// è‡ªå®šä¹‰ä» x-access-token æå–</span></span><br><span class="line">  <span class="keyword">if</span> (token &amp;&amp; token.<span class="title function_">startsWith</span>(<span class="string">&#x27;Bearer &#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> token.<span class="title function_">slice</span>(<span class="number">7</span>); <span class="comment">// å»æ‰ &quot;Bearer &quot; å‰ç¼€</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨äº† <code>x-access-token</code> æ¥ä¼ é€’ Tokenï¼Œè¿™ä¸æ˜¯é»˜è®¤è¡Œä¸ºã€‚</li><li>å¦‚æœä¸æŒ‡å®š <code>getToken</code>ï¼Œ<code>express-jwt</code> ä¼šå°è¯•ä» <code>Authorization</code> å¤´æå–ï¼Œå¯¼è‡´æ‰¾ä¸åˆ° Token çš„é—®é¢˜ã€‚</li></ul><hr><p><strong>ç»“è®º</strong></p><ol><li><strong>ä¸æ˜¾å¼æŒ‡å®šæ—¶</strong>ï¼Œ<code>express-jwt</code> é»˜è®¤ä» <code>Authorization: Bearer &lt;token&gt;</code> ä¸­æå– Tokenã€‚</li><li>å¦‚æœä½ çš„ Token <strong>ä¸åœ¨é»˜è®¤ä½ç½®</strong>ï¼Œæˆ–è€…æ ¼å¼ä¸åŒ¹é…ï¼Œ<strong>å¿…é¡»æ˜¾å¼æŒ‡å®š getToken æ–¹æ³•</strong>ã€‚</li></ol></li></ol><p>â€‹    ps: å…³äºé”™è¯¯çº§åˆ«ä¸­é—´ä»¶çš„ä¸€äº›ç»†èŠ‚è¯•é”™</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰é”™è¯¯çº§åˆ«ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// è¿™é‡Œå¿…é¡»è¦æœ‰ next(), å¦åˆ™ä¼šå¯¼è‡´ä¸­é—´ä»¶æ— æ³•æ­£å¸¸å·¥ä½œ</span></span><br><span class="line"><span class="comment">// ä¾‹å¦‚ï¼Œä½¿ç”¨ apifox å·¥å…·æ—¶ï¼Œæœªèƒ½æ­£ç¡®æ‰§è¡Œ res.cc(&#x27;èº«ä»½è®¤è¯å¤±è´¥ï¼&#x27;)</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ•°æ®éªŒè¯å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err <span class="keyword">instanceof</span> <span class="title class_">Joi</span>.<span class="property">ValidationError</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line">  <span class="comment">// èº«ä»½è®¤è¯å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;èº«ä»½è®¤è¯å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line">  <span class="comment">// æœªçŸ¥é”™è¯¯</span></span><br><span class="line">  res.<span class="title function_">cc</span>(err)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
              </div>
            </details>
<h2 id="12-æ¸©æ•…çŸ¥æ–°ï¼Œå‰ç«¯ç€‘å¸ƒæµåŠ è½½æ•°æ®çš„åç«¯é€‚é…"><a href="#12-æ¸©æ•…çŸ¥æ–°ï¼Œå‰ç«¯ç€‘å¸ƒæµåŠ è½½æ•°æ®çš„åç«¯é€‚é…" class="headerlink" title="12.æ¸©æ•…çŸ¥æ–°ï¼Œå‰ç«¯ç€‘å¸ƒæµåŠ è½½æ•°æ®çš„åç«¯é€‚é…"></a>12.æ¸©æ•…çŸ¥æ–°ï¼Œå‰ç«¯ç€‘å¸ƒæµåŠ è½½æ•°æ®çš„åç«¯é€‚é…</h2><details class="folding-tag" ><summary> åç«¯ api è®¾è®¡ - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>ç›´æ¥ä¸Šä»£ç </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">&#x27;../db/index&#x27;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">taskAllList</span> = <span class="keyword">async</span> (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä»å‰ç«¯è¯·æ±‚ä¸­æå–å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> &#123; </span><br><span class="line">      position_name, </span><br><span class="line">      service_mode, </span><br><span class="line">      task_cycle, </span><br><span class="line">      pageNum = <span class="number">1</span>,</span><br><span class="line">      pageSize = <span class="number">10</span>,</span><br><span class="line">      city </span><br><span class="line">    &#125; = req.<span class="property">query</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">// åŸºç¡€æŸ¥è¯¢è¯­å¥</span></span><br><span class="line">    <span class="keyword">let</span> query = <span class="string">&#x27;SELECT * FROM tasklist WHERE isdelete = 0 AND is_check = 1&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> params = []</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ ¹æ®å‚æ•°åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (city) &#123;</span><br><span class="line">      query += <span class="string">&#x27; AND city = ?&#x27;</span></span><br><span class="line">      params.<span class="title function_">push</span>(city)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (position_name) &#123;</span><br><span class="line">      query += <span class="string">&#x27; AND position_name = ?&#x27;</span></span><br><span class="line">      params.<span class="title function_">push</span>(position_name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (service_mode) &#123;</span><br><span class="line">      query += <span class="string">&#x27; AND service_mode = ?&#x27;</span></span><br><span class="line">      params.<span class="title function_">push</span>(service_mode)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (task_cycle) &#123;</span><br><span class="line">      query += <span class="string">&#x27; AND task_cycle &lt;= ?&#x27;</span></span><br><span class="line">      params.<span class="title function_">push</span>(task_cycle)</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ·»åŠ æ’åºæ¡ä»¶ï¼ˆå¯é€‰ï¼Œè§†éœ€æ±‚è€Œå®šï¼‰</span></span><br><span class="line">    query += <span class="string">&#x27; ORDER BY created_at DESC&#x27;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ·»åŠ åˆ†é¡µé€»è¾‘</span></span><br><span class="line">    <span class="keyword">const</span> offset = (pageNum - <span class="number">1</span>) * pageSize <span class="comment">// è®¡ç®—åç§»é‡</span></span><br><span class="line">    query += <span class="string">&#x27; LIMIT ? OFFSET ?&#x27;</span></span><br><span class="line">    params.<span class="title function_">push</span>(<span class="built_in">parseInt</span>(pageSize), <span class="built_in">parseInt</span>(offset))</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ‰§è¡Œ SQL æŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">const</span> [rows] = <span class="keyword">await</span> db.<span class="title function_">query</span>(query, params)</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ€»æ•°ï¼ˆä¸å¸¦åˆ†é¡µæ¡ä»¶çš„æ€»è®°å½•æ•°ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> totalQuery = <span class="string">&#x27;SELECT COUNT(*) AS total FROM tasklist WHERE isdelete = 0 AND is_check = 1&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> [totalResult] = <span class="keyword">await</span> db.<span class="title function_">query</span>(totalQuery,params)</span><br><span class="line">    <span class="keyword">const</span> total = totalResult[<span class="number">0</span>].<span class="property">total</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">// å“åº”æ•°æ®</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">result</span>: &#123;</span><br><span class="line">        <span class="attr">records</span>: rows, <span class="comment">// å½“å‰é¡µçš„è®°å½•</span></span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨æˆåŠŸï¼&#x27;</span>,</span><br><span class="line">        total, <span class="comment">// æ€»è®°å½•æ•°</span></span><br><span class="line">        <span class="attr">page</span>: <span class="built_in">parseInt</span>(pageNum), <span class="comment">// å½“å‰é¡µç </span></span><br><span class="line">        <span class="attr">pageSize</span>: <span class="built_in">parseInt</span>(pageSize) <span class="comment">// æ¯é¡µæ¡æ•°</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    res.<span class="title function_">cc</span>(e) <span class="comment">// æ•è·å¹¶è¿”å›é”™è¯¯</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><strong>ä»£ç ä¸­çš„åˆ†é¡µé€»è¾‘</strong></li></ol>   <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µç›¸å…³å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> offset = (pageNum - <span class="number">1</span>) * pageSize; <span class="comment">// è®¡ç®—åç§»é‡</span></span><br><span class="line">query += <span class="string">&#x27; LIMIT ? OFFSET ?&#x27;</span>;</span><br><span class="line">params.<span class="title function_">push</span>(<span class="built_in">parseInt</span>(pageSize), <span class="built_in">parseInt</span>(offset));</span><br></pre></td></tr></table></figure><ol><li><p><strong>å‚æ•°å®šä¹‰ï¼š</strong></p><ul><li><code>pageNum</code>: å½“å‰é¡µç ï¼ˆä»å‰ç«¯è¯·æ±‚ä¸­ä¼ å…¥ï¼Œé»˜è®¤å€¼ä¸º <code>1</code>ï¼‰ã€‚</li><li><code>pageSize</code>: æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ¡æ•°ï¼ˆä»å‰ç«¯è¯·æ±‚ä¸­ä¼ å…¥ï¼Œé»˜è®¤å€¼ä¸º <code>10</code>ï¼‰ã€‚</li><li><code>offset</code>: åç§»é‡ï¼Œå³æŸ¥è¯¢ä»å“ªä¸€æ¡è®°å½•å¼€å§‹ã€‚</li></ul></li><li><p><strong>åç§»é‡çš„è®¡ç®—ï¼š</strong></p><ul><li><p><strong>å…¬å¼ï¼š</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="1736856432895.png" alt="è®¡ç®—åç§»é‡"></p><ul><li><code>pageNum - 1</code>: è®¡ç®—ä»ç¬¬å‡ é¡µå¼€å§‹ï¼Œç¬¬ä¸€é¡µ <code>pageNum=1</code> æ—¶ï¼Œåç§»é‡ä¸º <code>0</code>ã€‚</li><li>ä¹˜ä»¥ <code>pageSize</code>: ç¡®å®šè¦è·³è¿‡çš„è®°å½•æ¡æ•°ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹ï¼š</strong></p><ul><li>å‡è®¾æ¯é¡µæ˜¾ç¤º 10 æ¡è®°å½•ï¼š<ul><li>ç¬¬ 1 é¡µï¼š<code>offset = (1 - 1) * 10 = 0</code>ï¼ˆä»ç¬¬ 0 æ¡è®°å½•å¼€å§‹ï¼‰ã€‚</li><li>ç¬¬ 2 é¡µï¼š<code>offset = (2 - 1) * 10 = 10</code>ï¼ˆä»ç¬¬ 10 æ¡è®°å½•å¼€å§‹ï¼‰ã€‚</li><li>ç¬¬ 3 é¡µï¼š<code>offset = (3 - 1) * 10 = 20</code>ï¼ˆä»ç¬¬ 20 æ¡è®°å½•å¼€å§‹ï¼‰ã€‚</li></ul></li></ul></li></ul></li><li><p><strong>SQL ä¸­çš„åˆ†é¡µï¼š</strong></p><ul><li><p><strong>LIMIT ?</strong>: é™åˆ¶è¿”å›çš„è®°å½•æ¡æ•°ï¼Œ<code>pageSize</code> å†³å®šæ¯é¡µçš„è®°å½•æ•°é‡ã€‚</p></li><li><p><strong>OFFSET ?</strong>: è·³è¿‡æŒ‡å®šæ•°é‡çš„è®°å½•ï¼Œ<code>offset</code> å†³å®šä»å“ªä¸€æ¡è®°å½•å¼€å§‹ã€‚</p></li><li><p><strong>å®Œæ•´ç¤ºä¾‹ SQLï¼š</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> tasklist </span><br><span class="line"><span class="keyword">WHERE</span> isdelete <span class="operator">=</span> <span class="number">0</span> <span class="keyword">AND</span> is_check <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> created_at <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¯é¡µæ˜¾ç¤º <code>10</code> æ¡è®°å½•ï¼Œè·³è¿‡å‰ <code>20</code> æ¡ï¼ˆå³è¿”å›ç¬¬ 21~30 æ¡è®°å½•ï¼‰ã€‚</li></ul></li></ul></li></ol><hr><p>   <strong>æŸ¥è¯¢æ€»æ•°ï¼ˆTotalï¼‰é€»è¾‘</strong></p><p>   åˆ†é¡µéœ€è¦çŸ¥é“æ€»è®°å½•æ•°ï¼Œä»¥ä¾¿å‰ç«¯è®¡ç®—åˆ†é¡µæŒ‰é’®æˆ–åˆ¤æ–­æ˜¯å¦åŠ è½½æ›´å¤šæ•°æ®ã€‚</p>   <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">const totalQuery <span class="operator">=</span> <span class="string">&#x27;SELECT COUNT(*) AS total FROM tasklist WHERE isdelete = 0 AND is_check = 1&#x27;</span>;</span><br><span class="line">const [totalResult] <span class="operator">=</span> await db.query(totalQuery);</span><br><span class="line">const total <span class="operator">=</span> totalResult[<span class="number">0</span>].total;</span><br></pre></td></tr></table></figure><ol><li><p><strong>SQL æŸ¥è¯¢è§£é‡Šï¼š</strong></p><ul><li><strong>SELECT COUNT(*) AS total</strong>: ç»Ÿè®¡ <code>tasklist</code> è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ€»è®°å½•æ•°ã€‚</li><li><strong>WHERE æ¡ä»¶</strong>: åªç»Ÿè®¡æœªè¢«åˆ é™¤ä¸”å·²å®¡æ ¸çš„è®°å½•ã€‚</li><li>ä¸å— <code>LIMIT</code> å’Œ <code>OFFSET</code> é™åˆ¶ï¼Œè¿”å›çš„æ˜¯å®Œæ•´æ•°æ®é›†çš„è®°å½•æ€»æ•°ã€‚</li></ul></li><li><p><strong>ç»“æœæ„ä¹‰ï¼š</strong></p><ul><li><p><code>total</code>: æ€»è®°å½•æ•°ï¼Œä¾›å‰ç«¯åˆ†é¡µä½¿ç”¨ã€‚</p></li><li><p>å‰ç«¯å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼è®¡ç®—æ€»é¡µæ•°ï¼š</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="1736821427654.png" alt="è®¡ç®—æ€»æ•°"></p></li></ul></li></ol><hr><p>   <strong>åˆ†é¡µçš„å·¥ä½œæµç¨‹</strong></p><ol><li><strong>å‰ç«¯ä¼ å‚ï¼š</strong><ul><li>ç”¨æˆ·è¯·æ±‚æŸä¸€é¡µæ•°æ®ï¼Œå‰ç«¯å‘é€å‚æ•°ï¼š<code>pageNum</code> å’Œ <code>pageSize</code>ã€‚</li></ul></li><li><strong>åç«¯æ¥æ”¶ï¼š</strong><ul><li>é€šè¿‡ <code>pageNum</code> å’Œ <code>pageSize</code> è®¡ç®— <code>offset</code>ã€‚</li><li>ä½¿ç”¨ <code>LIMIT</code> å’Œ <code>OFFSET</code> é™åˆ¶è¿”å›çš„è®°å½•æ¡æ•°ã€‚</li></ul></li><li><strong>è¿”å›æ•°æ®ï¼š</strong><ul><li>è¿”å›åˆ†é¡µæ•°æ®ï¼ˆ<code>rows</code>ï¼‰å’Œæ€»è®°å½•æ•°ï¼ˆ<code>total</code>ï¼‰ã€‚</li><li>å‰ç«¯å¯ä»¥æ ¹æ® <code>total</code> å†³å®šæ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®ã€‚</li></ul></li></ol><hr><p>   <strong>æ³¨æ„äº‹é¡¹</strong></p><ol><li><p><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p><ul><li>å½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œç›´æ¥ä½¿ç”¨ <code>OFFSET</code> å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºæ•°æ®åº“éœ€è¦è·³è¿‡å¤§é‡æ•°æ®ã€‚</li><li><strong>ä¼˜åŒ–æ–¹æ³•</strong>ï¼šé€šè¿‡ç´¢å¼•å­—æ®µï¼ˆå¦‚ <code>id</code> æˆ– <code>created_at</code>ï¼‰ä½¿ç”¨æ¸¸æ ‡è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> tasklist </span><br><span class="line"><span class="keyword">WHERE</span> isdelete <span class="operator">=</span> <span class="number">0</span> <span class="keyword">AND</span> is_check <span class="operator">=</span> <span class="number">1</span> <span class="keyword">AND</span> id <span class="operator">&gt;</span> ? </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">ASC</span> </span><br><span class="line">LIMIT <span class="number">10</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>è¾¹ç•Œæƒ…å†µå¤„ç†ï¼š</strong></p><ul><li><code>pageNum</code> å°äº 1ï¼šå°†å…¶ä¿®æ­£ä¸º <code>1</code>ã€‚</li><li><code>pageSize</code> è¶…è¿‡åˆç†èŒƒå›´ï¼šè®¾ç½®æœ€å¤§å€¼ï¼ˆå¦‚ <code>100</code>ï¼‰ã€‚</li><li>æ€»æ•°ä¸º <code>0</code> æ—¶ï¼šè¿”å›ç©ºæ•°æ®ï¼Œå¹¶æ ‡è®°åˆ†é¡µå·²å®Œæˆã€‚</li></ul></li></ol><hr><p>   <strong>æ€»ç»“</strong></p><p>   åˆ†é¡µé€»è¾‘çš„æ ¸å¿ƒæ˜¯é€šè¿‡ <code>LIMIT</code> å’Œ <code>OFFSET</code> æ§åˆ¶æŸ¥è¯¢èŒƒå›´ï¼Œå¹¶é€šè¿‡è®¡ç®—åç§»é‡ç¡®å®šä»å“ªä¸€æ¡è®°å½•å¼€å§‹æŸ¥è¯¢ã€‚é€šè¿‡ç»Ÿè®¡æ€»è®°å½•æ•°ï¼Œç¡®ä¿å‰ç«¯èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºåˆ†é¡µçŠ¶æ€æˆ–ç»ˆæ­¢åŠ è½½æ›´å¤šçš„é€»è¾‘ã€‚</p>
              </div>
            </details>
<h2 id="13-æŒ‰ç…§èŒƒå¼æ ‡å‡†ï¼Œåˆ›å»ºç”¨æˆ·æ”¶è—è¡¨"><a href="#13-æŒ‰ç…§èŒƒå¼æ ‡å‡†ï¼Œåˆ›å»ºç”¨æˆ·æ”¶è—è¡¨" class="headerlink" title="13. æŒ‰ç…§èŒƒå¼æ ‡å‡†ï¼Œåˆ›å»ºç”¨æˆ·æ”¶è—è¡¨"></a>13. æŒ‰ç…§èŒƒå¼æ ‡å‡†ï¼Œåˆ›å»ºç”¨æˆ·æ”¶è—è¡¨</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <ol><li><p>é¦–å…ˆï¼Œåˆ›å»ºæ•°æ®åº“è¡¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> task_favorites (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,        <span class="comment">-- ä¸»é”®</span></span><br><span class="line">    accounts <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,                     <span class="comment">-- ç”¨æˆ·IDï¼ˆå¤–é”®å…³è”ç”¨æˆ·è¡¨ï¼‰</span></span><br><span class="line">    task_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,                     <span class="comment">-- ä»»åŠ¡IDï¼ˆå¤–é”®å…³è”ä»»åŠ¡è¡¨ï¼‰</span></span><br><span class="line">    created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>, <span class="comment">-- æ”¶è—æ—¶é—´</span></span><br><span class="line">    <span class="keyword">UNIQUE</span> KEY (accounts, task_id),            <span class="comment">-- ç”¨æˆ·å’Œä»»åŠ¡çš„å”¯ä¸€å…³ç³»ï¼Œé˜²æ­¢é‡å¤æ”¶è—</span></span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (accounts) <span class="keyword">REFERENCES</span> users(accounts) <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE, <span class="comment">-- å¤–é”®å…³è”ç”¨æˆ·è¡¨</span></span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (task_id) <span class="keyword">REFERENCES</span> tasklist(task_id) <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE <span class="comment">-- å¤–é”®å…³è”ä»»åŠ¡è¡¨</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li><code>user_id</code> å’Œ <code>task_id</code> ä½¿ç”¨å¤–é”®å…³è” <code>users</code> è¡¨å’Œ <code>tasklist</code> è¡¨ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li><li><code>UNIQUE KEY (user_id, task_id)</code> é˜²æ­¢åŒä¸€ç”¨æˆ·å¯¹åŒä¸€ä»»åŠ¡é‡å¤æ”¶è—ã€‚</li><li><code>ON DELETE CASCADE</code> ç¡®ä¿çˆ¶è¡¨åˆ é™¤å¯¹åº”è®°å½•æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤ <code>user_favorites</code> è¡¨ä¸­ç›¸å…³çš„å…³è”æ•°æ®ã€‚</li></ul><p>å¤–é”®å…³è”ä»»åŠ¡è¡¨ï¼š</p><ul><li><p>åœ¨ <code>FOREIGN KEY (task_id) REFERENCES tasklist(id) ON DELETE CASCADE</code> ä¸­ï¼š</p><p><strong>tasklist</strong>ï¼šè¡¨ç¤ºå¤–é”®æ‰€å¼•ç”¨çš„ç›®æ ‡è¡¨åç§°ï¼Œå³è¿™é‡Œçš„ <code>tasklist</code> æ˜¯ä»»åŠ¡è¡¨ã€‚</p><p><strong>task_id</strong>ï¼šè¡¨ç¤º <code>tasklist</code> è¡¨ä¸­çš„ä¸»é”®ï¼ˆPrimary Keyï¼‰ã€‚å®ƒæ˜¯ç›®æ ‡è¡¨çš„åˆ—åç§°ï¼Œç”¨æ¥å”¯ä¸€æ ‡è¯† <code>tasklist</code> è¡¨ä¸­çš„æ¯ä¸€è¡Œæ•°æ®ã€‚</p></li><li><p>æ„ä¹‰æ˜¯ç¡®ä¿<code>task_id</code>çš„å€¼åªèƒ½æ˜¯<code>tasklist</code>è¡¨ä¸­<code>task_id</code>åˆ—ä¸­å·²ç»å­˜åœ¨çš„å€¼ï¼Œä»è€Œç»´æŒæ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p><p>å¦‚æœå°è¯•å‘<code>task_favorites</code>è¡¨ä¸­æ’å…¥<code>tasklist</code>ä¸­ä¸å­˜åœ¨çš„<code>task_id</code>è®°å½•ï¼Œå°±ä¼šæŠ¥é”™..</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ERROR <span class="number">1452</span> (<span class="number">23000</span>): Cannot <span class="keyword">add</span> <span class="keyword">or</span> <span class="keyword">update</span> a child <span class="type">row</span>: a <span class="keyword">foreign</span> key <span class="keyword">constraint</span> fails</span><br></pre></td></tr></table></figure></li></ul><p>åˆ›å»ºå¤–é”®å…³è”ä»»åŠ¡è¡¨ä¹‹å‰ï¼Œéœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> ä¸ºæŒ‡å®šåˆ—åˆ›å»ºç´¢å¼•</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_accounts <span class="keyword">ON</span> users(accounts);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_task_id <span class="keyword">ON</span> tasklist(task_id);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å°è£…æ·»åŠ æ”¶è—å…³ç³»çš„æ¥å£</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»»åŠ¡æ”¶è—æ¥å£</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">taskFavorite</span> = <span class="keyword">async</span> (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; task_id &#125; = req.<span class="property">body</span> <span class="comment">// ä»è¯·æ±‚çš„æŸ¥è¯¢å‚æ•°ä¸­è·å–ä»»åŠ¡ID</span></span><br><span class="line">  <span class="keyword">const</span> &#123; accounts &#125; = req.<span class="property">auth</span> <span class="comment">// ä»è¯·æ±‚çš„è®¤è¯ä¿¡æ¯ä¸­è·å–ç”¨æˆ·è´¦æˆ·ï¼ˆuser_idï¼‰</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è—è¯¥ä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">const</span> sql = <span class="string">&#x27;SELECT * FROM task_favorites WHERE accounts = ? AND task_id = ?&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> [rows] = <span class="keyword">await</span> db.<span class="title function_">query</span>(sql, [accounts, task_id])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rows.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå·²æ”¶è—ï¼Œåˆ™æ‰§è¡Œå–æ¶ˆæ”¶è—</span></span><br><span class="line">      <span class="keyword">const</span> sqlDelete = <span class="string">&#x27;DELETE FROM task_favorites WHERE accounts = ? AND task_id = ?&#x27;</span></span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlDelete, [accounts, task_id])</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›å–æ¶ˆæ”¶è—çš„çŠ¶æ€</span></span><br><span class="line">      res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">        <span class="attr">result</span>: &#123;</span><br><span class="line">          <span class="attr">errCode</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">msg</span>: <span class="string">&#x27;å·²å–æ¶ˆæ”¶è—&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">0</span> <span class="comment">// æ”¶è—çŠ¶æ€ä¸º 0ï¼Œè¡¨ç¤ºæœªæ”¶è—</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæœªæ”¶è—ï¼Œåˆ™æ‰§è¡Œæ·»åŠ æ”¶è—</span></span><br><span class="line">      <span class="keyword">const</span> sqlInsert = <span class="string">&#x27;INSERT INTO task_favorites (accounts, task_id) VALUES (?, ?)&#x27;</span></span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlInsert, [accounts, task_id])</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›æ·»åŠ æ”¶è—çš„çŠ¶æ€</span></span><br><span class="line">      res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">        <span class="attr">result</span>: &#123;</span><br><span class="line">          <span class="attr">errCode</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">msg</span>: <span class="string">&#x27;å·²æ·»åŠ æ”¶è—&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">1</span> <span class="comment">// æ”¶è—çŠ¶æ€ä¸º 1ï¼Œè¡¨ç¤ºå·²æ”¶è—</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">    res.<span class="title function_">cc</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå‰ç«¯æºå¸¦å‚æ•°å‘èµ· post è¯·æ±‚ï¼Œåç«¯æ¥æ”¶æ—¶ï¼Œéœ€è¦ä½¿ç”¨req.bodyè¿›è¡Œæ¥æ”¶ï¼Œå¦åˆ™æ¥æ”¶ä¸åˆ°ã€‚</p></li></ol><details class="folding-tag" ><summary> é¡ºä¾¿è¯´ä¸€ä¸‹ </summary>              <div class='content'>              <ol><li><p>ä¸åŒapiè¯·æ±‚æ–¹å¼çš„å‚æ•°æ¥æ”¶æ–¹å¼</p><p><strong>GET è¯·æ±‚</strong>ï¼šå‚æ•°é€šè¿‡ URL æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆ<code>req.query</code>ï¼‰ä¼ é€’ã€‚</p><p><strong>POST è¯·æ±‚</strong>ï¼šå‚æ•°é€šè¿‡è¯·æ±‚ä½“ï¼ˆ<code>req.body</code>ï¼‰ä¼ é€’ã€‚</p><p><strong>PUT è¯·æ±‚</strong>ï¼šå‚æ•°é€šè¿‡è¯·æ±‚ä½“ï¼ˆ<code>req.body</code>ï¼‰ä¼ é€’ï¼Œè·¯å¾„å‚æ•°é€šè¿‡ <code>req.params</code> è·å–ã€‚</p><p><strong>DELETE è¯·æ±‚</strong>ï¼šå‚æ•°é€šå¸¸é€šè¿‡è·¯å¾„å‚æ•°ï¼ˆ<code>req.params</code>ï¼‰ä¼ é€’ï¼Œå°‘é‡ä½¿ç”¨è¯·æ±‚ä½“ã€‚</p></li></ol><p><strong>ç‰¹æ®Šæƒ…å†µï¼šPOST è¯·æ±‚çš„ JSON æ•°æ®</strong></p><p>å¯¹äº <code>POST</code> è¯·æ±‚ï¼Œå¦‚æœå‘é€çš„æ˜¯ JSON æ•°æ®ï¼Œåç«¯éœ€è¦ä½¿ç”¨ä¸­é—´ä»¶æ¥è§£æè¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®ã€‚ä¾‹å¦‚åœ¨ Express ä¸­ï¼Œä½¿ç”¨ <code>express.json()</code> æ¥è§£æ JSON æ•°æ®ã€‚</p>              </div>            </details>
              </div>
            </details>
<h2 id="14-ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œåˆå¹¶éœ€è¦è¿”å›çš„æ•°æ®"><a href="#14-ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œåˆå¹¶éœ€è¦è¿”å›çš„æ•°æ®" class="headerlink" title="14.ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œåˆå¹¶éœ€è¦è¿”å›çš„æ•°æ®"></a>14.ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œåˆå¹¶éœ€è¦è¿”å›çš„æ•°æ®</h2><details class="folding-tag" ><summary> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… </summary>
              <div class='content'>
              <div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">é¦–å…ˆä»è¯·æ±‚å¤´ä¸­è·å–ç›®æ ‡ä¿¡æ¯</button><button type="button" class="tab">ç¼–å†™è”åˆæŸ¥è¯¢é€»è¾‘</button></div><div class="tab-contents"><div class="tab-item-content active"><p><strong>å°†ä»è¯·æ±‚å¤´ä¸­è·å–ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘è®¾è®¡ä¸ºä¸€ä¸ªä¸­é—´ä»¶</strong></p><p>åœ¨æ ¹ç›®å½•åˆ›å»º /utils/handleToken.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;../config&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleToken</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ä»è¯·æ±‚å¤´çš„ &#x27;x-access-token&#x27; ä¸­è·å– token</span></span><br><span class="line">  <span class="keyword">let</span> token = req.<span class="property">headers</span>[<span class="string">&#x27;x-access-token&#x27;</span>] || req.<span class="property">headers</span>[<span class="string">&#x27;authorization&#x27;</span>] <span class="comment">// æ”¯æŒä¸¤ç§æ–¹å¼è·å– Token</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœå­˜åœ¨ Token ä¸”åŒ…å« &#x27;Bearer &#x27; å‰ç¼€</span></span><br><span class="line">  <span class="keyword">if</span> (token &amp;&amp; token.<span class="title function_">startsWith</span>(<span class="string">&#x27;Bearer &#x27;</span>)) &#123;</span><br><span class="line">    token = token.<span class="title function_">slice</span>(<span class="number">7</span>, token.<span class="property">length</span>) <span class="comment">// ç§»é™¤ &#x27;Bearer &#x27; å‰ç¼€</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">send</span>(&#123; <span class="attr">code</span>: <span class="number">401</span>, <span class="attr">msg</span>: <span class="string">&#x27;ç¼ºå°‘ tokenï¼Œè®¤è¯å¤±è´¥&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// æ›¿æ¢ä¸ºä½ çš„ JWT å¯†é’¥</span></span><br><span class="line">    <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(token, config.<span class="property">jwtSecretKey</span>)</span><br><span class="line">    req.<span class="property">accounts</span> = decoded.<span class="property">accounts</span> <span class="comment">// å°†è§£æå‡ºçš„ç”¨æˆ·ä¿¡æ¯å­˜å…¥ req å¯¹è±¡</span></span><br><span class="line">    <span class="title function_">next</span>() <span class="comment">// ç»§ç»­å¤„ç†è¯·æ±‚</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Token éªŒè¯å¤±è´¥:&#x27;</span>, err)</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">send</span>(&#123; <span class="attr">code</span>: <span class="number">401</span>, <span class="attr">msg</span>: <span class="string">&#x27;æ— æ•ˆçš„ token&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; handleToken &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨å¯¹åº”è·¯ç”±ä¸­æ·»åŠ è¯¥ä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Router</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; handleToken &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../utils/handleToken&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> &#123; taskAllList,taskDetail,hotSearch &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/task&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/task/taskAllList&#x27;</span>,taskAllList)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨è¯·æ±‚ä»»åŠ¡è¯¦æƒ…ä¹‹å‰éªŒè¯ token</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/task/getTaskDetails&#x27;</span>,handleToken,taskDetail)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/position/public/getHotSeach&#x27;</span>,hotSearch)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºè·¯ç”±</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨å¤„ç†é€»è¾‘ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥è¿›è¡Œæ¥æ”¶äº†  /</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> accounts = req.<span class="property">accounts</span></span><br></pre></td></tr></table></figure><p>å…¶å®å§ï¼Œåœ¨ app.js ä¸­ï¼Œæœ‰å¦‚ä¸‹ä¸€ä¸ªä¸­é—´ä»¶äº†è§£ä¸€ä¸‹</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸€å®šè¦åœ¨è·¯ç”±ä¹‹å‰ï¼Œåº”ç”¨æ­¤ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> &#123; expressjwt &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./config&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">  <span class="title function_">expressjwt</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: config.<span class="property">jwtSecretKey</span>, <span class="comment">// ä¸ç”Ÿæˆ Token æ—¶çš„å¯†é’¥ä¿æŒä¸€è‡´</span></span><br><span class="line">    <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>], <span class="comment">// ç¡®ä¿ç®—æ³•ä¸ Token çš„ç­¾åæ–¹å¼åŒ¹é…</span></span><br><span class="line">    <span class="attr">getToken</span>: <span class="function">(<span class="params">req</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ä» x-access-token æå– Token</span></span><br><span class="line">      <span class="keyword">const</span> token = req.<span class="property">headers</span>[<span class="string">&#x27;x-access-token&#x27;</span>]</span><br><span class="line">      <span class="keyword">if</span> (token &amp;&amp; token.<span class="title function_">startsWith</span>(<span class="string">&#x27;Bearer &#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> token.<span class="title function_">slice</span>(<span class="number">7</span>) <span class="comment">// å»æ‰ &quot;Bearer &quot; å‰ç¼€</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">unless</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: [<span class="regexp">/^\/api\/login(\/.*)?$/</span>] <span class="comment">// è±å…ç™»å½•ç›¸å…³æ¥å£</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p> <code>express-jwt</code> ä¸­é—´ä»¶åœ¨éªŒè¯ Token æˆåŠŸåï¼Œè‡ªåŠ¨ä¸ºå½“å‰è¯·æ±‚å¯¹è±¡ <code>req</code> æ·»åŠ çš„ä¸€ä¸ªå±æ€§ï¼Œå³req.authã€‚è¿™ä¸ªå±æ€§å­˜å‚¨çš„æ˜¯è§£æåçš„ JWT <strong>Payload</strong> æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯åœ¨ç”Ÿæˆ Token æ—¶åµŒå…¥çš„ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå› æ­¤ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè§£æ„ä»¥è·å–ç›®æ ‡ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; accounts &#125; = req.<span class="property">auth</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><p><strong>/router_handle/task.js</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»»åŠ¡è¯¦æƒ…æ¥å£</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">taskDetail</span> = <span class="keyword">async</span> (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä»ä¸­é—´ä»¶ä¸­æ¥å—è§£æå‡ºçš„ accounts</span></span><br><span class="line">    <span class="comment">// const accounts = req.accounts</span></span><br><span class="line">    <span class="comment">// ä»è¯·æ±‚å‚æ•°ä¸­è§£æ„å‡ºæ¥è¦æŸ¥è¯¢çš„ä»»åŠ¡id</span></span><br><span class="line">    <span class="keyword">const</span> &#123; task_id &#125; = req.<span class="property">query</span></span><br><span class="line">    <span class="keyword">const</span> &#123; accounts &#125; = req.<span class="property">auth</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!accounts) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">send</span>(&#123; <span class="attr">code</span>: <span class="number">401</span>, <span class="attr">msg</span>: <span class="string">&#x27;ç”¨æˆ·æœªç™»å½•æˆ–æ— æ•ˆ token&#x27;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ä»»åŠ¡è¯¦æƒ…çš„SQLè¯­å¥</span></span><br><span class="line">    <span class="keyword">const</span> sql = <span class="string">&#x27;SELECT * FROM tasklist WHERE task_id = ?&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡ŒæŸ¥è¯¢ä»»åŠ¡è¯¦æƒ…çš„SQLè¯­å¥</span></span><br><span class="line">    <span class="keyword">const</span> [result] = <span class="keyword">await</span> db.<span class="title function_">query</span>(sql, task_id)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> taskDetail = result[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ”¶è—å…³ç³»çš„ sql è¯­å¥</span></span><br><span class="line">    <span class="keyword">const</span> sqlFavorite = <span class="string">&#x27;SELECT * FROM task_favorites WHERE accounts = ? AND task_id = ?&#x27;</span></span><br><span class="line">    <span class="comment">// æ‰§è¡ŒæŸ¥è¯¢æ”¶è—å…³ç³»</span></span><br><span class="line">    <span class="keyword">const</span> [favoriteResult] = <span class="keyword">await</span> db.<span class="title function_">query</span>(sqlFavorite, [accounts, task_id])</span><br><span class="line">    <span class="comment">// æ ¹æ®æŸ¥è¯¢ç»“æœï¼Œè®¾ç½® status å€¼</span></span><br><span class="line">    <span class="keyword">const</span> status = favoriteResult.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span> <span class="comment">// 1 è¡¨ç¤ºå·²æ”¶è—ï¼Œ0 è¡¨ç¤ºæœªæ”¶è—</span></span><br><span class="line">    <span class="comment">// å“åº”æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">result</span>: &#123;</span><br><span class="line">        <span class="attr">records</span>: [&#123;</span><br><span class="line">          ...taskDetail,</span><br><span class="line">          status</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;æŸ¥è¯¢ä»»åŠ¡è¯¦æƒ…æˆåŠŸï¼&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    res.<span class="title function_">cc</span>(e) <span class="comment">// æ•è·å¹¶è¿”å›é”™è¯¯</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
              </div>
            </details>
<h2 id="100-è¿™é‡Œå¿…é¡»ç•™ä¸€ä¸ªå°å°¾å·´ï¼Œå¦åˆ™ï¼Œç¼–è¾‘è½¯ä»¶ä¼šæŠ¥é”™ï¼Œåé¢è§†æƒ…å†µä¼šå¯»æ‰¾åŸå› ï¼Œå¤§æ¦‚ç‡æ˜¯ç¼–è¾‘å™¨åŸå› ï¼"><a href="#100-è¿™é‡Œå¿…é¡»ç•™ä¸€ä¸ªå°å°¾å·´ï¼Œå¦åˆ™ï¼Œç¼–è¾‘è½¯ä»¶ä¼šæŠ¥é”™ï¼Œåé¢è§†æƒ…å†µä¼šå¯»æ‰¾åŸå› ï¼Œå¤§æ¦‚ç‡æ˜¯ç¼–è¾‘å™¨åŸå› ï¼" class="headerlink" title="100. è¿™é‡Œå¿…é¡»ç•™ä¸€ä¸ªå°å°¾å·´ï¼Œå¦åˆ™ï¼Œç¼–è¾‘è½¯ä»¶ä¼šæŠ¥é”™ï¼Œåé¢è§†æƒ…å†µä¼šå¯»æ‰¾åŸå› ï¼Œå¤§æ¦‚ç‡æ˜¯ç¼–è¾‘å™¨åŸå› ï¼"></a>100. è¿™é‡Œå¿…é¡»ç•™ä¸€ä¸ªå°å°¾å·´ï¼Œå¦åˆ™ï¼Œç¼–è¾‘è½¯ä»¶ä¼šæŠ¥é”™ï¼Œåé¢è§†æƒ…å†µä¼šå¯»æ‰¾åŸå› ï¼Œå¤§æ¦‚ç‡æ˜¯ç¼–è¾‘å™¨åŸå› ï¼</h2><p>ttttt ä¸ä¼šé”™ç‰ˆäº†kugei</p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://youruilin.github.io/posts/629f32c0/">https://youruilin.github.io/posts/629f32c0/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>æ¸¸ç‘æ—</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2024-12-29</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2025-07-22</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF/">åç«¯</a><a class="post-meta__tags" href="/tags/api/">api</a></div><div class="post-share"><div class="social-share" data-image="http://lychee.iooio.cn:9527/uploads/medium/38/53/e2ec8d2bd090dd1321fa01254923.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="prev-post pull-left" href="/posts/2d02f8e2/" title="ç§»æ¤å®‰çŸ¥é±¼ä¸­æ§å°"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">å‰ã¸</div><div class="prev_info">ç§»æ¤å®‰çŸ¥é±¼ä¸­æ§å°</div></div></a><a class="next-post pull-right" href="/posts/2b6a0f4d/" title="å¤§äº‹ä»¶é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">æ¬¡ã¸</div><div class="next_info">å¤§äº‹ä»¶é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°</div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>é–¢é€£è¨˜äº‹</span></div><div class="relatedPosts-list"><a href="/posts/2b6a0f4d/" title="å¤§äº‹ä»¶é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-29</div><div class="title">å¤§äº‹ä»¶é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°</div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> ã‚³ãƒ¡ãƒ³ãƒˆ</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®æ¬¡</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">1.åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA-mysql-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.åˆ›å»º mysql æ•°æ®åº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%BA%E9%A1%B9%E7%9B%AE%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%AE%89%E8%A3%85-mysql2-%E6%A8%A1%E5%9D%97"><span class="toc-text">3.ä¸ºé¡¹ç›®åç«¯é¡¹ç›®å®‰è£… mysql2 æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97"><span class="toc-text">4.ç™»å½•æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6-res-cc"><span class="toc-text">5.å®šä¹‰ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶ res.cc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%85%A8%E5%B1%80%E9%94%99%E8%AF%AF%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">6.å…¨å±€é”™è¯¯ä¸­é—´ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%B8%BA%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE-eslint"><span class="toc-text">7. ä¸ºé¡¹ç›®é…ç½® eslint</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81-escook-express-joi"><span class="toc-text">8.  è¡¨å•éªŒè¯ @escook&#x2F;express-joi</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E4%BD%BF%E7%94%A8-fetch-%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0json%E6%95%B0%E6%8D%AE"><span class="toc-text">9. ä½¿ç”¨ fetch åŠ è½½æœ¬åœ°jsonæ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5%EF%BC%8C%E5%90%91-mysql-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">10. å¼€å‘é˜¶æ®µï¼Œå‘ mysql æ•°æ®åº“æ‰¹é‡æ·»åŠ æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-jwt-token-%E9%AA%8C%E8%AF%81"><span class="toc-text">11. jwt-token éªŒè¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%B8%A9%E6%95%85%E7%9F%A5%E6%96%B0%EF%BC%8C%E5%89%8D%E7%AB%AF%E7%80%91%E5%B8%83%E6%B5%81%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E7%9A%84%E5%90%8E%E7%AB%AF%E9%80%82%E9%85%8D"><span class="toc-text">12.æ¸©æ•…çŸ¥æ–°ï¼Œå‰ç«¯ç€‘å¸ƒæµåŠ è½½æ•°æ®çš„åç«¯é€‚é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E6%8C%89%E7%85%A7%E8%8C%83%E5%BC%8F%E6%A0%87%E5%87%86%EF%BC%8C%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E6%94%B6%E8%97%8F%E8%A1%A8"><span class="toc-text">13. æŒ‰ç…§èŒƒå¼æ ‡å‡†ï¼Œåˆ›å»ºç”¨æˆ·æ”¶è—è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E4%BD%BF%E7%94%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%90%88%E5%B9%B6%E9%9C%80%E8%A6%81%E8%BF%94%E5%9B%9E%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">14.ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œåˆå¹¶éœ€è¦è¿”å›çš„æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#100-%E8%BF%99%E9%87%8C%E5%BF%85%E9%A1%BB%E7%95%99%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%B0%BE%E5%B7%B4%EF%BC%8C%E5%90%A6%E5%88%99%EF%BC%8C%E7%BC%96%E8%BE%91%E8%BD%AF%E4%BB%B6%E4%BC%9A%E6%8A%A5%E9%94%99%EF%BC%8C%E5%90%8E%E9%9D%A2%E8%A7%86%E6%83%85%E5%86%B5%E4%BC%9A%E5%AF%BB%E6%89%BE%E5%8E%9F%E5%9B%A0%EF%BC%8C%E5%A4%A7%E6%A6%82%E7%8E%87%E6%98%AF%E7%BC%96%E8%BE%91%E5%99%A8%E5%8E%9F%E5%9B%A0%EF%BC%81"><span class="toc-text">100. è¿™é‡Œå¿…é¡»ç•™ä¸€ä¸ªå°å°¾å·´ï¼Œå¦åˆ™ï¼Œç¼–è¾‘è½¯ä»¶ä¼šæŠ¥é”™ï¼Œåé¢è§†æƒ…å†µä¼šå¯»æ‰¾åŸå› ï¼Œå¤§æ¦‚ç‡æ˜¯ç¼–è¾‘å™¨åŸå› ï¼</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">é­”æ”¹æŒ‡å—</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="FomalhautğŸ¥"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.net/img/avatar.webp" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://tzy1997.com/" title="å”å¿—è¿œã®åšå®¢"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2022/05/02/626f92e193879.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://akilar.top/" title="Akilarã®ç³–æœå±‹"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/6bf1ed05796db59c.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://butterfly.js.org/" title="Butterfly"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/64cc6a7d508026e1.png" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://anzhiy.cn/" title="å®‰çŸ¥é±¼"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.net/img/anzhiyu.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://akilar.top/link/" title="Acozycotage"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://akilar.top/img/siteicon/favicon.png" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://blog.bywind.xyz/" title="éšé£èµ·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog.bywind.xyz/img/avatar.png" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¼ æ´ª"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2022/12/28/63ac2812183aa.png" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2019 - 2025</b></span><span><b>&nbsp;&nbsp;By æ¸¸ç‘æ—</b></span></div><div class="framework-info"><span>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ãƒ†ãƒ¼ãƒ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v7.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v5.0.0-b1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œè”é€šçº¿è·¯æ‰˜ç®¡äºCoding"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&amp;logo=Codio" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="èª­æ›¸ãƒ¢ãƒ¼ãƒ‰"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç°¡ä½“å­—ã¨ç¹ä½“å­—ã®åˆ‡ã‚Šæ›¿ãˆ">ç¹</button><a class="icon-V hidden" onclick="switchNightMode()" title="ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰/ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="ã‚·ãƒ³ã‚°ãƒ«ã‚«ãƒ©ãƒ ã¨ãƒ€ãƒ–ãƒ«ã‚«ãƒ©ãƒ ã®åˆ‡ã‚Šæ›¿ãˆ"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è¨­å®š"><i class="fas fa-cog fa-spin"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ã‚³ãƒ¡ãƒ³ãƒˆã¸ç§»å‹•"><i class="fas fa-comments"></i></a><button id="hide-aside-btn" type="button" title="ã‚·ãƒ³ã‚°ãƒ«ã‚«ãƒ©ãƒ ã¨ãƒ€ãƒ–ãƒ«ã‚«ãƒ©ãƒ ã®åˆ‡ã‚Šæ›¿ãˆ"><i class="fas fa-arrows-alt-h"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®æ¬¡"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (false){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-zeta-coral.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-zeta-coral.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="/js/random.js"></script><script src="//at.alicdn.com/t/c/font_4684778_183q7j85b02.js"></script><script defer src="/js/runtime.js"></script><script defer src="/js/tooltip.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script defer data-pjax src="/js/txmap.js"></script><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script async src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn.jsdelivr.net/npm/element-ui@2.15.6/lib/index.js"></script><script defer src="/js/custom.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.19.0/sweetalert2.all.min.js"></script><script defer src="/js/lunar.js"></script><script defer src="/js/day.js"></script><script src="/js/sun_moon.js" async></script><script src="/js/f12.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><script async src="/js/console.js"></script><script data-pjax src="/js/nav.js"></script><script async src="/js/fps.js"></script><script async src="/js/title.js"></script><script async data-pjax src="/js/meting_js.js"></script><script async data-pjax src="/js/music.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

const triggerPjaxFn = (val) => {
  if (!val) return
  Object.values(val).forEach(fn => { fn() })
}

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjaxSendOnce')
  btf.removeGlobalFnEvent('themeChange')

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  triggerPjaxFn(window.globalFn.pjaxSend)
})

document.addEventListener('pjax:complete', () => {
  btf.removeGlobalFnEvent('pjaxCompleteOnce')
  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  triggerPjaxFn(window.globalFn.pjaxComplete)
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æ¤œç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://youruilin.github.io/categories/æ—¥è¯­/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“š æ—¥æœ¬èªèƒ½åŠ›ç·´ç¿’ã—ã¦ã„ã‚‹ (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youruilin.github.io/categories/hexo/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ® hexo_blog æ­å»ºå…¨è¿‡ç¨‹ (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youruilin.github.io/categories/å‰ç«¯å¼€å‘/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ±â€ğŸ‘“ Vite + vue3 + ts åŒç«¯æ‹›è˜é¡¹ç›® (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youruilin.github.io/categories/git/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“’ git ç›¸å…³ (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youruilin.github.io/categories/åç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ’¡ åç«¯ api_server (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://youruilin.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #49b1f5}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/d711a81c/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://github.com/youruilin/pic_bed/blob/main/bcg_img/%E5%92%8C%E9%A3%8E%E5%B7%A5%E4%BD%9C%E5%8F%B0%E9%9D%A2.jpg?raw=true" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/d711a81c/&quot;);" href="javascript:void(0);" alt="">æ—¥æœ¬èªå‹‰å¼·ã—ã¦ã„ã‚‹Â·é ‘å¼µã‚Œï¼</a><div class="blog-slider__text">è®°å½•å­¦ä¹ æ—¥è¯­çš„å…¨è¿‡ç¨‹, ä¿æŒä¸æ–­åœ°å­¦ä¹ ..</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/d711a81c/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/629f32c0/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://lychee.iooio.cn:9527/uploads/medium/38/53/e2ec8d2bd090dd1321fa01254923.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-07-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/629f32c0/&quot;);" href="javascript:void(0);" alt="">åŒæ‹›é¡¹ç›®åç«¯apiå…¨è¿‡ç¨‹å®ç°</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/629f32c0/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/7f37c772/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://lychee.iooio.cn:9527/uploads/original/3d/44/667fa779ad75e6062e263075a028.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-07-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/7f37c772/&quot;);" href="javascript:void(0);" alt="">ec2ä½¿ç”¨dockeréƒ¨ç½²lycheeå›¾åºŠå…¨è¿‡ç¨‹è®°å½•</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/7f37c772/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"log":false});</script></body></html>